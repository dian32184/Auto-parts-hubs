"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1e3fdc34-8667-57a7-9c6c-6451c103229f")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[4279],{54716:(e,t,a)=>{a.d(t,{T:()=>p});var n=a(23459),i=a(430285),l=a(427008),r=a(95650),o=a(379338),c=a(195507),s=a(802780),d=a(376780),u=a(635547),m=a(572699),_=a(668249);let f=(0,n.Iz)(e=>(0,n.eU)(t=>e?t(u.WF4.Query({orgId:e})).transform(({org:e})=>!!c.oA(e?.isSalesAssistedPlanProperty)?.value&&!(0,c.oA)(e?.subscriptionShouldNotAutoRenewPlanProperty)&&c.oA(e?.plan?.termsOfServiceAcceptanceByTermsKey)?.termsKey!==d.Lb.SEATS_MODEL_BILLING_2025):i.Qw.disabled()));function p(e){let t=(0,s.CT)(),a=(0,l.Xf)(e?.id),i=(0,n.md)(f(e?.id??null)),d=(0,m.gI)({migrationGroup:_.L.GROUP_7,component:"useProductTermsEligibility"}),u=a.data?.analyze_data_contract_v2_start,p=u?(0,r.A)(u):null,h=(0,r.A)(),E=!!p&&h.isBefore(p)&&90>=p.diff(h,"day"),k=(0,r.A)((0,o.tl)().analyze_data_flow_v2_until),w=!!e&&(0,r.A)(e.created_at).isBefore(k),b=(0,c.oA)(i),g=!!(e?.id&&d&&w&&E&&t&&b);return"loading"===a.status||"loading"===i.status||b?.status==="loading"?(0,c.Xm)():(0,c.gB)({isEligible:g,orgTermsInfo:{organizationName:e?.name??"organization",renewalDate:p}})}},349639:(e,t,a)=>{a.d(t,{L:()=>f,I:()=>p});var n=a(848318),i=a(911734),l=a(905899),r=a(902213),o=a(649003),c=a(155651),s=a(280679),d=a(597986);let u="resource_page_header--resourceHeaderAvatar--FI-3x",m="resource_page_header--resourceHeaderAvatarWrapper--nn-w8",_="resource_page_header--resourceHeaderFigmaPartnerBadge--cgvkO";function f({publishers:e,size:t=32,showFigmaPartnerBadge:a,openInNewTab:l=!1}){return e.length<5?n.createElement(n.Fragment,null,e.map((e,i)=>n.createElement("div",{key:e.id,className:m,"data-testid":"resource-header-avatar-"+i},n.createElement(c.o3,{to:new r.xn({profileHandle:e.profile_handle}).to,trackingEventName:"resource_creator_click",trackingProperties:{profileId:e.id,target:"avatar"},key:e.id,target:l?"_blank":"_self"},n.createElement(s.e,{entity:e,size:t,style:{zIndex:3-i},adtlClassName:u})),a&&n.createElement("div",{className:_,style:{zIndex:3-i}},(0,d.C2)(e,!0))))):n.createElement(n.Fragment,null,e.slice(0,3).map((e,t)=>n.createElement("div",{className:m,key:e.id,"data-testid":"resource-header-avatar-"+t},n.createElement(i.N_,{to:new r.xn({profileHandle:e.profile_handle}).to,onClick:e=>e.stopPropagation(),key:e.id},n.createElement(s.e,{entity:e,style:{zIndex:3-t},adtlClassName:u})),a&&n.createElement("div",{className:_,style:{zIndex:3-t}},(0,d.C2)(e,!0)))),n.createElement("div",{className:"resource_page_header--resourceHeaderAvatarWrapperExtraProfiles--P5q2P resource_page_header--resourceHeaderAvatarWrapper--nn-w8"},n.createElement(o.e,{type:"Letter",size:"Large",letter:(e.length-3).toString()})))}function p({publishers:e,useSmallWidth:t=!1,removeByLabel:a=!1,openInNewTab:i=!1}){return n.createElement("span",{className:e.length>2?"resource_page_header--author--k2bGY":"resource_page_header--authorHiddenOverflow--hoVA5"},(0,l.kc)(e,t,a,i))}},335376:(e,t,a)=>{a.d(t,{N:()=>s});var n=a(848318),i=a(716544),l=a(493554),r=a(507152),o=a(635547),c=a(154209);function s(){let e=n.useMemo(()=>(0,r.g)(),[]),t=(0,i.d4)(c.kY),a=(0,l.Rs)(o.gfM,{cacheNonce:e});return n.useMemo(()=>{if("loaded"===a.status){let e=a.data?.lockClient;if(e)return e.lock}return t},[a,t])}},23895:(e,t,a)=>{a.d(t,{E:()=>l});var n=a(925040);let i=(0,n.Mz)(e=>e.dropdownShown,e=>e?.type),l=e=>(0,n.Mz)(i,t=>t===e)},862142:(e,t,a)=>{a.d(t,{d:()=>$});var n=a(848318),i=a(716544),l=a(425068),r=a(846153),o=a(792760),c=a(245405),s=a(579020),d=a(493554),u=a(303035),m=a(507152),_=a(782623),f=a(473889),p=a(575492),h=a(390709),E=a(483370),k=a(442313),w=a(500276),b=a(196484),g=a(170513),v=a(91635),y=a(604613),N=a(507720),C=a(892327),A=a(661780),T=a(635547),I=a(707717),P=a(572699),R=a(668249),D=a(830789),F=a(592659),x=a(688637),M=a(819382),S=a(803735),B=a(390280),L=a(798918),O=a(896641),q=a(649567);let U="quick_reply_thread_view--headerButton--wmkPJ",H=new class{get file(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get fileFollower(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get comments(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}},z=null,$=(0,n.forwardRef)((e,t)=>{let a=(0,d.Rs)(T.Uhm,{fileKey:e.quickReplyInfo.fileKey,rootId:e.quickReplyInfo.threadId});return n.createElement("div",{className:"quick_reply_thread_view--container--WPlnN",ref:t},n.createElement("div",{className:"quick_reply_thread_view--column--UrAD4"},n.createElement("div",{className:"quick_reply_thread_view--header--BHlje"},n.createElement("div",{className:U},!e.fileBrowser&&n.createElement(E.J,{"aria-label":(0,k.t)("quick_reply.navigate_back"),onClick:e.onClose},n.createElement(l.C,null))),n.createElement("div",{className:"quick_reply_thread_view--fileName--S2twU"},"loaded"===a.status&&a.data.file&&a.data.file.name),n.createElement("div",{className:U},e.fileBrowser?n.createElement(E.J,{"aria-label":(0,k.t)("quick_reply.close"),onClick:e.onClose},n.createElement(r.A,null)):n.createElement("div",{style:{display:"none"}},n.createElement(E.J,{"aria-label":(0,k.t)("quick_reply.more")},n.createElement(o.J,null))))),n.createElement(Q,{quickReplyInfo:e.quickReplyInfo,result:a,hideOverflowMenu:e.fileBrowser})))});function Q(e){let t=(0,A.iZ)();return t?"loading"===e.result.status||"disabled"===e.result.status?n.createElement(f.qc,{size:"medium"}):"errors"===e.result.status||null==e.result.data.file?n.createElement("div",{className:"quick_reply_thread_view--errorState--Re4UD"},(0,k.t)("quick_reply.unable_to_load_thread")):n.createElement(V,{quickReplyInfo:e.quickReplyInfo,result:e.result,user:t,hideOverflowMenu:e.hideOverflowMenu}):null}function V(e){let{quickReplyInfo:t,result:a,user:l}=e,{fileKey:r,threadId:o}=t,d=(0,v.dr)({args:{fileKey:r,rootId:o},subscription:a}),u=(0,i.wA)(),{file:m}=a.data,f=(0,P.ST)({component:"QuickReplyThreadViewWithProvider",migrationGroup:R.L.GROUP_1,attribute:"planUserPermission",legacy:e=>e?.file?.org?.currentOrgUser?.permission||"",migrated:e=>e?.file?.org?.currentPlanUser?.permission||"",lgQuery:a}),p=(0,n.useMemo)(()=>(0,I.mp)({currentOrgId:m.org?.id,teamId:m.teamId,fileKey:r,isOrgGuest:"guest"===f,users:[]}),[m.org?.id,m.teamId,r,f]),{mobileCommentThread:w}=m,{currentUserCommentReadStatus:y}=m,A=w.find(e=>e.id===o),{thumbnailUrl:T,onError:F}=function(e){let t=n.useMemo(()=>e.reduce((e,t)=>t.createdAt.getTime()>e.createdAt.getTime()?t:e).thumbnailUrl,[e]),{onError:a,thumbnailLoadError:i}=(0,h.b)(t);return{thumbnailUrl:i?null:t,onError:a}}(w),x=(0,i.d4)(e=>e.comments.savingCommentUuids),M=(0,i.d4)(e=>e.comments.lgPendingUuidToServerIdMap);if(!A)return n.createElement("div",null,(0,k.t)("quick_reply.unable_to_load_thread"));let S=w.map(e=>(0,N.G9)(l.id,A,e,y??N.gj,x,M,e.attachments)),B={id:A.id,key:r,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,comments:S,messageMeta:S[0].message_meta,page:A.clientMeta?.pageId||null,isActive:!0,replyCount:w.length-1,isCanvasMention:!1,pageName:A.clientMeta?.pageId||null,sidebarItemType:D.kT.COMMENT_THREAD},L={api:d,status:a.status,data:H,threads:{status:a.status,data:[B],errors:a.errors},errors:a.errors,isResolvedLoaded:!0,isUnresolvedLoaded:!0};return n.createElement(g.kR,{value:L},n.createElement("div",{className:"quick_reply_thread_view--mouseContainer--qyIpH",onMouseEnter:()=>{let e=S.some(e=>e.isUnread);z=setTimeout(()=>{d.commentReceipts&&e&&(u(b.AY({receiptsAPI:d.commentReceipts,thread:B})),(0,s.sx)("Comment Thread Read",{commentThreadId:o,threadType:"file_browser_quick_reply"}))},1e3)},onMouseLeave:()=>{z&&clearTimeout(z)}},n.createElement("div",{className:"quick_reply_thread_view--preview--I47Ds"},n.createElement(_.oW,{src:T||void 0,onError:F,className:"quick_reply_thread_view--previewImage--gSK-n",style:{backgroundColor:(0,C.C)(m.checkpointClientMeta)},alt:"thumbnail"}),n.createElement("div",{className:"quick_reply_thread_view--openFileButton--RBtVz"},n.createElement(E.J,{"aria-label":(0,k.t)("quick_reply.open_file"),onClick:()=>{let e=t.deeplink??`/file/${r}?fuid=${l.id}&#${o}`;window.location.href=e}},n.createElement(c.V,null)))),n.createElement(j,{loadedComments:S,user:l,quickReplyInfo:t,commentMentionables:p,hideOverflowMenu:e.hideOverflowMenu})))}function Y(){let e=(0,i.wA)(),t=(0,i.d4)(e=>e.dropdownShown||null),a=(0,A.iZ)(),l=(0,F.v)();if(!t||t.type!==y.VJ)return null;let{comment:r,parentRect:o,thread:c,isUnread:s}=t.data;return n.createElement(S.V,{dispatch:e,comment:r,parentRect:o,currentUser:a,isUnread:s,thread:c,copyLink:l})}function j(e){let{loadedComments:t,user:a,quickReplyInfo:l,commentMentionables:r,hideOverflowMenu:o}=e,{fileKey:c,threadId:s}=l,d=(0,i.wA)();(0,n.useEffect)(()=>{d(b.Fm({threadId:s}))},[d,s]);let _=(0,i.d4)(e=>e.comments.typeahead),f=(0,i.d4)(e=>e.comments.editingComment),h=(0,i.d4)(e=>e.dropdownShown||null),E=(0,i.d4)(e=>e.comments.activeThread?.id),v=(0,i.d4)(e=>e.comments.threads),y=E&&v[E]||null,N=y?.reply.messageMeta||[],{submitReply:C,updateMessage:A,submitEdit:T}=function(e){let t=(0,i.wA)(),a=(0,g.I_)().writeAPI,l=g.GH()?.threads;return{submitReply:n.useCallback(e=>{if(!a){console.error("Calling submitReply with no write API");return}l&&"loaded"===l.status&&l.data.find(t=>t.id===e.threadId)&&(e.onCommentValidationFailure=(n,i,l,r)=>b.dB(a,t,n,i,l,r,e.uuid,O.y),t(b.lV({...e,commentsWriteApi:a,commentsConfiguration:O.y,trackingContext:{feature:"web_quick_reply_screen"}})))},[t,l,a]),updateMessage:n.useCallback(a=>{t(b.k7({threadId:e,messageMeta:a}))},[t,e]),submitEdit:n.useCallback((e,a)=>{t(b._v({comment:e,messageMeta:a}))},[t])}}(s),I=(0,M._B)(),P=n.useRef(null),R=n.useRef(null),F=n.useRef(null),[U,H]=n.useState(null),[z,$]=n.useState(n.useRef(null)),Q=n.useRef(null),V=0,j=0,J=0;Q.current&&Q.current.offsetParent&&(V=Q.current.offsetWidth,j=Q.current.offsetLeft,J=Q.current.offsetParent.clientHeight-Q.current.offsetTop);let X=e=>e||{x:0,y:0},K=n.useRef(null);(0,n.useEffect)(()=>{K.current&&K.current.scrollToBottom()},[]);let W=[...new Set(t.map(e=>e.user.handle))],G=t.find(e=>e.id===s);return G?n.createElement(n.Fragment,null,n.createElement("div",{style:w.sx.flex1.$}),n.createElement(p.P,{className:"quick_reply_thread_view--bottomAnchoredScrollContainer--5-F87",useBottomPinning:!0,ref:K,enableScrollShadow:!0},n.createElement("div",{className:"quick_reply_thread_view--reverseColumn--ur8Yx"},t.slice().reverse().map((e,i)=>n.createElement(S.I,{key:`thread-comment-${e.id}`,allowAttachments:!1,comment:e,dispatch:d,dropdownShown:h,editingComment:f,editorOnClear:I.editorOnClear,editorOnInsert:I.editorOnInsert,editorRef:F,editorType:"comment-editor-thread",hideEmojiPicker:!1,hideOverflowMenu:o,hideReactions:!1,hideResolve:!1,hyperlinkLocation:U,index:i,isQuickReplyThreadView:!0,mentionables:r,mountInputFocused:!0,prevAuthor:0===i?null:t[i-1].user_id,setHyperlinkEditorRef:$,setHyperlinkLocation:H,setIsEditorFocused:u.lQ,setResolved:u.lQ,showEditedIndicator:!!e.edited_at,submitEdit:T,thread:{comments:t,key:c,id:s},threadPosition:{x:0,y:0},typeahead:_,user:a,viewportPositionFromClientPosition:X})))),n.createElement(B.K,{allowAttachments:!1,authorNames:W,className:q.MJ,dispatch:d,editingExistingComment:!1,editorOnClear:I.editorOnInsert,editorOnInsert:I.editorOnClear,editorRef:R,editorType:"comment-editor-reply",fileKey:c,hideEmojiPicker:!1,hyperlinkLocation:U,isDisabled:!1,isEmojiPickerDisabled:null!==f,mentionables:r,messageMeta:N,mountInputFocused:!0,onCancel:u.lQ,onComposeFocus:void 0,onSubmit:()=>{C({threadId:s,threadUuid:G.uuid||void 0,uuid:(0,m.g)()})},placeholderText:(0,k.t)("comments.reply"),recordingKey:D.Dw.quickReply,replyContainerRef:Q,setHyperlinkEditorRef:$,setHyperlinkLocation:H,setIsEditorFocused:u.lQ,submitText:(0,k.t)("comments.reply"),threadId:s,threadPosition:null,typeahead:_,updateMessage:A,user:a,viewportPositionFromClientPosition:X}),n.createElement(x.rf,{decoratorsRef:P,onClear:I.onClear,onInsert:I.onInsert,width:V,direction:L.ri.UPWARDS,positionFromBottom:{left:j,bottom:J}}),n.createElement(Y,null)):null}},136132:(e,t,a)=>{a.d(t,{g:()=>s});var n=a(848318),i=a(536384),l=a.n(i),r=a(166365),o=a(17755),c=a(364616);let s=n.forwardRef((e,t)=>{let a=o.s.h16.w16.ml1.flex.justifyCenter.itemsCenter.with({colorIconOnbrand:e.isOnBrandColor,colorIcon:!e.isOnBrandColor}).$;return n.createElement("button",{className:l()("dropdown_button--button--BR3bZ",e.buttonClassName,{"dropdown_button--active--ZkglI":e.isShowingDropdown}),onClick:e.onClick,ref:t,"data-testid":e.dataTestId,"aria-label":e["aria-label"]},e.children,n.createElement(r.B,{svg:c.A,className:a}))})},483370:(e,t,a)=>{a.d(t,{J:()=>l});var n=a(848318),i=a(376025);let l=n.forwardRef(function({children:e,...t},a){return n.createElement(i.E,{...t,ref:a,className:"icon_button_32--iconButton--gFcI9"},n.createElement("span",{"aria-hidden":!0,className:"icon_button_32--icon--8SoTm"},e))})},902930:(e,t,a)=>{a.d(t,{H:()=>l});var n=a(848318),i=a(303035);let l=n.createContext({shouldShowChevron:e=>!1,onClick:()=>!1,onMouseEnter:i.lQ,onMouseMove:i.lQ,onRemove:i.lQ})},949546:(e,t,a)=>{a.d(t,{IP:()=>eJ,fd:()=>n,he:()=>ej,ql:()=>eY});var n,i=a(848318),l=a(716544),r=a(551316),o=a(376025),c=a(157907),s=a(536384),d=a.n(s),u=a(141039),m=a(217727),_=a(44509),f=a(463117),p=a(397579),h=a(757033),E=a(473889),k=a(575492),w=a(442313),b=a(697714),g=a(790355),v=a(110979),y=a(732502),N=a(481540),C=a(787360),A=a(369600),T=a(87089),I=a(841747),P=a(661780),R=a(834111),D=a(902058),F=a(761669),x=a(608286),M=a(719863),S=a(197638),B=a.n(S),L=a(586994),O=a(379338),q=a(145015),U=a(753131),H=a(166365),z=a(280198),$=a(856480),Q=a(576220),V=a(919546),Y=a(832876),j=a(937053),J=a(902930);let X="block_kit_row--rowTop--4zNja",K="block_kit_row--metadataContainer--tcs33",W="block_kit_row--usersContainer--J5oFI",G="block_kit_row--usersContainerStructuredView--PUPYI",Z="block_kit_row--quickReplyChevron--0rKX3",ee="block_kit_row--chevronIcon--2uviD",et="block_kit_row--imagePreview--CqQsi";var ea=a(987294);function en(e){return i.createElement("span",{className:"block_kit_row--htmlTextBlock--wINSP",dangerouslySetInnerHTML:{__html:B().sanitize(e.block.html_text)}})}function ei(e){let t=(0,L.UF)(e.block.emoji_shortcode)[0];return t.meta?i.createElement("span",{className:"block_kit_row--emojiUnicode--qBoed"},t.unicode):i.createElement(i.Fragment,null)}function el(e){return e?e.map((e,t)=>"HtmlTextBlock"===e._block_type?i.createElement(en,{key:t,block:e}):i.createElement(ei,{key:t,block:e})):[]}function er(e){let{block:t,size:a}=e;return i.createElement(Y.Ro,{entity:{...t,id:t.entity_id},size:a,hideFallbackInitial:!1,shape:t.shape.toUpperCase()})}function eo(e){let{block:t}=e;return i.createElement("div",{className:`${et} thumbnail_DEPRECATED--tileThumbnail--4kE7l`,style:{background:`url(${(0,V.A)()})`}},i.createElement("div",{className:"thumbnail_DEPRECATED--thumbnailContainer--xPcsg",style:{backgroundColor:(e=>{if(!e||0===e.alpha)return"transparent";let{red:t,green:a,blue:n,alpha:i}=e;return`rgba(${255*t|0}, ${255*a|0}, ${255*n|0}, ${i})`})(t.background_color)}},i.createElement("div",{className:"thumbnail_DEPRECATED--thumbnail--WuuvA thumbnail_DEPRECATED--baseThumbnail--8p9z4",style:{backgroundImage:`url(${t.img_url})`}})))}function ec(e){let{block:t}=e;return i.createElement("div",{className:"block_kit_row--square--vD5SO"},i.createElement("div",{className:et,style:{backgroundImage:`url(${t.img_url})`}}))}function es(e){let{avatars:t}=e;return 0===t.length?null:t.length>1?i.createElement("div",{className:W},i.createElement("div",{className:"block_kit_row--secondaryUser--hkjpm"},i.createElement(er,{block:t[1],size:Q.Pf.MEDIUM})),i.createElement("div",{className:"block_kit_row--primaryUser--lg4hR"},i.createElement(er,{block:t[0],size:Q.Pf.MEDIUM}))):i.createElement("div",{className:W},i.createElement(er,{block:t[0],size:Q.Pf.LARGE}))}function ed(e){let{avatars:t,icon:a}=e;return 0===t.length?null:t.length>1?i.createElement("div",{className:G},i.createElement("div",{className:"block_kit_row--secondaryUserRevamp--ZkcO7"},i.createElement(er,{block:t[1],size:Q.Pf.MEDIUM})),i.createElement("div",{className:"block_kit_row--primaryUserRevamp--XYq-9"},i.createElement(er,{block:t[0],size:Q.Pf.MEDIUM})),a&&i.createElement(eu,{icon:a})):i.createElement("div",{className:G},i.createElement(er,{block:t[0],size:Q.Pf.LARGE}),a&&i.createElement(eu,{icon:a}))}function eu(e){let{icon:t}=e,a=new Set([(0,O.ck)("fc8b3d0c889b51bd8800945089e8b473ff4d619d")]);return i.createElement("div",{className:"block_kit_row--icon--YApgQ"},"ImageThumbnailBlock"===t._block_type?i.createElement("img",{className:`block_kit_row--iconImg--SRdFH ${a.has(t.img_url)?"":"block_kit_row--iconInvert--7YBRA"} `,src:t.img_url,alt:""}):"ReacjiBlock"===t._block_type?i.createElement(ei,{block:t}):"AvatarBlock"===t._block_type?i.createElement(er,{block:t,size:Q.Pf.SMALL16}):void 0)}function em(e){let t=(0,l.wA)(),{block:a,callbacks:n,isPrimary:r=!0}=e,o=async()=>{let e=n.buildNotificationActionRequest(a.notification_action);await e.then(({data:e})=>{if(a.hide_after_action)n.hideNotification();else if(n.followLinkIfPossible(),e.meta.updated_notification_blob){let t=e.meta.updated_notification_blob;n.updateNotification(t.notification_id,t)}},e=>{let n=e.message||("resolve"===a.notification_action?(0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification"):(0,w.t)("user_notification.an_error_occurred_while_removing_this_notification"));t(z.s.error(n))})},c=el([a.text]);return r?i.createElement(q.$$,{className:"block_kit_row--acceptButton--1Fa1c",onClick:o},c):i.createElement(q.nR,{className:"block_kit_row--rejectButton--Hu8KY",onClick:o},c)}function e_(e){let{block:t,actionBlockCallbacks:a}=e;return i.createElement("div",{className:"block_kit_row--rowBottom--dKrKA"},i.createElement(em,{block:t.secondary_action,callbacks:a,isPrimary:!1}),i.createElement(em,{block:t.primary_action,callbacks:a,isPrimary:!0}))}function ef(e){let{block:t,plan:a,shouldShowChevron:n,userLastViewedTimestamp:l}=e;switch(t._block_type){case"BodyAndThumbnailBlock":return i.createElement(ep,{block:t,plan:a,shouldShowChevron:n});case"SplitlineTitleAndBodyBlock":return i.createElement(eh,{block:t,shouldShowChevron:n,userLastViewedTimestamp:l})}}function ep(e){let{block:t,plan:a,shouldShowChevron:n}=e;return i.createElement(i.Fragment,null,i.createElement("div",{className:"block_kit_row--contentContainer--ZbpO2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},i.createElement("div",{className:"block_kit_row--content--52-rY"},i.createElement("div",null,el(t.title)),i.createElement("div",{className:K},i.createElement("div",{className:"block_kit_row--textContainer--168xh"},t.description&&i.createElement("div",{className:"block_kit_row--notificationDescription--lMjfr ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},el(t.description)),i.createElement("div",{className:"block_kit_row--fromNow--ryp9b"},a&&i.createElement(i.Fragment,null,i.createElement(j.H,{entityId:a.id.toString(),entityName:a.name,imgUrl:a.img_url||void 0}),(0,D.gN)(a.name,21),i.createElement("div",{className:"block_kit_row--planDivider--XnNq8"},"\xb7")),i.createElement(U.h1,{date:t.created_at,style:"short"}))),n&&i.createElement("div",{className:Z},i.createElement(H.B,{svg:ea.A,className:ee}))))),(()=>{if(!t.thumbnail)return null;let e=t.thumbnail;switch(e._block_type){case"AvatarBlock":return i.createElement(er,{block:e,size:Q.Pf.XLARGE});case"ImageThumbnailBlock":return i.createElement(ec,{block:e});case"FileThumbnailBlock":return i.createElement(eo,{block:e})}})())}function eh(e){let{block:t,shouldShowChevron:a,userLastViewedTimestamp:n}=e;return i.createElement("div",{className:"block_kit_row--contentContainerRevamp--voNSM text--fontPos11--2LvXf text--_fontBase--QdLsd"},i.createElement("div",{className:"block_kit_row--titleAndTimestamp--30RnS"},i.createElement("div",{className:"block_kit_row--title--gqwu-"},el(t.title)),i.createElement(ev,{createdAt:t.created_at,lastSeenTimestamp:n})),i.createElement("div",{className:K},i.createElement("div",{className:"block_kit_row--subtitle--jIRsg"},el(t.subtitle)),t.description&&i.createElement("div",{className:"block_kit_row--notificationDescriptionStructuredView--yUeTV ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},el(t.description)),a&&i.createElement("div",{className:"block_kit_row--quickReplyChevronContainer--yONp2"},i.createElement("div",{className:Z},i.createElement(H.B,{svg:ea.A,className:ee})))))}function eE(e){let{notification:t}=e;return(0,y.ro)()?i.createElement(ek,{notification:t,children:e.children}):i.createElement("div",{className:X},t.is_unread?i.createElement("div",{className:"block_kit_row--unreadDot--e-8EJ"}):null,i.createElement(es,{avatars:t.avatars}),e.children)}function ek(e){let{notification:t}=e,a=(0,w.t)("user_notifications.unread_notifcation_sr");return i.createElement("div",{className:X},t.is_unread?i.createElement("div",{className:"block_kit_row--unreadDotStructuredView--WluAp"}):null,i.createElement(ed,{avatars:t.avatars,icon:t.icon}),t.is_unread?i.createElement(M.E,null,a):null,e.children)}function ew(e){let{attachment:t,notification:a,dontShowPlanIcon:n}=e;return i.createElement(eE,{notification:a},i.createElement(ef,{block:t.body,plan:!0===n?void 0:a.plan,userLastViewedTimestamp:a.filters.user_last_viewed_timestamp}))}function eb(e){let{attachment:t,notification:a,dontShowPlanIcon:n}=e,{shouldShowChevron:l}=i.useContext(J.H);return i.createElement(eE,{notification:a},i.createElement(ef,{block:t.body,plan:!0===n?void 0:a.plan,shouldShowChevron:l(a),userLastViewedTimestamp:a.filters.user_last_viewed_timestamp}))}function eg(e){let{attachment:t,notification:a,actionBlockCallbacks:n}=e;return i.createElement(i.Fragment,null,i.createElement(eE,{notification:a},i.createElement(ef,{block:t.body,plan:a.plan,userLastViewedTimestamp:a.filters.user_last_viewed_timestamp})),i.createElement(e_,{block:t.actions,actionBlockCallbacks:n}))}function ev(e){let{createdAt:t,lastSeenTimestamp:a}=e,n=ey(t,a),l=(0,U.Ak)(t,"narrow");if("today"!==n&&"new"!==n){let e=new Date(t),a={};a=!function(e){let t=new Date;return t.setDate(t.getDate()-365),e>=t}(e)?{month:"short",day:"numeric",year:"numeric"}:{month:"short",day:"numeric"},l=new Intl.DateTimeFormat((0,$.Gq)().getPrimaryLocale(!1),a).format(e)}return i.createElement("div",{className:"block_kit_row--timestamp--FiNtf"},l)}function ey(e,t){let a=new Date(e),n=new Date,i=new Date(n);return(i.setDate(n.getDate()-1),t&&new Date(t)<a)?"new":eN(a,n)?"today":eN(a,i)?"yesterday":a>=new Date(n.getFullYear(),n.getMonth(),n.getDate()-7)?"last_week":"older"}function eN(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var eC=(e=>(e.NEW="new",e.TODAY="today",e.YESTERDAY="yesterday",e.LAST_WEEK="last_week",e.OLDER="older",e))(eC||{});let eA={new:(0,w.tx)("user_notifications.new"),today:(0,w.tx)("user_notifications.today"),yesterday:(0,w.tx)("user_notifications.yesterday"),last_week:(0,w.tx)("user_notifications.last_7_days"),older:(0,w.tx)("user_notifications.older")};function eT(e){return e.preferred_attachments.length>0&&"ActionableAttachment"===e.preferred_attachments[0]._block_type}var eI=(e=>(e.ACTIONABLE="actionable",e.ACTIONED="actioned",e))(eI||{});let eP={actionable:(0,w.tx)("user_notifications.pending"),actioned:(0,w.tx)("user_notifications.done")};var eR=a(579020),eD=a(143179);function eF(e){let t=e.preferred_attachments.find(e=>eD.p.BlockKit.Block.ATTACHMENT_TYPES.has(e._block_type));if(void 0===t)throw Error(`Unable to render attachment. Hiding notification ${e.notification_id}`);return t}function ex(e){let t;let a=(0,l.wA)(),[n,r]=(0,i.useState)(!1),o=(0,l.d4)(e=>e.selectedView.view),{onClick:c,onMouseEnter:s,onMouseMove:d,onRemove:u}=i.useContext(J.H),m=(0,y.ro)(),_=e.notification;i.useEffect(()=>()=>{u(_)},[u,_]);try{t=eF(e.notification)}catch(e){return console.error(`Unsupported Notification: ${e}`),null}let f=n=>{(0,eR.sx)("file_browser_notification_clicked",{notification_id:_.notification_id,notification_type:_.notification_type,actionable:"ActionableAttachment"===t._block_type,selectedView:o,plan_filter:e.currentPlanFilter,notification_filter:e.currentNotificationFilter}),p(n);let i=c(_);"ActionableAttachment"!==t._block_type&&E("resolve").then(({data:t})=>{if(i||e.followLinkOnClickCallback(),t.meta.updated_notification_blob){let a=t.meta.updated_notification_blob;e.updateNotificationCallback(a.notification_id,a)}},e=>{a(z.s.error((0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification")))})},p=e=>{e.stopPropagation()},h=()=>{r(!0),e.onHide&&e.onHide()},E=(e,t=o)=>F.sr.updateNotification({notification_id:_.notification_id,notification_action:e,currentView:t});return!n&&i.createElement("div",{tabIndex:0,className:m?"block_kit_row--rowContainerRevamp--Ak9PI":"block_kit_row--rowContainer--hsQo5",onClick:f,onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key&&f(e)},onMouseDown:p,onMouseEnter:t=>{s(t,_,()=>{E("resolve",o+"_quickreply").then(({data:t})=>{if(t.meta.updated_notification_blob){let a=t.meta.updated_notification_blob;e.updateNotificationCallback(a.notification_id,a)}})})},onMouseMove:e=>{d(e)},"data-testid":"notification-row"},((t,a)=>{try{switch(t._block_type){case"ActionableAttachment":{let n={updateNotification:e.updateNotificationCallback,hideNotification:h,followLinkIfPossible:e.followLinkOnClickCallback,buildNotificationActionRequest:E};return i.createElement(eg,{attachment:t,notification:a,actionBlockCallbacks:n})}case"ClientActionableAttachment":return i.createElement(eb,{attachment:t,notification:a});case"BodyAndThumbnailAttachment":case"BodyAttachment":return i.createElement(ew,{attachment:t,notification:a,dontShowPlanIcon:e.dontShowPlanIcon})}}catch(e){console.error(`Unable to render attachment: ${t}`),h()}})(t,_))||null}var eM=a(19679),eS=a(287011),eB=a(303035),eL=a(701780),eO=a(862142),eq=a(10347);let eU=class e{constructor(){this.circularBuffer=new eM.C(e.BUFFER_CAPACITY),this.lastTimestamp=0}clear(){this.circularBuffer.clear()}push(t,a){a-this.lastTimestamp>e.THROTTLE_DURATION_MS&&(this.circularBuffer.push(t),this.lastTimestamp=a)}getLocation50msAgo(){let e=this.circularBuffer.toArray();return e.length>0?e[0]:new eL.Mi(window.innerWidth,window.innerHeight)}};function eH(e){let[t,a]=(0,i.useState)(null),[n,l]=(0,i.useState)(0),r=(0,A.q5)(),o=i.useRef(eB.lQ),s=i.useRef(eB.lQ),d=i.useRef(null),u=i.useRef(null),m=(0,y.ro)(),_=(0,eq.zr)(r,t),f=i.useRef({notificationId:"",mouseLocationHistory:new eU,scheduledShowQuickReply:void 0,scheduledMarkAsRead:void 0});(0,i.useEffect)(()=>{u.current&&u.current.addEventListener("mouseover",e=>{clearTimeout(f.current?.scheduledShowQuickReply)})},[t]);let p=()=>{clearTimeout(f.current?.scheduledMarkAsRead),f.current.scheduledMarkAsRead=setTimeout(()=>{s.current=o.current},1e3)},h=i.useMemo(()=>{function e(e,t,n){let i=window.innerWidth>900&&window.innerHeight>650;f.current.notificationId=e.notification_id,i&&(0,eq.UC)(e)?(a((0,eq.AS)(e)),l(t),o.current=n):(a(null),o.current=eB.lQ),f.current.mouseLocationHistory.clear()}return{shouldShowChevron:()=>!1,onClick:e=>!1,onMouseEnter:(t,a,n)=>{let i=!1;if(a.notification_id!==f.current.notificationId&&u.current){let e=u.current.getBoundingClientRect(),a=new eL.Mi(e.left,e.top),n=new eL.Mi(e.left,e.bottom),l=[f.current.mouseLocationHistory.getLocation50msAgo(),a,n];i=(0,eS.y)(new eL.Mi(t.clientX,t.clientY),l)}let l=t.target;if(i){var r;r=()=>{e(a,l.getBoundingClientRect().bottom,n)},clearTimeout(f.current?.scheduledShowQuickReply),f.current&&(f.current.scheduledShowQuickReply=setTimeout(r,500))}else clearTimeout(f.current?.scheduledShowQuickReply),e(a,l.getBoundingClientRect().bottom,n)},onMouseMove:e=>{f.current.mouseLocationHistory.push(new eL.Mi(e.clientX,e.clientY),e.timeStamp)},onRemove:e=>{e.notification_id===f.current.notificationId&&a(null)}}},[u]);if(!((0,c.k)().desktop_quickreply_filebrowser&&m))return i.createElement(i.Fragment,null,e.children);let E=Math.max(0,n-(d.current?.getBoundingClientRect().y??0)-(u.current?.getBoundingClientRect().height??640));return i.createElement(i.Fragment,null,i.createElement("div",{className:"quick_reply_switcher--hoverContainer--eL8mU",ref:d},t&&!_&&i.createElement("div",{className:"quick_reply_switcher--quickReplyContainer--7Qpx8",style:{top:E,maxHeight:640,minHeight:450},onMouseEnter:()=>{p()},onMouseLeave:()=>{clearTimeout(f.current?.scheduledMarkAsRead),s.current(),s.current=eB.lQ,o.current=eB.lQ}},i.createElement(eO.d,{quickReplyInfo:t,onClose:()=>a(null),fileBrowser:!0,ref:u}))),i.createElement(J.H.Provider,{value:h},e.children))}eU.BUFFER_CAPACITY=10,eU.DESIRED_DURATION_MS=50,eU.THROTTLE_DURATION_MS=eU.DESIRED_DURATION_MS/eU.BUFFER_CAPACITY;let ez="user_notifications_dropdown--filterToggleButton--ekpSd",e$="user_notifications_dropdown--filterToggleButtonSelected--qrMA-",eQ="user_notifications_dropdown--dateHeader---l8oH",eV="user_notifications_dropdown--markAllReadButton--TwhKK text--fontPos11--2LvXf text--_fontBase--QdLsd";function eY(e,t){let a=(0,l.wA)(),n=(0,l.d4)(e=>e.user.id),o=(0,l.d4)(e=>e.user.community_profile_id),c=(0,l.d4)(e=>e.authedUsers.byId[n]?.plans),s=i.useMemo(()=>void 0!==c&&(new Map(c.map(e=>[e.plan_id,e.is_org])).get(t)||!1),[c,t]),d=(0,l.d4)(e=>e.userNotifications.communityProfileBellStates),m=(0,l.d4)(e=>e.selectedView.view),[_,p]=(0,i.useState)(new Map),[E,k]=(0,i.useState)(!0),[v,N]=(0,i.useState)(!1),C=(0,y.Ow)(),A=(0,f.F)(d);i.useEffect(()=>{let i=(0,r.s)(()=>{e?o&&(A.current[o]&&a((0,D.X2)({isBellStateHigh:!1,userInitiated:!0,profileId:o})),F.sr.getCommunityServerDriven({currentView:m}).then(({data:e})=>{T(e.meta)}).catch(e=>{a(b.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_while_fetching_your_community_notifications"),type:"user-notification",error:!0})),a(g.oB())})):((0,D.Zo)(!1,D.td,n),F.sr.getServerDrivenPlan({currentPlanId:t,currentView:m,isPlanOrg:s}).then(({data:e})=>{T(e.meta)}).catch(e=>{a(b.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_while_fetching_your_notifications"),type:"user-notification",error:!0})),a(g.oB())}))},800,!0);k(!0),i()},[t,A,m,a,e,s,o,n]);let T=e=>{let t=new Map,a=!1;e.forEach(e=>{t.set(e.notification_id,e),!a&&e.filters.is_priority&&(a=!0)}),N(a),p(t),k(!1)},I=i.useMemo(()=>{if(C){let e=(0,D.Dd)();return E||v||"priority"!==e||((0,D.hI)("all"),e="all"),e}return"all"},[v,C,E]);return{notificationFeedMap:_,isFetchingNotifications:E,initFilter:I,markAllAsReadFn:()=>{(e?h.Ay.post("/api/user_notifications/community/mark_read",{currentView:m,source:u.S8?"desktopbell":"web"}):h.Ay.post("/api/user_notifications/mark_read/plan",{current_plan_id:t,currentView:m,is_plan_org:s,source:u.S8?"desktopbell":"web"})).then(()=>{p(new Map(Array.from(_,([e,t])=>(t.is_unread=!1,[e,t]))))}).catch(()=>{a(b.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_marking_all_as_read"),type:"user-notification",error:!0}))})},updateNotification:(e,t)=>{p(new Map(_.set(e,t)))}}}function ej(e,t){return e.filter(e=>!t.includes(e.notification_id))}function eJ(e){let t;let[a,l]=(0,i.useState)(D.td),{notificationFeedMap:r,isFetchingNotifications:o,markAllAsReadFn:c,updateNotification:s,initFilter:u}=eY(!!e.inCommunity,a),[m,_]=(0,i.useState)([]),[f,h]=(0,i.useState)(u),E=(0,p.ZC)(f),k=(0,y.ro)(),w=a===D.td?x.a:a,b=ej([...r.values()],m);i.useEffect(()=>{h(u)},[u]),i.useEffect(()=>{let e=(0,D.Dd)();f!==E&&f===e&&(0,N.qD)({name:"user_notifications_filter_viewed",filter_type:f,dropdown_location:"web"})},[E,f]);let g=e=>{e.stopPropagation()},v=e=>{e===x.a&&(e=D.td),(0,N.FE)(e,"notifications",void 0),l(e)};switch(f){case"unread":t=b.filter(e=>e.is_unread);break;case"priority":t=b.filter(e=>e.filters.is_priority);break;default:t=b}return i.createElement("div",{className:d()(0!==r.size||o?"user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd":"user_notifications_dropdown--dropdownContainerEmptyState--7D3ct user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd",e.containerClassName,{"user_notifications_dropdown--arrowRight--g36M8":e.arrowRight}),onMouseDown:g,onClick:g},i.createElement(eH,null,i.createElement(n.Header,{selectedPlan:a,onPlanFilterUpdate:e=>v(e),inCommunity:!!e.inCommunity,showMarkAllAsRead:eX(o,b)&&!k,markAllAsReadFn:c,inDesktopTray:!1}),!!k&&i.createElement(n.FilterToggle,{notificationFilter:f,toggleNotificationFilter:e=>{(0,N.Cu)({filter_type:e},"user_notifications_filter_clicked"),(0,D.hI)(e),h(e)},isFetchingNotifications:o,notifications:b,markAllAsReadFn:c}),i.createElement(n.Feed,{notifications:t,currentPlanFilter:w,currentNotificationFilter:f,hiddenNotificationIds:m,setHiddenNotificationIds:_,isFetchingNotifications:o,inCommunity:e.inCommunity,fillParent:!1,updateNotificationCallback:s})))}function eX(e,t){return!e&&t.some(e=>e.is_unread)}(e=>{function t(e){return(0,y.ro)()?i.createElement("h3",{className:eQ},eA[e.notificationDateGroup]):null}function a(e){return(0,y.Ow)()?i.createElement("div",{className:eQ},eP[e.notificationPriorityGroup]):null}e.Feed=function(e){let n=(0,P.Pc)(),r=(0,l.d4)(e=>n?e.authedUsers.byId[n.id]?.plans:null),o=(0,l.Pj)(),c=(0,l.wA)(),s=(0,I.FC)(),d=(0,A.q5)(),f=(0,T.sZ)(),p=t=>{e.setHiddenNotificationIds([...e.hiddenNotificationIds,t])},h=!1;if(n&&!e.inCommunity&&r?.length===1&&(h=!0,e.currentPlanFilter===x.a)){let t=r[0].plan_id;for(let a of e.notifications)if(a.plan?.id.toString()!==t){h=!1;break}}let b=i.useCallback(t=>()=>{var a,n;if(!t.deeplink)return;let i=new URL(t.deeplink.href),l=i.pathname;if(l.includes("project"))a=l.split("project/")[1],(0,N.xr)("file_browser_folder_click",a,null,s,{selectedView:"notifications",planFilterId:e.currentPlanFilter===x.a?null:e.currentPlanFilter});else if(l.includes("team"))n=l.split("team/")[1],(0,N._J)("file_browser_team_click",n,s,{selectedView:"notifications",planFilterId:e.currentPlanFilter===x.a?null:e.currentPlanFilter});else if((0,m.ek)(l)){let t=(0,m.zv)(l);t&&c(v.UN({fileKey:t,entrypoint:"notifications",currentPlanFilter:{planId:e.currentPlanFilter===x.a?void 0:e.currentPlanFilter||void 0}}))}c(g.oB());let r=!!d&&d.key===(0,m.zv)(i.pathname);if(!u.eD&&r)c((0,C.H)({params:i.searchParams.toString(),hash:i.hash}));else if(t.deeplink.use_unsafe)_.Ay.unsafeRedirect(i.href,u.eD?void 0:"_blank");else if(e.inDesktopTray)_.Ay.redirect(i.href);else try{let e=(0,R.vU)(o.getState(),l);if("teamFeed"===e.view){f&&t.plan?.id.toString()===f.id?c(g.$T(e)):_.Ay.redirect(i.href,u.eD?void 0:"_blank");return}_.Ay.redirect(i.href,u.eD?void 0:"_blank");return}catch{_.Ay.redirect(i.href,u.eD?void 0:"_blank")}},[c,d,e.currentPlanFilter,e.inDesktopTray,s,o,f]);if(e.isFetchingNotifications)return i.createElement("div",{className:"user_notifications_dropdown--loadingContainer--jY9PZ"},i.createElement(E.kt,null));if(0===e.notifications.length)return i.createElement("div",{className:"user_notifications_dropdown--emptyRow--4UwYl"},(0,w.tx)("user_notifications.dropdown.no_notifications"));{var y;let n,l;"priority"===e.currentNotificationFilter&&e.notifications.sort((e,t)=>Number(eT(t))-Number(eT(e)));let r=e.inCommunity?"user_notifications_dropdown--scrollContainer--phbbl":"user_notifications_dropdown--scrollContainerWithPlan---Z4H1",o=ey((y=e.notifications)[0].preferred_attachments[0].body.created_at,y[0].filters.user_last_viewed_timestamp)===ey(y[y.length-1].preferred_attachments[0].body.created_at,y[0].filters.user_last_viewed_timestamp),c=e=>{let a;let l=null;if(!o)try{a=eF(e);let r=ey(a.body.created_at,e.filters.user_last_viewed_timestamp);r!==n&&(n=r,l=i.createElement(t,{key:`date-${e.notification_id}`,notificationDateGroup:r}))}catch(e){console.error("Skipping date header, unsupported notification")}return l},s=e=>{let t=null,n=eT(e)?"actionable":"actioned";return n!==l&&(l=n,t=i.createElement(a,{key:`priority-${e.notification_id}`,notificationPriorityGroup:n})),t};return i.createElement(k.P,{className:`${e.fillParent?"":r}`},i.createElement("div",null,e.notifications.map(t=>{let a=null;return a="priority"===e.currentNotificationFilter?s(t):c(t),i.createElement(i.Fragment,{key:`row-container-${t.notification_id}`},a,i.createElement(ex,{key:`row-${t.notification_id}`,notification:t,updateNotificationCallback:e.updateNotificationCallback,dontShowPlanIcon:h,currentPlanFilter:e.currentPlanFilter,currentNotificationFilter:e.currentNotificationFilter,inDesktopTray:e.inDesktopTray,onHide:()=>p(t.notification_id),followLinkOnClickCallback:b(t)}))})))}},e.UnreadBar=function(e){return eX(e.isFetchingNotifications,e.notifications)?i.createElement("div",{className:"user_notifications_dropdown--unreadToggleBar---1U5q"},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return i.createElement("div",{className:"user_notifications_dropdown--unread--e14XU"},(0,w.t)("user_notifications.unread_count",{unreadCount:t}))}(e.notifications),eX(e.isFetchingNotifications,e.notifications)&&i.createElement(o.E,{onClick:e.markAllAsReadFn,className:eV},(0,w.tx)("user_notifications.dropdown.mark_all_as_read"))):null},e.DateHeader=t,e.PriorityHeader=a,e.Header=function(e){let t=(0,A.q5)(),a=!e.inDesktopTray&&(!!t||!!(0,c.k)().notif_settings_button);return i.createElement("div",{className:"user_notifications_dropdown--header--aOhWS"},e.inCommunity?i.createElement("div",{className:"user_notifications_dropdown--orgName--vbTxV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,w.t)("user_notification.community_notifications")):i.createElement(i.Fragment,null,i.createElement(x.j,{currentPlanFilter:e.selectedPlan===D.td?x.a:e.selectedPlan,onPlanFilterUpdate:e.onPlanFilterUpdate,displaySettings:a})),e.children,e.showMarkAllAsRead&&i.createElement(o.E,{onClick:e.markAllAsReadFn,className:eV},(0,w.tx)("user_notifications.dropdown.mark_all_as_read")))},e.FilterToggle=function(e){let t=(0,y.Ow)(),a=e.notifications.some(e=>e.filters.is_priority);return e.isFetchingNotifications?null:i.createElement("div",{className:"user_notifications_dropdown--filterToggleBar--VhBmn user_notifications_dropdown--unreadToggleBar---1U5q"},i.createElement("div",{className:"user_notifications_dropdown--filterToggleButtons--Erg5A"},i.createElement(o.E,{className:d()({[ez]:!0,[e$]:"all"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("all")}},(0,w.t)("user_notification.all")),!!t&&a&&i.createElement(o.E,{className:d()({[ez]:!0,[e$]:"priority"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("priority")}},function(e){let t=e.reduce((e,t)=>e+Number(eT(t)),0);return 0===t?(0,w.t)("user_notifications.requests_empty"):(0,w.t)("user_notifications.requests_toggle_count",{actionableCount:t})}(e.notifications)),i.createElement(o.E,{className:d()({[ez]:!0,[e$]:"unread"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("unread")}},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return 0===t?(0,w.t)("user_notifications.unread_empty"):(0,w.t)("user_notifications.unread_toggle_count",{unreadCount:t})}(e.notifications))),eX(e.isFetchingNotifications,e.notifications)&&i.createElement(o.E,{onClick:e.markAllAsReadFn,className:eV},(0,w.tx)("user_notifications.dropdown.mark_all_as_read")))}})(n||(n={}))},608286:(e,t,a)=>{a.d(t,{a:()=>I,j:()=>P});var n=a(848318),i=a(716544),l=a(764932),r=a(708788),o=a(376025),c=a(897378),s=a(435254),d=a(493080),u=a(157907),m=a(166365),_=a(442313),f=a(790355),p=a(449737),h=a(481540),E=a(369600),k=a(661780),w=a(111693),b=a(902058),g=a(430330),v=a(503024),y=a(899544);let N="notifs_plan_filter--boldTitle--ZUcpT",C="notifs_plan_filter--autoTruncate--gl9us ellipsis--ellipsis--Tjyfa";var A=a(364616),T=a(824007);let I="ALL_PLANS_FILTER";function P(e){let{currentPlanFilter:t,onPlanFilterUpdate:a}=e,P=(0,i.wA)(),R=(0,E.q5)(),D=(0,n.useRef)(null),F=!!(0,u.k)().limited_plan_spaces,{getTriggerProps:x,manager:M}=l.b(),S=(0,k.iZ)(),B=(0,i.d4)(e=>F?e.plans:S?e.authedUsers.byId[S.id]?.plans:null),L=(0,i.d4)(w.P),O=(0,i.d4)(e=>e.orgById);if(!S||!B||B.length<=1)return n.createElement("span",{className:N},(0,_.t)("user_notification.all_notifications"));let q=B.map(e=>e.plan_id);q.unshift(I);let U=(e,t)=>e===I?(0,_.t)("user_notification.all_notifications"):t[e],H=B.reduce((e,t)=>{if(F&&"plan_type"in t){let a="";if(t.plan_type===g.O.ORG){let e=O[t.plan_id];a=e?.name??a}else{let e=L[t.plan_id];a=e?.name??a}e[t.plan_id]=a}else"name"in t&&(e[t.plan_id]=t.name);return e},{}),z=(e,t)=>{e.stopPropagation(),a(t)},$=q.map(e=>n.createElement(l.q7,{key:e,onClick:t=>{z(t,e)}},e===t&&n.createElement("span",{className:"notifs_plan_filter--fillMenu--Ar-HO"},n.createElement(m.B,{svg:T.A})),n.createElement("span",{className:`${e===t?"notifs_plan_filter--planNameChecked--dbvr9":"notifs_plan_filter--planNameUnchecked--J40CF"} ${C}`},U(e,H))));return n.createElement("div",{className:"notifs_plan_filter--planFilterContainer--E2TSh",ref:D},n.createElement(r.nK,null,n.createElement(l.bL,{manager:M},n.createElement(o.E,{"aria-label":(0,_.t)("user_notifications.notif_filter_label",{planName:U(t,H)}),className:"notifs_plan_filter--dropdownButton--hQgHc",...x()},n.createElement("span",{className:[N,C].join(" ")},(0,b.gN)(U(t,H),35)),n.createElement(m.B,{svg:A.A,className:"notifs_plan_filter--chevronIcon--0Rqnp"})),n.createElement(d.J,null,n.createElement(l.mc,null,$)))),e.displaySettings&&n.createElement(c.K,{"aria-label":(0,_.t)("user_notifications.settings"),htmlAttributes:{"data-dropdown-tooltip":(0,_.t)("user_notifications.settings"),"data-tooltip-type":v.Ib.TEXT,"data-tooltip-show-above":!0},onClick:()=>{P(f.oB()),(0,h.Cu)({userId:S?.id,fileKey:R?.key,eventName:"Notification Settings Button Clicked"}),P(p.to({type:y.s,data:{tab:y.c.NOTIFICATIONS}}))}},n.createElement(s.I,null)))}},3198:(e,t,a)=>{a.d(t,{dV:()=>$});var n=a(848318),i=a(716544),l=a(777611),r=a(731755),o=a(776402),c=a(208720),s=a(741419),d=a(23459),u=a(536384),m=a.n(u),_=a(980399),f=a(543072),p=a(507152),h=a(282424),E=a(166365),k=a(882439),w=a(442313),b=a(775038),g=a(449737),v=a(155651),y=a(235441),N=a(744149),C=a(51910),A=a(661780),T=a(922030),I=a(390119),P=a(241917),R=a(503024),D=a(229424),F=a(464012),x=a(614214),M=a(295915),S=a(8601),B=a(382179),L=a(189996),O=a(410693);let q="edit_color_palette_modal--modalLabel--AVogh text--fontPos11--2LvXf text--_fontBase--QdLsd",U="edit_color_palette_modal--colorCircleOuter--ZJqke";var H=a(209810);function z({onSave:e,onCancel:t,palette:a,enableSubmitWithNoChanges:o,manager:u,isPaletteEyedropperActive:v}){let C=(0,i.wA)(),[D,F]=n.useState(a?.name||""),[z,Q]=(0,d.fp)(O.Jq),V=n.useMemo(()=>a?.baseColors||(0,M.Vk)(),[a?.baseColors]),[Y,j]=(0,d.fp)(O.rN),J=(0,d.Xr)(x.B),X="whiteboard"===(0,y.lg)(),K="dark"!==(0,N.DP)()||X?"light":"dark",W=!(0,f.$K)(V,Y)||o,[G,Z]=n.useState(!1);n.useEffect(()=>(Q(-1),j(V),J(s.cxo.EDIT_PALETTE_MODAL),()=>{Q(-1),j(V),J(s.cxo.SELECTION)}),[Q,j,J,V]);let ee=(0,i.d4)(e=>{let t=e.selectedView;return"fullscreen"!==t.view||t.editorType!==P.nT.Whiteboard}),et=n.useCallback(e=>{j([...Y,e])},[Y,j]),ea=n.useCallback((e,t)=>{j([...Y.slice(0,e),t,...Y.slice(e+1)])},[Y,j]),en=e=>{j([...Y.slice(0,e),...Y.slice(e+1)])},ei=()=>{Q(-1)},el=n.useCallback(e=>{C(g.$O({type:$.type,data:{palette:{uuid:e,name:D,baseColors:Y},enableSubmitWithNoChanges:!0}}))},[C,D,Y]),er=(0,T.cD)(),eo=(0,A.TA)(),ec=(0,L.Bw)(),es=n.useCallback(()=>{let t=Y.some((e,t)=>Y.some((a,n)=>t!==n&&(0,f.DA)(e,a)));if(Z(t),t)return;let n=Y.map(e=>(0,_.colorToHex)(e,1));if(D&&eo&&n.length){let t=a?.uuid||(0,p.g)();a?(0,O.NK)({name:D,teamId:er,baseColors:n,uuid:t},C,()=>el(t)):((0,O.cl)({name:D,teamId:er,uuid:t,baseColors:n,creatorId:eo,isTeamDefault:!1,canRead:!0},C,()=>el(t)),ec(t,n.length,!0)),e()}},[Y,D,eo,a,e,er,C,el,ec]),ed=n.useMemo(()=>Array(Y.length).fill(null).map(e=>n.createRef()),[Y.length]),eu=n.createRef();ed.push(eu);let em=function(e){let t=(0,f.tK)(f.ol.MULTIPLAYER_PURPLE)||f.Uv;if(!e)return t;let a=(0,c.oB)(e),n=360*a.h,i={...a,h:(n+40)%360/360};return(0,c.In)(i)}(Y.length>0?Y[Y.length-1]:null),e_=Y.length>=I.I_,ef=D&&D.trim()&&Y.length>0&&(!a||W||D!==a.name),ep=a?(0,w.t)("whiteboard.color_palettes.modal.edit_palette"):(0,w.t)("whiteboard.color_palettes.modal.create_palette");return n.createElement(l.bL,{width:"fit-content",height:"dynamic",manager:u},n.createElement(r.vo,{allowOverflow:!0},n.createElement(r.Y9,null,n.createElement(r.hE,null,ep)),n.createElement(r.nB,null,n.createElement("p",{className:q},(0,w.tx)("whiteboard.color_palettes.modal.name")),n.createElement("div",{className:"edit_color_palette_modal--nameInput--iRWoM text--fontPos11--2LvXf text--_fontBase--QdLsd"},n.createElement(h.L,{placeholder:(0,w.t)("whiteboard.color_palettes.modal.palette_name"),value:D||"",onChange:e=>{F(e.target.value)},maxLength:100,height:16,dataTestId:"palette-name-input"})),n.createElement("div",{className:"edit_color_palette_modal--colorsContainer--VNvss"},n.createElement("p",{className:q},(0,w.tx)("whiteboard.color_palettes.modal.colors")),n.createElement("p",{className:"edit_color_palette_modal--modalDescription--SeVmv text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,w.tx)("whiteboard.color_palettes.modal.choose_up_to_9_colors")),G&&n.createElement("p",{className:"edit_color_palette_modal--modalDescriptionError--W6hs7 text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,w.tx)("whiteboard.color_palettes.modal.duplicate_colors")),n.createElement("div",{className:"edit_color_palette_modal--colorPaletteContainer--aQ-En"},Y.map((e,t)=>n.createElement("div",{className:U,ref:ed[t],key:"wrapper"+e+"-"+t},n.createElement("button",{className:m()({"edit_color_palette_modal--deleteColorButton--rWqOY":!0,"edit_color_palette_modal--deleteColorButtonDisabled--dwsFr":z===t}),onClick:()=>en(t),"data-testid":`delete-color-button-${t}`},n.createElement(E.B,{svg:H.A,height:"16px",width:"16px",autosize:!0})),n.createElement(B.v,{target:n.createElement(S.cd,{key:e+"-"+t,size:"large",value:e,selectionState:z===t?"selected":"unselected",onClick:()=>{Q(t)},paletteType:"base",background:"light"}),color:e,onColorChange:e=>ea(z,e),theme:K,isOpen:!v&&z===t,onClose:()=>ei(),dropperDisabled:ee}))),!e_&&n.createElement("div",{className:U,ref:eu,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,w.t)("whiteboard.color_palettes.modal.add_color")},n.createElement(S.HL,{size:"large",value:S.WW,swatchStyle:{boxShadow:"0px 0px 0px 1px rgba(0, 0, 0, 0.2) inset"},onClick:()=>{Q(Y.length),et(em)},dataTestId:"add-color-button",fallbackSvg:S.xY}))))),n.createElement(r.wi,null,n.createElement(r.jk,null,n.createElement(b.E,{color:"secondary"},(0,w.tx)("whiteboard.color_palettes.modal.palettes_visible_to_everyone")),n.createElement(k.$z,{variant:"secondary",onClick:t},(0,w.tx)("whiteboard.color_palettes.modal.cancel")),n.createElement(k.$z,{variant:"primary",disabled:!ef,type:"submit",onClick:es,htmlAttributes:{"data-testid":"save-button"}},(0,w.tx)("whiteboard.color_palettes.modal.save_palette"))))))}let $=(0,F.Ju)(function({palette:e,enableSubmitWithNoChanges:t,...a}){let l=(0,i.wA)(),r=(0,A.TA)(),c=(0,T.cD)(),u=o.hS(a),_=(0,C.dH)(),f=(0,d.md)(x.B),p=_===s.NLJ.DROPPER_COLOR&&f===s.cxo.EDIT_PALETTE_MODAL,h=n.useCallback(()=>{l(g.Lo())},[l]);return n.createElement("div",{className:m()("edit_color_palette_modal--headerModalTransitionContainer--C-CFV",{"edit_color_palette_modal--hidden--EDk-H":p})},n.createElement(v.fu,{name:D.e0.FIGJAM_EDIT_PALETTE_MODAL,properties:{userId:r,teamId:c,type:e?"edit palette":"new palette"}},n.createElement(z,{onSave:h,onCancel:h,palette:e,enableSubmitWithNoChanges:t,manager:u,isPaletteEyedropperActive:p})))},"EditColorPaletteModal")},149204:(e,t,a)=>{a.d(t,{j:()=>L});var n=a(848318),i=a(716544),l=a(776402),r=a(777611),o=a(731755),c=a(468189),s=a(726521),d=a(897378),u=a(493324),m=a(278599),_=a(653959),f=a(882439),p=a(442313),h=a(895104),E=a(449737),k=a(155651),w=a(129102),b=a(661780),g=a(635547),v=a(922030),y=a(390119),N=a(503024),C=a(229424),A=a(464012),T=a(117592),I=a(410693),P=a(639088);let R=(0,A.Ju)(function({paletteUuid:e}){let t=(0,i.wA)();return n.createElement(T.Rw,{size:300,confirmText:(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_button"),confirmationTitle:(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_title"),popStack:!0,destructive:!0,onConfirm:()=>{(0,I.RN)(e,t)}},n.createElement("div",{className:P.jE},(0,p.tx)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_content")))},"DeleteColorPaletteConfirmationModal");var D=a(295915),F=a(8601),x=a(189996),M=a(3198);let S=(0,A.Ju)(function({paletteName:e,paletteUuid:t}){let a=(0,i.wA)(),l=(0,v.cD)(),r=(0,i.d4)(e=>e.teams[l]?.name);return r||console.error("No team name found for team id",l),n.createElement(T.Rw,{size:360,confirmationTitle:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.title"),confirmText:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.confirm_button"),content:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.description",{teamName:r,paletteName:e||(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.this_palette")}),onConfirm:()=>{t===y.fJ?(0,I.In)(l,a):(0,I.dq)(l,t,a)},popStack:!0})},"MakePaletteTeamDefaultConfirmationModal");function B({palette:e,showMakeDefaultButton:t}){let a=(0,i.wA)(),l=e.uuid===y.fJ,r=e.name||(0,p.t)("whiteboard.color_palettes.unnamed_palette");return n.createElement(h.Y,{width:"fill-parent",direction:"vertical",spacing:"4px"},n.createElement(h.Y,{direction:"horizontal",spacing:"8px"},n.createElement("div",null,r),e.isTeamDefault&&n.createElement(s.E,{variant:"brandOutline"},(0,p.t)("whiteboard.color_palettes.manage_modal.default"))),n.createElement(h.Y,{direction:"horizontal",width:"fill-parent",horizontalAlignItems:"space-between"},n.createElement(h.Y,{direction:"horizontal",width:"hug-contents",spacing:"0px"},e.baseColors.map(e=>n.createElement(F.cd,{key:e,value:w.z5.parse(e),paletteType:"base",background:"light"}))),n.createElement(h.Y,{direction:"horizontal",width:"hug-contents",spacing:"8px"},!l&&n.createElement(n.Fragment,null,n.createElement(d.K,{onClick:()=>{a(E.$O({type:M.dV.type,data:{palette:{uuid:e.uuid,name:e.name,baseColors:(0,x.$v)(e?.baseColors),isTeamDefault:e.isTeamDefault}}}))},"aria-label":(0,p.t)("whiteboard.color_palettes.modal.edit_palette_tooltip"),htmlAttributes:{"data-testid":"edit-color-palette-button-"+e.uuid,"data-tooltip-type":N.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.color_palettes.modal.edit_palette_tooltip")}},n.createElement(u.L,null)),n.createElement(d.K,{onClick:()=>{a(E.$O({type:R.type,data:{paletteUuid:e.uuid}}))},"aria-label":(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_tooltip"),htmlAttributes:{"data-testid":"delete-color-palette-button-"+e.uuid,"data-tooltip-type":N.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_tooltip")}},n.createElement(m.i,null))),t&&n.createElement(f.$z,{variant:"secondary",disabled:e.isTeamDefault,onClick:()=>{a(E.$O({type:S.type,data:{paletteUuid:e.uuid,paletteName:e.name}}))},htmlAttributes:{"data-testid":"make-palette-team-default-button-"+e.uuid}},(0,p.tx)("whiteboard.color_palettes.modal.set_default")))))}let L=(0,A.Ju)(function({showMakeDefaultButton:e,entryPoint:t,...a}){let s=(0,b.TA)(),d=(0,v.cD)(),u=l.hS(a),m=(0,i.wA)(),[h]=(0,_.IT)((0,g.iP2)({teamId:d}),{enabled:!!d});return n.createElement(k.fu,{name:C.e0.FIGJAM_MANAGE_PALETTES_MODAL,properties:{entryPoint:t,userId:s,teamId:d}},n.createElement(r.bL,{width:"fit-content",height:"dynamic",manager:u},n.createElement(o.vo,null,n.createElement(o.Y9,null,n.createElement(o.hE,null,(0,p.t)("whiteboard.color_palettes.manage_modal.color_palettes"))),n.createElement(o.nB,{padding:16},n.createElement("div",{className:"manage_color_palettes_modal--subheader--2Aol7"},n.createElement("div",{className:"manage_color_palettes_modal--manageText---c1Ro"},(0,p.tx)("whiteboard.color_palettes.manage_modal.manage_your_teams_color_palettes")),n.createElement(f.$z,{variant:"primary",onClick:()=>{m(E.$O({type:M.dV.type}))},htmlAttributes:{"data-testid":"create-color-palette-button"}},(0,p.tx)("whiteboard.color_palettes.manage_modal.create_new_palette"))),n.createElement("div",{className:"manage_color_palettes_modal--paletteRowsOuter--d2OIk"},"loaded"===h.status&&h.data.colorPalettesForTeam?n.createElement(n.Fragment,null,n.createElement(B,{key:y.fJ,palette:{uuid:y.fJ,name:(0,p.t)("whiteboard.color_palettes.figjam_colors"),baseColors:(0,D.TS)("base").map(e=>w.z5.format(e)),isTeamDefault:h.data.colorPalettesForTeam.every(e=>!e.isTeamDefault)},showMakeDefaultButton:e}),h.data.colorPalettesForTeam.map(t=>n.createElement(B,{key:t.uuid,palette:t,showMakeDefaultButton:e}))):n.createElement(c.k,{size:"lg",htmlAttributes:{"data-testid":"loading-spinner"}}))))))},"ManageColorPalettesModal")},506092:(e,t,a)=>{a.d(t,{V:()=>i});var n=a(749214);let i=(0,a(848318).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 6A1.5 1.5 0 0 0 6 7.5v1a.5.5 0 0 0 1 0v-1a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 0-1 0v1A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6zm4.146 3.146a.5.5 0 0 1 .708 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708l1.647-1.646H9.5a.5.5 0 0 1 0-1h3.793l-1.647-1.646a.5.5 0 0 1 0-.708",clipRule:"evenodd"})})})},493324:(e,t,a)=>{a.d(t,{L:()=>i});var n=a(749214);let i=(0,a(848318).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M4.008 5.124a1 1 0 0 1 1.116-1.116l3.66.457-.124.992-2.636-.329L5 5l.128 1.024.33 2.636a1 1 0 0 0 .285.583l7.403 7.403 3.5-3.5-7.403-7.403a1 1 0 0 0-.583-.286l.124-.992a2 2 0 0 1 1.166.57l9.55 9.55a2 2 0 0 1 0 2.83L17.414 19.5a2 2 0 0 1-2.828 0l-9.55-9.55a2 2 0 0 1-.57-1.166zm13.346 8.73-3.5 3.5 1.439 1.439a1 1 0 0 0 1.414 0l2.086-2.086a1 1 0 0 0 0-1.414z",clipRule:"evenodd"})})})}}]);

//# debugId=1e3fdc34-8667-57a7-9c6c-6451c103229f

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/6e14f73027b6ad694cec55e2d8f7239cb1d5b4f5/4279-8560381b0ee84e85.min.js.map