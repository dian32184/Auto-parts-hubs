"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2861c107-350b-544c-ba48-68b56796032c")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[1591],{733790:(e,t,n)=>{n.d(t,{AX:()=>T,D6:()=>L,Dw:()=>I,Fn:()=>d,G$:()=>i,Gu:()=>A,HR:()=>y,JA:()=>u,Jo:()=>x,N6:()=>U,NB:()=>$,Nf:()=>j,PP:()=>s,QF:()=>R,Rt:()=>a,S:()=>q,Sq:()=>c,T:()=>D,V3:()=>f,VM:()=>G,VQ:()=>M,Vz:()=>z,Wv:()=>o,Xt:()=>v,Z9:()=>m,_E:()=>H,_M:()=>S,_P:()=>_,bB:()=>g,c1:()=>O,du:()=>C,dz:()=>X,eO:()=>Y,ei:()=>p,fp:()=>F,fz:()=>P,gV:()=>J,hY:()=>k,hs:()=>W,i$:()=>Z,kQ:()=>K,of:()=>B,qp:()=>w,r9:()=>b,rB:()=>V,rX:()=>N,sb:()=>h,tI:()=>l,v9:()=>r,wH:()=>E});let a="canvas_search--searchInput--aCP6B canvas_search--input--aPqLZ",l="canvas_search--searchInputSingleLine--DUHFr",i="canvas_search--searchSidebarContainer--1tcxd",r="canvas_search--icon32--bmz-L",s="canvas_search--searchBarContainer--rxvLi",o="canvas_search--searchBarRow--9aFwa",d="canvas_search--leftRailSearchBarRow--hC5z6",c="canvas_search--leftRailReplaceRow--hjGAr",u="canvas_search--searchBarRowMinimal--dEN6B canvas_search--searchBarRow--9aFwa",m="canvas_search--searchIconAndInput--3tdWb",p="canvas_search--searchIconPlaceholderFill--MohCt",h="canvas_search--resultsContainer--b0olz",g="canvas_search--resultsList--Hciv7",f="canvas_search--layerIcon--RpNZF",E="canvas_search--selected--Ng41y",b="canvas_search--disabled--dMwG7",v="canvas_search--indirectlySelected--2E-TI",y="canvas_search--symbol--614fP",_="canvas_search--layerIconContainer--IuQxq",x="canvas_search--resultInfoHeader--GM1gm",S="canvas_search--resultInfo--PKQiZ",w="canvas_search--resultsText--ubMAu",C="canvas_search--resultsFooterText--rPxEh",k="canvas_search--dotDivider--zvIFp",T="canvas_search--resultRow--xX8wI",I="canvas_search--isHoverSelecting--LlQSE",N="canvas_search--singletonHoverSelected--pCLSM",A="canvas_search--resultSubheading--XCt-Z",R="canvas_search--offlineIconContainer--qVbhY",M="canvas_search--offlineIcon--F0sbc",D="canvas_search--hoverSelectedTop--mA-fk canvas_search--_hoverSelectedBase--JOTSs",P="canvas_search--hoverSelectedMiddle--OBw7k canvas_search--_hoverSelectedBase--JOTSs",j="canvas_search--hoverSelectedBottom--zH7Va canvas_search--_hoverSelectedBase--JOTSs",L="canvas_search--resultText--RXqeC",O="canvas_search--multiline--1gb-l",B="canvas_search--strikethrough--0xsma",F="canvas_search--otherResults--G94fM",z="canvas_search--searchScopeButton--Grrvz",$="canvas_search--pageScopeDropdown--K5y-7",G="canvas_search--dropdownOption--dQRr3",U="canvas_search--replaceInput--TmEDS canvas_search--searchBarRow--9aFwa canvas_search--input--aPqLZ",H="canvas_search--replaceButtons--1sbwP",K="canvas_search--collapsableHeaderToggle--kHXh8",V="canvas_search--collapsableHeaderName---qij5",W="canvas_search--collapsableHeaderCount---NL3l",Y="canvas_search--expandIcon--6eieV",q="canvas_search--loadingSpinner--Y5hDC",X="canvas_search--loadingSpinnerDelay--Rk3MX",J="canvas_search--searchIconButton--lg-V8",Z="canvas_search--searchSidebarMinimal--I1hwg canvas_search--searchSidebarContainer--1tcxd"},212974:(e,t,n)=>{n.d(t,{$A:()=>a,kL:()=>l,to:()=>i});let a="40px",l="header_container--container--aPIhG",i="header_container--withShadow---XYxm"},377549:(e,t,n)=>{n.d(t,{D6:()=>i,eB:()=>a,kF:()=>l,qf:()=>r});let a="asset_description_lexical_editor--contentEditable--hqA2W asset_description_lexical_editor--contentEditableBase--nTcyo",l="asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo",i="asset_description_lexical_editor--contentEditableCollapsed--H601A asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo",r="asset_description_lexical_editor--placeholder--xzapr"},550177:(e,t,n)=>{n.d(t,{$S:()=>r,Ie:()=>a,M8:()=>l,Rm:()=>i});let a="site_settings_components--imageSelectorDropdown--fLofQ",l="site_settings_components--imageSelectorEmptyLabel--x4Fnx",i="site_settings_components--imageSelectorOptionName--iYOOD",r="site_settings_components--textareaDescription--savOz"},482948:(e,t,n)=>{n.d(t,{Q4:()=>C,gE:()=>S,nU:()=>_,u5:()=>w});var a=n(579020),l=n(322035),i=n(44509),r=n(831932),s=n(757033),o=n(442313),d=n(151265),c=n(697714),u=n(176283),m=n(23354),p=n(34631),h=n(901647),g=n(366082),f=n(217242),E=n(273121),b=n(97859),v=n(526830),y=n(492119);let _="/slides/new?slide-template-library-key=";async function x(e,t,n,a,l,i){let r=[],s=null;try{s=await (0,g.nm)(!0)(n),r=(0,f.F)(a,t,s)}catch(t){let e=t?.data?.message||(0,o.t)("file_browser.error_try_again");n(c.F.enqueue({message:e,type:"error"}))}let d=(a.authedActiveCommunityProfile?.associated_users??[]).filter(e=>e.user_id in a.authedUsers.byId).length>1;if(r.length>1||d){let n=(0,m.JJ)(t.viewer_mode);e({onSelectWorkspace:l,workspaces:r.map(e=>(0,p.y)(e,n,a,s,i)),mode:"new_file"})}else l(r[0])}let S=(e,t={isFreemiumPreview:!1,adminReviewerOverride:!1})=>n=>async(o,c)=>{let m=c();await x(e,n,o,m,function(e){let c={headers:{...s.Ay.defaults.headers}},p={};e&&(c.headers["X-Figma-User-ID"]=e.userId,p.org_id=e.orgId,p.team_id=e.teamId),!0===t.adminReviewerOverride&&(p.admin_reviewer_override=!0),s.Ay.post(`/api/hub_files/v2/${n.id}/copy`,p,c).then(({data:s})=>{let c=s.meta,g=(0,v.m3)(n),f=!0!==g?"none":!0===t.isFreemiumPreview?"trial":"paid";(0,a.sx)(h.M5.HUB_FILE_DUPLICATED,{hubFileId:n.id,figFileKey:c.key,isMonetized:g,paidStatus:f,searchSessionId:(0,u.w)(m),file_team_id:p.team_id,org_id:p.org_id,file_folder_id:c.folder_id}),"whiteboard"===c.editor_type&&o((0,d.Hx)({storeInRecentsKey:y.$A.FigJam,id:n.id,type:y.vt.CommunityResource}));let b=(0,E.to)(c);b=(0,l.dR)(b,{"is-community-duplicate":"1",fuid:e?.userId||""}),!0===t.isFreemiumPreview&&(b=(0,l.dR)(b,{"is-freemium-preview":"1"})),i.Ay.redirect(b,r.rr?void 0:"_blank")})})},w=e=>t=>async(n,a)=>{let s=a();await x(e,t,n,s,function(e){let n=`${_}${t.library_key}`;e&&((0,b.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),n=(0,l.dR)(n,{fuid:e.userId})),i.Ay.redirect(n,r.rr?void 0:"_blank")})},C=e=>t=>async(n,a)=>{let s=a();await x(e,t,n,s,function(e){let n=`/file/new?initial-library-key=${t.library_key}`;e&&((0,b.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),n=(0,l.dR)(n,{fuid:e.userId})),i.Ay.redirect(n,r.rr?void 0:"_blank")},!0)}},389951:(e,t,n)=>{n.d(t,{i:()=>a});let a=function(){return""}},795005:(e,t,n)=>{n.d(t,{u:()=>a});let a=function(){return[]}},65346:(e,t,n)=>{n.d(t,{Q:()=>f,S:()=>E});var a=n(695635),l=n(195507),i=n(896966),r=n(757033),s=n(280198),o=n(442313),d=n(697714),c=n(635547),u=n(349507),m=n(631405),p=n(73495),h=n(8374),g=n(110979);let f=(0,h.nF)(async(e,t,{loadingKey:n})=>{let r=!1;try{r=!!(0,l.oA)((await (0,a.Ek)(c.jmg,{fileKey:t.file_key})).deviceTryFile)}catch(e){(0,i.x1)("claimFigJamTryFile","Request failed for fetching LG DeviceTryFileView",e,{reportAsSentryError:!0})}try{let a;a=r?p.L.claimDeviceFile({fileKey:t.file_key}):m.Uy.claimTryFile({fileKey:t.file_key}),(0,u.N)(a,e,n);let{data:l}=await a,{save_location:i,folder_name:s,org_id:c}=l.meta,{user:h,currentUserOrgId:f,selectedView:E}=e.getState(),b=(0,o.t)("figjam_try.this_file_has_been_saved_to_drafts");if("team"===i&&s&&(b=(0,o.t)("figjam_try.this_file_has_been_saved_to_folder_name",{folder_name:s})),c&&c!==f&&h){let t={userId:h.id,orgId:c};e.dispatch(g._l({workspace:t,view:E}))}e.dispatch(d.F.enqueue({message:b}))}catch(t){e.dispatch(s.s.error("Unable to save file. Please try again later."))}}),E=(0,h.nF)(async(e,{userName:t,file_key:n},{loadingKey:a})=>{try{await r.Ay.put(`/api/try/file/${n}`,{name:(0,o.t)("figjam_try.default_filename",{userName:t})})}catch(e){console.error(e)}})},351453:(e,t,n)=>{n.d(t,{$:()=>h});var a=n(848318),l=n(716544),i=n(23459),r=n(857188),s=n(481540),o=n(419720),d=n(661780),c=n(376780),u=n(766878);if(443==n.j)var m=n(902166);var p=n(42987);function h({editorType:e,newFileFrom:t,contextClicked:n,folderId:h,forceFolderId:g,forceOpenNewTab:f}){let E=(0,o.B)(h),b=(0,l.wA)(),v=(0,d.TA)(),y=(0,i.Xr)(m.P4),_=(0,l.d4)(e=>{let t=h?e.folders[h]:void 0;return t&&t.team_id?e.teams[t.team_id]:void 0});return(0,a.useCallback)(a=>{b((0,p.zE)({state:E,editorType:e,team:_,from:t,openNewFileIn:f||(0,r.oJ)(a)?u.ai.NEW_TAB:u.ai.SAME_TAB,folderId:g?h:void 0,callback:e=>{(0,s.Cu)({userId:v,fileKey:e},n)}})),e===c._Y.SITES&&y(!0)},[n,b,e,h,_,g,f,t,E,v,y])}},535650:(e,t,n)=>{n.d(t,{Te:()=>o,V6:()=>d,ew:()=>s});var a=n(157907),l=n(51910),i=n(369600),r=n(376780);function s(){let e=(0,l.p8)("pagesList");return e.some(t=>t.pageType!==e[0].pageType)}function o(){let e=(0,i.q5)();return e?.editorType===r._Y.DESIGN}function d(){let e=o(),t=s();return e&&(t||(0,a.k)().interop_pages)}},192723:(e,t,n)=>{n.d(t,{ai:()=>u,yh:()=>p});var a=n(848318),l=n(741419),i=n(879378),r=n.n(i);if(443==n.j)var s=n(701780);var o=n(992444),d=n(789269),c=n(104720);function u({nodeId:e,width:t,height:n,shouldSkip:i,updateOnSceneGraphChange:d=!1,transparentBackground:u=!1}){let[m,p]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(i){p(null);return}let a=null,m=()=>{a&&(a.abort(),a=null)},h=()=>{let a=(0,c._G)(new s.Mi(t,n),e,!0,u?l.tvY.TRANSPARENT:void 0);a&&a.pixels&&a.pixelSize&&a.displaySize&&p({src:(0,c.Pv)(a.pixels,a.pixelSize),displaySize:a.displaySize})};p(null);let g=()=>{m(),a=new TaskController({priority:"user-visible"}),scheduler.postTask(h,{signal:a.signal})},f=r()(g,200,{trailing:!0,leading:!1});return g(),d&&o.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",f),()=>{m(),f.cancel(),d&&o.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",f)}},[e,t,n,i,d,u]),m}let m={};function p({nodeId:e,width:t,height:n,version:i,reason:r,shouldSkip:o,regenerateAfterImagesLoaded:u,isDevModeBlendedSection:p=!1,fileKey:h,shouldCache:g=!0}){let[f,E]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[y,_]=(0,a.useState)(0),x=function({fileKey:e,nodeId:t,width:n,height:a}){return e?`${e}-${t}-${n}x${a}`:`${t}-${n}x${a}`}({fileKey:h,nodeId:e,width:t,height:n}),S=m[x]?.hasUnresolvedImages||!1;return(0,a.useEffect)(()=>{if(o)return;let t=!0;return u&&!f&&S&&(0,d.Jr)().waitForImagesUnder([e],l.MoD.LOW_RES_ONLY,r).then(()=>{t&&E(!0)}),()=>{t=!1}},[f,x,e,r,S,u,o]),(0,a.useEffect)(()=>{if(o)return;let a=null;!m[x]||m[x].version!==i||!m[x].imagesLoaded&&f&&m[x].hasUnresolvedImages?(a&&(a.abort(),a=null),a=new TaskController({priority:"user-visible"}),scheduler.postTask(()=>{let a=!!u&&(0,d.Jr)().unresolvedImagesUnder([e],l.MoD.LOW_RES_ONLY).length>0,r=(0,c._G)(new s.Mi(t,n),e,!0,l.tvY.TRANSPARENT,p);if(r&&r.pixels&&r.pixelSize&&r.displaySize){let e={thumbnail:{src:(0,c.Pv)(r.pixels,r.pixelSize),displaySize:r.displaySize},imagesLoaded:f,hasUnresolvedImages:a,version:i};v(e.thumbnail),g&&(m[x]=e),_(e=>e+1)}},{signal:a.signal})):v(m[x].thumbnail)},[e,t,n,x,i,o,g,f,u,p]),b??null}},306612:(e,t,n)=>{n.d(t,{u:()=>L});var a=n(848318),l=n(308769),i=n(741419),r=n(673906),s=n(179703),o=n(157907),d=n(23459),c=n(979070),u=n.n(c),m=n(77708),p=n.n(m),h=n(6819),g=n(808471),f=n(442313),E=n(697714),b=n(667323),v=n(992444),y=n(701200),_=n(737562),x=n(387738),S=n(946795),w=n(902166),C=n(861182);n(710562).pS;let k=n(710562).qs;n(710562).ux;var T=n(271729),I=n(493640),N=n(36789),A=n(316153),R=n(491486);function M(e,t){return"pending"!==e.status&&"error"!==e.status&&e.nodeGuid===t}let D=e=>{let t=e.stackMode;return"HORIZONTAL"===t&&"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackCounterSizing||"VERTICAL"===t&&"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackPrimarySizing},P=e=>{let t=e.stackMode;return"HORIZONTAL"===t&&"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackPrimarySizing||"VERTICAL"===t&&"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackCounterSizing};function j(){return!!(0,N.Jh)(h.D.getState().selectedView)}let L=new class{constructor(){this._isUpdating=!1,this._dirtyNodes=new Set,this._dirtyCodeInstanceSnapshots=new Set,this._codeNodeDebounceTimeouts=new Map,this._codeNodeGUIDsWithSourceCodeToSync=new Set,this._sourceCodeSyncTimeout=null,this._staleSnapshotTimers=new Map,this._derivedCodeFilesPendingRegeneration=new Map}updatePreview(e){if(this._isUpdating){for(let t of e)this._dirtyNodes.add(t);return}R.M&&(this._isUpdating=!0,(0,R.M)(e).finally(()=>{if(this._isUpdating=!1,this._dirtyNodes.size>0){let e=this._dirtyNodes;this._dirtyNodes=new Set,this.updatePreview(e)}}))}updateDirtyResponsiveSets(e){d.zl.set(w.o,[...e])}setLeftPanelTabToCode(){h.D.dispatch(b.FP({tab:i.xae.CODE}))}markCodeNodesDirty(e){if(!(0,o.k)().bake_canvas&&h.D.getState().openFile?.canEdit)for(let t of e){let e=(0,s.UN)().get(t);if(!e)continue;let n=(e.isCodeInstance||e.isCodeLayer)&&e.parentGuid&&e.parentGuid!==s.UN().getInternalCanvas()?.guid,a=this._dirtyCodeInstanceSnapshots.has(t);this._dirtyCodeInstanceSnapshots.add(t);let l=this._codeNodeDebounceTimeouts.get(t);if(l&&clearTimeout(l),!a&&n){let t=this.getTimestampForCodeSnapshotInvalidatedAt();e.startCodeSnapshottingState(t)}this._staleSnapshotTimers.has(t)&&(clearTimeout(this._staleSnapshotTimers.get(t)),this._staleSnapshotTimers.delete(t)),this._codeNodeDebounceTimeouts.set(t,setTimeout(()=>{this._codeNodeDebounceTimeouts.delete(t),n&&this.performCodeNodeSnapshot(e).then(()=>{v.Y5.clearVisualBellType("code-component-error")}).catch(t=>{let n=t.message||String(t);e.isAlive&&(e.codeComponentError=n)}),this.performSourceCodeAnalysis(e).catch(e=>{console.error("Error performing code file analysis:",e)})},1e3))}}showSupabaseDeployNudge(){(0,I.EI)()&&(d.zl.get(I.Ld)||d.zl.set(I.Xl,!0))}async performCodeNodeSnapshot(e){if((0,g.nl)())return console.log("Skipping performSnapshot during interaction tests"),!0;let t=await (0,C.gz)({node:e,tailwind:!0,jsxDev:!1,shadcn:j(),noWrapper:j()}),n=(0,A.jT)(e),a=(0,A.K8)(e),l=P(e)?void 0:e.size.x??0,i=D(e)?void 0:e.size.y??0,r=e.containingResponsiveNode,s=r?{name:r.name,width:r.size.x,height:r.size.y}:void 0,o=(0,C.Ri)({activeBreakpoint:s}),{imageSet:d,layoutWidth:c,layoutHeight:u,totalWidth:m,totalHeight:p,offsetX:h,offsetY:f}=await o.snapshot({code:t.esm,exportName:e.backingCodeComponent?.codeExportName,width:l,height:i,minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight,props:n,instanceSwapProps:a,styles:t.css});if(this._codeNodeDebounceTimeouts.has(e.guid))return!1;let E=!(0,N.YE)();return e.setCodeSnapshot(d,{x:h,y:f},{x:c,y:u},{x:m,y:p},E),this._dirtyCodeInstanceSnapshots.delete(e.guid),!0}async performSourceCodeAnalysis(e){if(!e.isAlive||!e?.isCodeFile&&!e.isCodeLayer||!/\.(ts|tsx)$/i.test(e.codeFileFullPath))return;let t=e.sourceCode;if(!t)return;let n={exportedCodeComponents:[]};if(!j()||"App.tsx"===e.name){let t=await (0,C.gz)({node:e,tailwind:!1,jsxDev:!1,shadcn:j(),noWrapper:j()}),a=(0,C.Ri)();n=await a.analyzeCodeFile({code:t.esm})}let a=await k(t),i=n.exportedCodeComponents;if(n.exportedCodeComponents.some(e=>!e.props)&&(i=i.map(e=>{if(e.props)return e;let t=a.exportedCodeComponents.find(t=>t.codeExportName===e.codeExportName);return t?{...e,props:t.props}:e})),e.isAlive){if(e.isCodeFile){let t=[],n=[];for(let i of a.importedCodeFiles??[])switch(i.type){case"RELATIVE_CODE_FILE":{let t=function(e,t){let n=function(e,t){let n=e.codeFilePath,a=t;return(t.startsWith("../")?a=`${t.substring(3)}.tsx`:t.startsWith("./")&&(a=`${t.substring(2)}.tsx`),n)?`/${n}/${a}`:`/${a}`}(e,t);if(!n)return null;let a=s.UN().getInternalCanvas()?.childrenNodes.find(e=>e.isCodeFile&&!e.isSubscribedAsset&&C.iD(e.codeFileFullPathWithoutScheme,n));return a?l.Tq.fromLocalNodeIdStr(a.guid):null}(e,i.path);t&&n.push(t);break}case"IMAGE_IMPORT":t.push({name:i.name,hash:i.hash})}(0,y.r)(()=>{r.l7.system("materialize-imported-code-files-references",()=>{e.importedCodeFiles=n}),r.l7.system("materialize-imported-images-references",()=>{e.setImageImports(t)})}),e.materializeCodeComponents(i.map(e=>e.codeExportName),i.map(e=>e.displayName??e.codeExportName),i.map(e=>e.props??{}),i.map(e=>e.codeBehaviorData??{}))}else{let t=i.find(e=>"default"===e.codeExportName);e.materializeCodeLayer(t?.props??{})}}}setSprigUserCreatedCodeLayerAtom(){d.zl.set(w.fF,!0)}syncNodeSourceCode(e){for(let t of e)this._codeNodeGUIDsWithSourceCodeToSync.add(t);this._sourceCodeSyncTimeout||(this._sourceCodeSyncTimeout=setTimeout(()=>{this._sourceCodeSyncTimeout=null;let e=(0,s.UN)(),t={};this._codeNodeGUIDsWithSourceCodeToSync.forEach(n=>{let a=e.get(n);a&&(a.isCodeFile?t[a.codeFileFullPathWithoutScheme]=a.sourceCode:a.isCodeLayer&&!a?.isInstanceSublayer&&(t[a.codeFileFullPathWithoutScheme]=a.sourceCode))}),this._codeNodeGUIDsWithSourceCodeToSync.clear(),(0,C.fM)(t)},0))}getAutomaticCodeFileNameForNodeName(e,t){let n=(0,s.UN)(),a=p()(u()(e))+".tsx",l=new Set(n.getInternalCanvas()?.findAllWithCriteriaGUIDs({types:["CODE_FILE"]}).map(e=>n.get(e)).filter(e=>e&&!e.isSoftDeleted).map(e=>e?.name));if(!l.has(a))return a;let i=a.replace(".tsx",`-${t}.tsx`);if(!l.has(i))return i;let r=2,o=i.replace(".tsx",`-${r}.tsx`);for(;l.has(o);)r++,o=i.replace(".tsx",`-${r}.tsx`);return o}updateCodeSnapshotState(e,t,n,l){(0,S.ks)(e);let r=this.getTimestampForCodeSnapshotInvalidatedAt();if(this._staleSnapshotTimers.has(e)&&(clearTimeout(this._staleSnapshotTimers.get(e)),this._staleSnapshotTimers.delete(e)),n){if(t===i.Lxv.SNAPSHOT_ERROR)s(!1);else if(t===i.Lxv.SNAPSHOTTING||t===i.Lxv.INITIAL){if(this.isCodeSnapshotStale(t,l))s(!0);else if((0,S.Vm)(e,a.createElement(x.A,{})),l){let t=setTimeout(()=>{this._staleSnapshotTimers.delete(e),(0,S.ks)(e),s(!0)},Math.max(0,(l+20-r)*1e3));this._staleSnapshotTimers.set(e,t)}}}function s(t){(0,S.Vm)(e,a.createElement(T.J,{location:"canvas",isStale:t}))}}getTimestampForCodeSnapshotInvalidatedAt(){return Math.floor(Date.now()/1e3)}isCodeSnapshotStale(e,t){if(e===i.Lxv.INITIAL&&0===t)return!1;let n=this.getTimestampForCodeSnapshotInvalidatedAt();return!!(t&&n-t>20)}resnapshotIfStale(e,t,n){this.isCodeSnapshotStale(t,n)&&this.markCodeNodesDirty(new Set([e]))}pushAttachmentSourceCode(e,t){let n=(0,s.UN)(),a=t.map(e=>{let t=n.get(e);return t?{code:t.sourceCode,codeFileGuid:e.toString()}:null}).filter(e=>null!==e);if(0===a.length){this.pushAttachmentError(e);return}let l={status:"success",nodeGuid:e,codeFiles:a,type:"FIGMA_NODE"};d.zl.set(w.Ah,t=>t.map(t=>M(t,e)?{...l,uniqueId:t.uniqueId}:t))}pushAttachmentError(e){d.zl.set(w.Ah,t=>t.filter(t=>!M(t,e)));let t=(0,s.UN)().get(e);t&&t.removeSelfAndChildren(),h.D.dispatch(E.F.enqueue({type:"figmake_attachment_failed_to_load",message:(0,f.t)("figmake.attachments.failed_to_load_attachment_visual_bell"),error:!0,timeoutOverride:3e3}))}regenerateDerivedCodeFileDebounced(e){let t,n;let a=(0,s.UN)().getCodeFileNode(e);if(!a)throw Error("CodeFile not found");let l=this._derivedCodeFilesPendingRegeneration.get(e);if(l)return clearTimeout(l.timeout),this._derivedCodeFilesPendingRegeneration.set(e,{timeout:setTimeout(l.callback,500),callback:l.callback}),Promise.resolve(null);let i=new Promise((e,a)=>{t=e,n=a}),r=()=>{let l=a.codeFileCanvasNode;l&&(0,_.Ts)(l).then(n=>{this._derivedCodeFilesPendingRegeneration.delete(e),t(n)}).catch(n)};return this._derivedCodeFilesPendingRegeneration.set(e,{callback:r,timeout:setTimeout(r,500)}),i}}},970823:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(23459),l=n(442313),i=n(96321),r=n(369600);function s(){let e=(0,r.q5)(),t=(0,a.md)(i.lu);return e?e.name:t?t.name:(0,l.t)("fullscreen.filename_view.title_placeholder")}},273199:(e,t,n)=>{n.d(t,{X:()=>i,y0:()=>r});var a=n(848318);let l={topLevelObjectRowHeight:32,nestedObjectRowHeight:32,rowSelectionGap:4,insertionLineBoxOffset:4,showVisualLayerIcons:!1,boldLayerNames:!0,topLevelIconSize:16,nestedIconSize:16},i=443==n.j?l:null,r=(0,a.createContext)(l)},146797:(e,t,n)=>{n.d(t,{z:()=>i});var a=n(878028),l=n(972813);let i=new class{constructor(){this.SitesBundleSchemaValidator=(0,l.vh)(),this.SitesCustomDomainDnsRecordsValidator=(0,l.YV)("SitesCustomDomainDnsRecordsValidator",a.z.array(a.z.object({type:a.z.string(),host:a.z.string(),value:a.z.string()})),null),this.SitesActivateCustomDomainValidator=(0,l.YV)("SitesActivateCustomDomainValidator",a.z.void(),null),this.SitesRemoveCustomDomainValidator=(0,l.YV)("SitesRemoveCustomDomainValidator",a.z.void(),null),this.SitesCheckCustomDomainLimitValidator=(0,l.YV)("SitesCheckCustomDomainLimitValidator",a.z.object({num_domains:a.z.number(),num_domains_allowed:a.z.number(),num_verified_domains:a.z.number()}),null),this.SitesUpdateBundleValidator=(0,l.YV)("SitesUpdateBundleValidator",a.z.void(),null)}postSitesBundleAsync(e){return this.SitesBundleSchemaValidator.validate(async({xr:t})=>{let n={responsive_set_guids:e.responsiveSetGuids,font_index_hash:e.fontIndexHash};return e.checkpointKey&&(n.checkpoint_key=e.checkpointKey),await t.post(`/api/sites/${e.fileKey}/async/upload`,n)})}unpublishSite(e){return this.SitesBundleSchemaValidator.validate(async({xr:t})=>await t.put(`/api/sites/${e.fileKey}/unpublish`))}addCustomDomain(e){return this.SitesCustomDomainDnsRecordsValidator.validate(async({xr:t})=>await t.post(`/api/sites/${e.fileKey}/custom_domain`,{domain:e.domain}))}activateCustomDomain(e){return this.SitesActivateCustomDomainValidator.validate(async({xr:t})=>await t.post(`/api/sites/${e.fileKey}/verify_custom_domain`))}getDomainDNSRecords(e){return this.SitesCustomDomainDnsRecordsValidator.validate(async({xr:t})=>await t.get(`/api/sites/${e.fileKey}/get_custom_domain_dns_records`))}removeCustomDomain(e){return this.SitesRemoveCustomDomainValidator.validate(async({xr:t})=>await t.del(`/api/sites/${e.fileKey}/remove_custom_domain`))}checkCustomDomainLimit(e){return this.SitesCheckCustomDomainLimitValidator.validate(async({xr:t})=>await t.get(`/api/sites/${e.fileKey}/check_custom_domain_limit`))}updateBundle(e){return this.SitesUpdateBundleValidator.validate(async({xr:t})=>await t.put(`/api/sites/${e.fileKey}/update_bundle`,{bundle_id:e.bundleId}))}}},506047:(e,t,n)=>{n.d(t,{R:()=>i});var a=n(972813),l=n(757033);let i=new class{constructor(){this.GetOrganizationValidator=(0,a.vh)(),this.GetOrganizationsValidator=(0,a.vh)(),this.GetExistingProjectsValidator=(0,a.vh)(),this.GetProjectValidator=(0,a.vh)(),this.GetPublicAnonKeyValidator=(0,a.vh)(),this.GetConnectionValidator=(0,a.vh)(),this.GetFileAuthorizedValidator=(0,a.vh)(),this.CreateProjectValidator=(0,a.vh)()}getConnectedOrganization(e){return this.GetOrganizationValidator.validate(async({xr:t})=>await t.get(`/api/integrations/supabase/${e.fileKey}/organization`))}getOrganization(e){return this.GetOrganizationValidator.validate(async({xr:t})=>await t.get(`/api/integrations/supabase/${e.fileKey}/organization/${e.orgId}`))}getOrganizations(e){return this.GetOrganizationsValidator.validate(async({xr:t})=>await t.get(`/api/integrations/supabase/${e.fileKey}/organizations`))}getExistingProjects(e){return this.GetExistingProjectsValidator.validate(async({xr:t})=>await t.get(`/api/integrations/supabase/${e.fileKey}/existing_projects`))}getProject(e){return this.GetProjectValidator.validate(async({xr:t})=>await t.get(`/api/integrations/supabase/${e.fileKey}/project/${e.projectId}`))}getConnectedProject(e){return this.GetProjectValidator.validate(async({xr:t})=>await t.get(`/api/integrations/supabase/${e.fileKey}/project`))}getPublicAnonKey(e){return this.GetPublicAnonKeyValidator.validate(async({xr:t})=>await t.get(`/api/integrations/supabase/${e.fileKey}/public_anon_key`))}getConnection(e){return this.GetConnectionValidator.validate(async({xr:t})=>await t.get(`/api/integrations/supabase/${e.fileKey}/connection`))}getFileAuthorized(e){return this.GetFileAuthorizedValidator.validate(async({xr:t})=>await t.get(`/api/integrations/supabase/${e.fileKey}/authorization`))}createProject(e){return this.CreateProjectValidator.validate(async({xr:t})=>await t.post(`/api/integrations/supabase/${e.fileKey}/create_project`,{project_name:e.projectName,db_pass:e.dbPass,region:e.region}))}pauseProject(e){return l.Ay.post(`/api/integrations/supabase/${e.fileKey}/project/pause`,{project_id:e.projectId})}connectFile(e){return l.Ay.post(`/api/integrations/supabase/${e.fileKey}/connect`,{supabase_project_id:e.supabaseProjectId,supabase_org_id:e.supabaseOrgId})}disconnectFile(e){return l.Ay.post(`/api/integrations/supabase/${e.fileKey}/disconnect`)}deployEdgeFunction(e){return l.Ay.post(`/api/integrations/supabase/${e.fileKey}/edge_functions/figmake-server/deploy`,{files:e.files})}createSecret(e){return l.Ay.post(`/api/integrations/supabase/${e.fileKey}/secrets`,a.td.toAPIParameters({secret_name:e.secretName,secret_value:e.secretValue}))}}},335062:(e,t,n)=>{n.d(t,{Ay:()=>T,BZ:()=>w,m4:()=>C});var a=n(848318),l=n(716544),i=n(23459),r=n(379338),s=n(442313),o=n(180423),d=n(727341),c=n(201494),u=n(326825),m=n(684525),p=n(670673),h=n(326971),g=n(51910),f=n(661780),E=n(747863),b=n(166917),v=n(35315),y=n(676448),_=n(680632),x=n(61614),S=n(151144);let w="ui3-layers-horizontal-scroll-onboarding-key",C="ui2-layers-horizontal-scroll-onboarding-key",k=(0,p.r1)("seen_ui3_layers_horizontal_scroll_overlay");function T(){let e=(0,d.GS)(),t=(0,l.wA)(),n=(0,g.aV)(),p=(0,f.iZ)(),T=(0,i.md)(m.Fy),I=(0,l.d4)(e=>e.mirror.appModel.currentPage),N=(0,b.Fk)((e,t)=>!(0,h.zC)(e,t),I),A=(0,i.md)(k),{show:R,isShowing:M,complete:D,uniqueId:P}=(0,u.e)({overlay:S.vlG,priority:v.N.SECONDARY_MODAL},[T,A]);a.useEffect(()=>{R({canShow:(e,t)=>e&&!n&&N&&!t})},[R,n,N,T]);let j=e?{title:(0,s.tx)("ui3_layers_horizontal_scroll_overlay.ui3_title"),description:(0,s.tx)("ui3_layers_horizontal_scroll_overlay.ui3_description"),primaryCta:{label:(0,s.tx)("general.got_it"),ctaTrackingDescriptor:o.c.GOT_IT,type:"button",onClick:D},targetKey:w}:{title:(0,s.tx)("ui3_layers_horizontal_scroll_overlay.ui2_title"),description:(0,s.tx)("ui3_layers_horizontal_scroll_overlay.ui2_description"),primaryCta:{label:(0,s.tx)("ui3_layers_horizontal_scroll_overlay.try_it_in_ui3"),ctaTrackingDescriptor:o.c.TRY_IT_IN_UI3,type:"button",onClick:function(){e||(E.nt.ui3.toggleValue(p,t,"horizontal_scroll_overlay"),D())}},targetKey:C};return(0,c.E)(P,["layers_horizontal_scroll","labs"],e=>{let t="layers_horizontal_scroll"===e.id,n="labs"===e.id&&e.properties?.name==="unified_index_v3_endpoint";M&&(t||n)&&D()}),a.createElement(_.rq,{...j,isShowing:M,trackingContextName:"UI3 Layers Horizontal Scroll Overlay",onClose:D,disableHighlight:!0,arrowPosition:x.F_.RIGHT_TITLE,media:a.createElement(y.w,{src:(0,r.ck)("86193716c443398bbd6b55d19b65db2eaf0fe3c1"),aspectRatio:16/9})})}},21783:(e,t,n)=>{n.d(t,{_:()=>p});var a=n(848318);if(443==n.j)var l=n(897378);if(443==n.j)var i=n(707387);if(443==n.j)var r=n(622876);var s=n(166365),o=n(442313),d=n(503024),c=n(246633),u=n(733790);if(443==n.j)var m=n(90724);function p({onClick:e}){return"ui3"===(0,r.DP)().version?a.createElement(l.K,{onClick:e,recordingKey:"canvas_search.search_icon_button","aria-label":(0,o.t)("fullscreen_actions.find"),htmlAttributes:{"data-onboarding-key":"canvas-search","data-tooltip":"canvas-search","data-tooltip-type":d.Ib.LOOKUP}},a.createElement(i.h,null)):a.createElement(c.K0,{"data-onboarding-key":"canvas-search","data-tooltip-type":d.Ib.LOOKUP,"data-tooltip":"canvas-search",onClick:e,recordingKey:"canvas_search.search_icon_button",isBackgroundTransparent:!0,className:u.gV},a.createElement(s.B,{svg:m.A,className:u.v9}))}},823425:(e,t,n)=>{n.d(t,{C_:()=>f,iv:()=>h,LP:()=>g,JI:()=>p,v2:()=>m});var a=n(848318),l=n(716544),i=n(445777),r=n(741419),s=n(818754),o=n(831932),d=n(235441),c=n(27776);let u=(0,s.hG)(c.Ty8);function m(){let e=(0,l.d4)(({mirror:{selectionProperties:e,sceneGraphSelection:t,appModel:n}})=>1===Object.keys(t).length&&e.whiteboardNumSelectedByType&&1===e.whiteboardNumSelectedByType.SECTION&&(e.name||n.onCanvasNameEditorInfo.mode===r.nzw.SECTION_NAME)),t=(0,l.d4)(({mirror:{selectionProperties:e,sceneGraphSelection:t}})=>1===Object.keys(t).length&&e.whiteboardNumSelectedByType&&1===e.whiteboardNumSelectedByType.STAMP),n=(0,l.d4)(({mirror:{selectionProperties:e}})=>e.nodeSelectedValidForQuickAdd),a=(0,d.lg)();return"whiteboard"===a?e?40:t&&o.XN?40:n?20+u/2:r.qmM?.shouldRenderTableUiForSelection()!==r.miS.HIDE?20+u/2:16:"cooper"===a?30:8}function p(){return(0,l.d4)(e=>e.mirror.appModel.hyperlinkLocation)}function h(e,t,n,a){switch(a){case r.cfv.ABOVE:return n<e.y?r.cfv.ABOVE:r.cfv.BELOW;case r.cfv.BELOW:return n>e.y?r.cfv.BELOW:r.cfv.ABOVE;case r.cfv.LEFT:return t<e.x?r.cfv.LEFT:r.cfv.RIGHT;case r.cfv.RIGHT:return t>e.x?r.cfv.RIGHT:r.cfv.LEFT;default:(0,i.xb)(a)}}function g(e){let t=a.useRef({frameHandle:null,didMenuMidpointChange:!1,didSelectionChange:!1,lastMidpoint:{x:0,y:0},lastSelection:{}}),n=a.useCallback(()=>{let{current:n}=t;n.didMenuMidpointChange&&n.didSelectionChange&&e.current?.animate(),n.frameHandle||(n.frameHandle=setTimeout(()=>{n.didMenuMidpointChange=!1,n.didSelectionChange=!1,n.frameHandle=null},0))},[e]);return{markSelectionChanged:a.useCallback(e=>{Object.keys(t.current.lastSelection).length&&(t.current.didSelectionChange=!0,n()),t.current.lastSelection=e},[n]),markPositionChanged:a.useCallback(e=>{let{current:a}=t;(e.x!==a.lastMidpoint.x||e.y!==a.lastMidpoint.y)&&(a.didMenuMidpointChange=!0,n()),a.lastMidpoint=e},[n])}}let f=a.forwardRef(function({children:e,disableAnimation:t=!1},n){let l=a.useRef(null);return a.useImperativeHandle(n,()=>({animate:()=>{l.current&&!t&&(l.current.style.animation="none",l.current.offsetTop,l.current.style.animation="")}})),a.createElement("div",{ref:l,className:t?void 0:"inline_editor_layer--animationRoot--pX-db"},e)})},385051:(e,t,n)=>{n.d(t,{C:()=>l,X:()=>i});var a=n(23459);let l=(0,n(792478).Wh)(()=>(0,a.eU)(0)),i=(0,a.eU)(!1)},770526:(e,t,n)=>{n.d(t,{vx:()=>eT,oo:()=>eM,OG:()=>eI});var a=n(848318),l=n(716544),i=n(665488),r=n(741419),s=n(952423),o=n(179703),d=n(157907),c=n(23459),u=n(536384),m=n.n(u),p=n(702),h=n(818754),g=n(997649),f=n(857188),E=n(654104),b=n(166365),v=n(17755),y=n(442313),_=n(500276),x=n(727341),S=n(162951),w=n(576602),C=n(964e3),k=n(139736),T=n(773422),I=n(45584),N=n(776618),A=n(273199),R=n(501736),M=n(166917),D=n(503024),P=n(685567),j=n(814293),L=n(771430),O=n(156843),B=n(256429),F=n(431118),z=n(622978),$=n(230933);function G({modeNames:e}){let t=(0,x.GS)();if(0===e.length)return null;let n=1===e.length?e[0]:e[0]+" + "+(e.length-1);return a.createElement("div",{className:z.Io,"data-testid":"variable-mode-pill","data-tooltip-type":D.Ib.TEXT,"data-tooltip":(0,y.t)("variables.mode_pill.tooltip",{listOfModes:(0,F.Yx)(e)})},!t&&a.createElement(b.B,{className:z.nW,svg:$.A}),a.createElement("div",{className:z.XW},n))}var U=n(157684),H=n(219205),K=n(376025),V=n(411132),W=n(649372),Y=n(403054),q=n(566699),X=n(523860),J=n(85206),Z=n(291355),Q=n(566447),ee=n(15890),et=n(221154),en=n(405864),ea=n(597304);function el(){return a.createElement("div",{className:v.s.flex.itemsCenter.justifyCenter.$},a.createElement("div",{className:z.xE}))}class ei extends a.PureComponent{constructor(){super(...arguments),this.expandMouseDown=e=>{this.props.expandMouseDown(this.props.guid,e)}}renderNodeIndents(){let e=[];for(let t=0;t<this.props.level+1;t++){let n=`[${t}]`,l=-1!==this.props.isLastMaskedAtLevels.indexOf(n),i=-1!==this.props.isMaskedAtLevels.indexOf(n),r=t===this.props.level&&this.props.mask,s=t===this.props.level&&this.props.hasChildren,o=m()(z.dK,{[z.TY]:this.props.displayOrder===Y.k.DOM,[z.co]:this.props.horizontalScrollEnabled}),d=r||i||l;(this.props.horizontalScrollEnabled||!d)&&e.push(a.createElement("span",{key:t,className:z.pZ})),l?e.push(a.createElement(b.B,{key:`${t}-mask`,svg:s?en.A:ea.A,className:o})):i?e.push(a.createElement(b.B,{key:`${t}-mask`,svg:s?et.A:ee.A,className:o})):r&&e.push(a.createElement(b.B,{key:`${t}-mask`,svg:s?Q.A:Z.A,className:o})),this.props.hasBullet&&t===this.props.level?e.push(a.createElement(K.E,{key:"expand-caret",recordingKey:E.Pt(this.props,"expandCaret"),className:z.OI,actionOnPointerDown:!0,onClick:this.expandMouseDown,htmlAttributes:{"data-testid":this.props.isMeasurementNode?void 0:"new-frame-bullet"}},a.createElement(el,null))):s&&e.push(a.createElement(K.E,{key:"expand-caret",recordingKey:E.Pt(this.props,"expandCaret"),className:m()(z.GE,{[z.Fq]:this.props.horizontalScrollEnabled}),actionOnPointerDown:!0,onClick:this.expandMouseDown},a.createElement(q.U,{svg:this.props.isExpanded?X.A:J.A},this.props.isExpanded?a.createElement(V.O,null):a.createElement(W.k,null))))}return e}render(){return a.createElement("span",{ref:this.props.indentsRefCallback,className:z.Wm},this.renderNodeIndents())}}ei.displayName="Indents";var er=n(545289),es=n(565460),eo=n(939983),ed=n(965550),ec=n(211939),eu=n(566892),em=n(903559),ep=n(36329);class eh extends E.o6{constructor(){super(...arguments),this.stopPropagation=e=>e.stopPropagation(),this.onMouseDown=E.cZ(this,"mousedown",e=>{this.props.onMouseDown(e)})}render(){let e,t,n;return this.props.locked?(e=eu.A,t=em.A,n=a.createElement(es.s,null)):this.props.isAncestorLocked?(e=ec.A,n=ed.vL):(e=ep.A,n=a.createElement(eo.r,null)),a.createElement("div",{className:z.hz,onMouseDown:this.onMouseDown,onDoubleClick:this.stopPropagation},a.createElement(q.U,{svg:e,fallbackSvg:t},n))}}eh.displayName="LockIcon";var eg=n(396080),ef=n(257628),eE=n(4629);function eb({disabled:e}){let t=(0,a.useMemo)(()=>({"data-tooltip-type":D.Ib.SPECIAL,"data-tooltip-show-above":!0,"data-tooltip-timeout-delay":50,"data-tooltip":eE.S,"data-tooltip-ai-beta-text":(0,y.t)("fullscreen.context_menu.auto_rename_layers"),"data-tooltip-ai-beta-action":ef.JT.AUTO_RENAME_LAYERS}),[]);return a.createElement(K.E,{className:z.J0,onClick:()=>{(0,w.Br)({source:r.uQ6.LAYERS_PANEL_ACTION_ROW,trackingDataSource:"layers_panel_action_row"})},htmlAttributes:e?void 0:t,disabled:e},a.createElement(eg.q,null))}var ev=n(260542),ey=n(952934),e_=n(554436),ex=n(275646);class eS extends E.o6{constructor(){super(...arguments),this.stopPropagation=e=>e.stopPropagation(),this.onMouseDown=E.cZ(this,"mousedown",e=>{this.props.onMouseDown(e)})}render(){let e,t;return this.props.isAncestorHidden&&this.props.visible?(e=ec.A,t=ed.vL):(e=this.props.visible?ex.A:e_.A,t=this.props.visible?a.createElement(ev.l,null):a.createElement(ey.f,null)),a.createElement("div",{className:z.yk,onMouseDown:this.onMouseDown,onDoubleClick:this.stopPropagation},a.createElement(q.U,{svg:e},t))}}eS.displayName="VisibleIcon";var ew=n(27776),eC=n(786175),ek=n(864187);let eT="layer-panel-onboarding-key";function eI(e){let t=(0,H.cJ)(),n=(e.abbreviatedStateName||e.name).replace(/\n/," ");if(t&&e.isResponsiveSet&&e.isDefaultResponsiveSet&&(n=(0,y.t)("sites.panel.home")),e.shouldShowGuids){let t=r.Egt.getOverridePathForNode(e.guid);return`${n} (${e.guid}): [${t}]`}return n}function eN({isPrimaryBreakpoint:e}){return a.createElement("div",{className:v.s.flex.$},e&&a.createElement("span",{className:v.s.colorTextBrand.pr8.$},(0,y.t)("sites.panel.primary")))}function eA(e){let[t,n]=(0,a.useState)(null),[l,i]=(0,a.useState)(!1),r=(0,H.cJ)(),s=(0,c.md)((0,j.r8)(e.guid)),{showVisualLayerIcons:o}=a.useContext(A.y0);(0,a.useEffect)(()=>{n(e.isRenaming?e.name:null)},[e.name,e.isRenaming]);let d=eI({abbreviatedStateName:e.abbreviatedStateName,guid:e.guid,shouldShowGuids:e.shouldShowGuids,name:e.name,isDefaultResponsiveSet:e.isDefaultResponsiveSet,isResponsiveSet:e.isResponsiveSet}),u=E.rf(e.recordingKey,e.focusOnSingleClick?"click":"dblclick",()=>{R.F.trackFromFullscreen("action_rename_selection",{source:"click"}),e.startRenaming(e.guid)}),p=(0,a.useRef)(null),h=(0,a.useCallback)(e=>{e&&(p.current=e,p.current.select())},[]),_=E.AF(e.recordingKey,"change",e=>{n(e.currentTarget?.value)}),x=E.v_(e.recordingKey,"keydown",t=>{if(!l){if(t.keyCode===f.Uz.ESCAPE)e.stopRenaming(!1);else if(t.keyCode===f.Uz.ENTER)e.stopRenaming(!0,p.current?.value,d);else{if(t.keyCode!==f.Uz.TAB)return(0,C.jr)(t,C.W0.NO),E.aH;t.preventDefault(),e.stopRenaming(!0,p.current?.value,d),t.shiftKey?e.prevNodeGuid&&e.startRenaming(e.prevNodeGuid):e.nextNodeGuid&&e.startRenaming(e.nextNodeGuid)}}}),S=E.iQ(e.recordingKey,"blur",()=>{e.stopRenaming(!0,p.current?.value,d)}),w=e.horizontalScrollEnabled&&!e.isFixedOnHScroll,k=o&&(0,g.m)().ce_il_root;return a.createElement(a.Fragment,null,k?a.createElement(U.Nz,{guid:e.guid,size:e.iconSize,navigateAndPanTo:e.navigateAndPanTo,isMeasurementNode:e.isMeasurementNode,rowSelected:e.isSelected}):a.createElement(er.Bf,{disabled:e.disabled,guid:e.guid,horizontalScrollEnabled:e.horizontalScrollEnabled,hovered:e.hovered,isDefaultResponsiveSet:e.isDefaultResponsiveSet,locked:e.locked,navigateAndPanTo:e.navigateAndPanTo,outOfView:e.outOfView,panelType:e.panelType,scrollLeft:e.scrollLeft,useUI3Icon:e.useUI3Icons}),(e.isThumbnail||e.isFavicon||e.isSocialImage)&&a.createElement(b.B,{"data-tooltip":e.isFavicon?(0,y.t)("fullscreen.object_row.favicon"):e.isSocialImage?(0,y.t)("fullscreen.object_row.social_image"):(0,y.t)("fullscreen.object_row.file_thumbnail"),"data-tooltip-show-above":!0,"data-tooltip-type":D.Ib.TEXT,className:z.V3,svg:ek.A}),e.isRenaming&&a.createElement(B.ks,{autoCapitalize:"off",autoCorrect:"off",className:m()(z.hF,e.inputTextOverridesClassName),innerRef:h,onBlur:S,onChange:_,onCompositionEnd:()=>i(!1),onCompositionStart:()=>i(!0),onKeyDown:x,spellCheck:!1,value:null!==t?t:e.name}),!e.isRenaming&&a.createElement("span",{className:m()(z.qg,e.staticTextOverridesClassName,{[v.s.justifyBetween.$]:r,[v.s.eventsAuto.$]:e.isFixedOnHScroll}),onDoubleClick:e.focusOnSingleClick?void 0:u,onClick:e.focusOnSingleClick?u:void 0,dir:"auto"},e.horizontalScrollEnabled&&a.createElement("div",{className:z.Xv,ref:e.layerNamePlaceholderRef},d),a.createElement("div",{className:m()(z._k,{[z.r]:!w||e.isHovered}),ref:e.layerNameRef},s&&"pending"!==s.state?s.name:d),e.explicitVariableModeNames&&e.explicitVariableModeNames.length>0&&a.createElement("div",{className:z.pS},a.createElement(G,{modeNames:e.explicitVariableModeNames})),!e.isHovered&&r&&a.createElement(eN,{isPrimaryBreakpoint:e.isPrimaryBreakpoint})))}let eR=a.memo(function(e){var t;p.sn.start("object-row-inner-render-timer");let{topLevelObjectRowHeight:n,nestedObjectRowHeight:l,rowSelectionGap:u,topLevelIconSize:g,nestedIconSize:f,boldLayerNames:b}=a.useContext(A.y0),y=(0,a.useRef)(null),[C,k]=(0,a.useState)(null),[T,I]=(0,a.useState)(null),R=(0,a.useCallback)(e=>{k(e)},[]),B=(0,a.useCallback)(e=>{I(e)},[]),F=(0,c.md)(S.eC),$=(t=e.guid,(0,c.md)(S.Fj).has(t)),G=(0,x.GS)(),U=(0,L._j)()&&G,[H,K]=(0,a.useState)(!1),[V,W]=(0,a.useState)(!1),Y=(0,M.Fk)((e,t)=>e.get(t)?.name??"",e.guid),q=e.displayName??Y,X=(0,M.Fk)((e,t,n)=>{if(!(0,d.k)().objects_panel_perf)return n;let a=e.get(t);return a&&a.isState?a.stateAbbreviatedName:null},e.guid,e.abbreviatedStateName),J=eI({abbreviatedStateName:X,name:q,shouldShowGuids:e.shouldShowGuids,guid:e.guid,isDefaultResponsiveSet:e.isDefaultResponsiveSet,isResponsiveSet:e.isResponsiveSet}),Z=(0,a.useCallback)(()=>{let e=y.current;return!!e&&e.scrollWidth>e.offsetWidth},[]),Q=(0,a.useCallback)(()=>{K(Z())},[K,Z]);(0,a.useEffect)(()=>{Q()},[Q]);let{onContextMenu:ee}=e,et=(0,E.rf)(e.recordingKey,"contextmenu",(0,a.useCallback)(t=>{ee&&ee(e.guid,t)},[ee,e.guid])),{onMouseEnter:en}=e,ea=(0,a.useCallback)(t=>{Q(),W(!0),en&&en(e.guid,t)},[en,e.guid,Q]),el=(0,a.useCallback)(()=>{W(!1)},[]),{lockMouseDown:er}=e,es=(0,a.useCallback)(t=>{er&&er(e.guid,t)},[er,e.guid]),{visibleMouseDown:eo}=e,ec=(0,a.useCallback)(t=>{eo&&eo(e.guid,t)},[eo,e.guid]),{onDragStartCallback:eu}=e,em=(0,a.useCallback)(t=>{t.dataTransfer.effectAllowed="none",null!=eu&&eu(e.guid,t)},[eu,e.guid]),{onDragOverCallback:ep}=e,eg=(0,a.useCallback)(t=>{null!=ep&&ep(e.guid,t)},[ep,e.guid]),{onDragDropCallback:ef}=e,eE=(0,a.useCallback)(t=>{null!=ef&&ef(e.guid,t)},[ef,e.guid]),{onDragEnterCallback:ev}=e,ey=(0,a.useCallback)(t=>{null!=ev&&ev(e.guid,t)},[ev,e.guid]),{onDragLeaveCallback:e_}=e,ex=(0,a.useCallback)(t=>{null!=e_&&e_(e.guid,t)},[e_,e.guid]),ek=(0,a.useCallback)(()=>(0,N.pr)(e.nodeMemoryUsage,e.rootMemoryUsage,!0),[e.nodeMemoryUsage,e.rootMemoryUsage]),eN=!e.visible||e.isAncestorHidden&&e.panelType!==L.g$.CodeComponent,eR=e.locked||e.isAncestorLocked,eM=(0,d.k)().ui3_left_panel_selection_height,eD=(e.level+3)*(0,h.jz)(eC.indentWidthWithMargin)+((0,h.jz)(eC.scrollBarYWidth)+(0,h.jz)(eC.trackPadding))>e.panelWidth+e.scrollLeft,eP=0===e.level,ej=(0,w.A0)(r.uQ6.LAYERS_PANEL_ACTION_ROW),eL=(0,o.UN)().get(e.guid),eO=ej&&eP&&V&&eL&&(0,w.sq)(eL),eB=c.md(j.r8(e.guid))?.state==="pending",eF=eP?n:l,ez=eP?g:f,e$={transform:`translate3d(0px, ${e.top}px, 0)`,height:eF,"--row-actions-width":eO?ew.gdM:ew.yj4,"--object-row-height":`${eF}px`,"--selection-height":`${eF-2*u}px`},eG=e.fixed&&0!==e.panelWidth,eU="FRAME"===e.nodeType,eH=m()({[z.nM]:!0,[z.M4]:eP,[z.Gt]:eU&&!(0,ed.Rt)(e)&&!e.resizeToFit&&!e.isStateGroup,[z.Os]:eU&&!(0,ed.Rt)(e)&&e.resizeToFit,[z.t$]:eU&&(0,ed.Rt)(e),[z.DT]:e.isStateGroup,[z.a6]:(0,s.MT)(e.nodeType),[z.uW]:"SECTION"===e.nodeType,[z.HR]:"SYMBOL"===e.nodeType,[z.rS]:"CODE_COMPONENT"===e.nodeType,[z.bY]:"CODE_INSTANCE"===e.nodeType,[z.$E]:e.componentLike,[z.qm]:e.layerLikeCodeNode,[z.xG]:"MODULE"===e.nodeType,[z.KJ]:"INSTANCE"===e.nodeType,[z.iE]:e.isStamp,[z.Zt]:"HIGHLIGHT"===e.nodeType,[z.HL]:"WIDGET"===e.nodeType||e.isWidgetSublayer,[z.j3]:e.isDescendantOfSymbol,[z.cb]:e.isDescendantOfInstance,[z.vp]:e.isDescendantOfModule,[z.dK]:e.mask,[z.i9]:(0,L.qW)(e.panelType),[z.Cr]:b,[z.Zu]:!!eG,[z.lh]:!!e.layerAbove,[z.yo]:e.isHovered,[z.wH]:e.isSelected,[z.ct]:e.isAncestorSelected,[z.r9]:eN,[z.xt]:eR,[z.sz]:e.hasChildren&&e.isExpanded,[z.uC]:eM&&e.isLayerAboveSelected&&e.isLayerBelowSelected,[z.ow]:eM&&e.isLayerAboveSelected&&!e.isLayerBelowSelected,[z.sc]:eM&&e.isLayerBelowSelected&&!e.isLayerAboveSelected}),eK=e.versionHistory?.activeId&&"current_version"===e.versionHistory.activeId,eV=e.showMemoryUsage&&e.showInFileMemoryPercentage&&!e.isRenaming&&eK,{registerWidth:eW}=(0,O.gz)(),eY=!!U&&!!eG,{observeWithResizeObserver:eq,unobserveWithResizeObserver:eX}=e;(0,a.useEffect)(()=>{if(U&&C&&T){if(eY)return;let t=()=>{let t=C.getBoundingClientRect().right-T.getBoundingClientRect().left+(0,h.jz)(eC.rowActionsWidth);eW(e.guid,t)};return t(),eq(C,t),eq(T,t),()=>{eX(C),eX(T)}}},[U,eY,C,T,e.guid,eW,eq,eX]),(0,a.useEffect)(()=>{let e="object-row-inner-render-timer",t=p.sn.get(e);t&&t.isRunning&&!t.isUnreliable&&p.sn.tryStop(e)});let eJ=a.createElement(a.Fragment,null,eO&&a.createElement(eb,{disabled:eB}),a.createElement(eh,{recordingKey:E.Pt(e,"lockIcon"),locked:e.locked,isAncestorLocked:e.isAncestorLocked,onMouseDown:es}),a.createElement(eS,{recordingKey:E.Pt(e,"visibleIcon"),visible:e.visible,isAncestorHidden:e.isAncestorHidden,onMouseDown:ec})),eZ=!e.hideRowActions&&!e.isRenaming&&!e.isReadOnly&&!e.isDragging&&!eD,eQ=a.createElement("div",{className:z.u4,"data-tooltip-type":D.Ib.TEXT,"data-tooltip":H?J:null,"data-tooltip-max-lines":4,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0,"data-tooltip-show-right":!0,"data-tooltip-text-left":!0,style:{width:eY?`${e.panelWidth}px`:`${e.panelWidth+e.scrollLeft}px`}},function(t=!1){return a.createElement(a.Fragment,null,a.createElement(ei,{currentPage:e.currentPage,disabled:eN,dispatch:e.dispatch,displayOrder:e.displayOrder,expandMouseDown:e.expandMouseDown,guid:e.guid,hasBullet:$,hasChildren:e.hasChildren,horizontalScrollEnabled:U,hovered:e.isHovered,indentsRefCallback:B,isExpanded:e.isExpanded,isLastMaskedAtLevels:e.isLastMaskedAtLevels,isMaskedAtLevels:e.isMaskedAtLevels,isMeasurementNode:t,level:e.level,locked:eR,mask:e.mask,outOfView:eD,recordingKey:t?void 0:E.Pt(e,"indents"),scrollLeft:e.scrollLeft}),a.createElement(eA,{...e,abbreviatedStateName:X,disabled:eN,horizontalScrollEnabled:U,hovered:e.isHovered,iconSize:ez,isFixedOnHScroll:eY,isMeasurementNode:t,layerNamePlaceholderRef:R,layerNameRef:y,locked:eR,name:q,outOfView:eD,recordingKey:t?void 0:e.recordingKey,scrollLeft:e.scrollLeft,useUI3Icons:G}),e.hasWarning&&a.createElement("div",{className:m()(v.s.flex.alignCenter.mr16.$,z.QW),"data-tooltip-type":D.Ib.TEXT,"data-tooltip":e.warningMessage,"data-tooltip-max-lines":4,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0},a.createElement(i.R,null)),eV&&a.createElement("span",{className:z.HY,dir:"auto"},ek()),eZ&&a.createElement("div",{className:z.cm},U?null:eJ))}());return a.createElement("div",{className:eH,"data-onboarding-key":e.guid===F&&e.isSelected&&(!e.isRowInView||e.isRowInView(e,T))?eT:void 0,"data-testid":e.hasChildren?"layer-row-with-children":"layer-row",draggable:!1,onContextMenu:et,onDragEnter:ey,onDragLeave:ex,onDragOver:eg,onDragStart:em,onDrop:eE,onMouseEnter:ea,onMouseLeave:el,style:e$},eZ&&U&&a.createElement("div",{className:z.cm,style:_.sx.absolute.wFull.eventsNone.$},a.createElement("div",{className:v.s.wFull.$}),a.createElement("div",{className:z.V0},a.createElement("div",{className:z.Hz},eJ))),a.createElement(P.e,{condition:eY,wrapper:e=>a.createElement("div",{style:_.sx.absolute.wFull.eventsNone.$},a.createElement("div",{className:z.n4},a.createElement("div",null,e)))},eQ))});eR.displayName="ObjectRow";let eM=a.memo(function(e){let t=(0,d.k)().objects_panel_perf,n=(0,l.d4)(n=>t?n.mirror.appModel.hoveredNode===e.guid:e.isHoveredAndOptimizePerfFlagDisabled),i=e.hasRefToHoveredDef||n||e.isTemporarilyHovered,r=(0,k.Z)("prototype_sections_zoom"),s=a.useCallback(e=>{r((0,I.QZ)({nodeId:e,alwaysPan:!0}))},[r]),o=(0,T.o3)(e.guid);return a.createElement(eR,{...e,isHovered:i,explicitVariableModeNames:o,navigateAndPanTo:s})})},427078:(e,t,n)=>{n.d(t,{n:()=>a});let a=24},657661:(e,t,n)=>{n.d(t,{X:()=>eP});var a=n(848318),l=n(716544),i=n(445777),r=n(133696),s=n(992277),o=n(741419),d=n(673906),c=n(952423),u=n(179703),m=n(157907),p=n(23459),h=n(536384),g=n.n(h),f=n(128080),E=n.n(f),b=n(277930),v=n(579020),y=n(702),_=n(818754),x=n(125899),S=n(857188),w=n(949658),C=n(831932),k=n(654104),T=n(502255),I=n(889132),N=n(701780),A=n(63571),R=n(575492),M=n(935529),D=n(790355),P=n(604613),j=n(881393),L=n(727341),O=n(697751),B=n(992444),F=n(577023),z=n(601412),$=n(449977),G=n(439984),U=n(328759),H=n(661780),K=n(273199),V=n(207715),W=n(166917);class Y{constructor(e,t,n,a,l={}){this.component=e,this.onMouseDown=t,this.onMouseMove=n,this.onMouseUp=a,this.options=l,this.oldTouch=null,this.draggingID=null,this.deferredDragStart=null,this.onTouchStart=e=>{if(e.stopPropagation(),null===this.draggingID&&e.touches.length>0){let t=e.touches[0];if(this.draggingID=t.identifier,document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onTouchEndOrCancel),document.addEventListener("touchcancel",this.onTouchEndOrCancel),this.options.delayInMS){let n=!1;if(this.deferredDragStart=a=>{if(n)return!1;let l=a.clientX-t.clientX,i=a.clientY-t.clientY;return!(10>Math.sqrt(l*l+i*i))&&(n=!0,!this.options.delayInMS&&(this.onMouseDown(this.mouseEvent("mousedown",e,t)),!0))},this.options.delayInMS){let a=this.deferredDragStart;setTimeout(()=>{this.deferredDragStart!==a||n||(this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t)))},this.options.delayInMS)}}else this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t))}},this.onTouchMove=e=>{if(e.stopPropagation(),null!==this.draggingID){for(let t of e.touches)if(t.identifier===this.draggingID){if(this.deferredDragStart){if(!this.deferredDragStart(t))break;this.deferredDragStart=null}e.preventDefault(),this.onMouseMove(this.mouseEvent("mousemove",e,t));break}}},this.onTouchEndOrCancel=e=>{e.stopPropagation(),null!==this.draggingID&&(this.draggingID=null,document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEndOrCancel),document.removeEventListener("touchcancel",this.onTouchEndOrCancel),this.deferredDragStart?this.deferredDragStart=null:this.onMouseUp(this.mouseEvent("mouseup",e,this.oldTouch)))}}mouseEvent(e,t,n){this.oldTouch=n;let a=new MouseEvent(e,{altKey:t.altKey,metaKey:t.metaKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});return Object.defineProperty(a,"target",{value:t.target}),Object.defineProperty(a,"currentTarget",{value:t.currentTarget}),a}}var q=n(262032),X=n(353304),J=n(828935),Z=n(83768),Q=n(442313),ee=n(180423),et=n(201494),en=n(326825),ea=n(162951),el=n(243973),ei=n(35315),er=n(680632),es=n(770526),eo=n(6760),ed=n(151144);function ec(){let{show:e,isShowing:t,complete:n,uniqueId:l}=(0,en.e)({overlay:ed.xtb,priority:ei.N.SECONDARY_MODAL}),i=el.y.isApple(),r=a.useMemo(()=>a.createElement(Z.S,{shortcut:i?"\u2303\u21E7A":"Ctrl+Alt+Shift+A"}),[i]);return(0,et.E)(l,ea.in,()=>{e({canShow:()=>!!(0,m.k)().ce_al_show_msal_onboarding})}),a.createElement(er.rq,{arrowPosition:eo.F_.LEFT_TITLE,description:(0,Q.tx)("fullscreen.msal_onboarding.body"),disableHighlight:!0,emphasized:!0,isShowing:t,onClose:n,onTargetLost:n,primaryCta:{label:(0,Q.tx)("general.got_it"),type:"button",onClick:n,variantOverride:"primary",ctaTrackingDescriptor:ee.c.GOT_IT},secondaryCta:{label:(0,Q.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/5731482952599#suggest",ctaTrackingDescriptor:ee.c.LEARN_MORE},targetKey:es.vx,title:a.createElement("p",{"data-testid":"msal-onboarding-title"},(0,Q.tx)("fullscreen.msal_onboarding.header_with_shortcut",{msalShortcut:r})),trackingContextName:"MSAL Onboarding Overlay"})}var eu=n(335062),em=n(60546),ep=n(814293),eh=n(252244),eg=n(385051),ef=n(17755),eE=n(156843),eb=n(622978);function ev({guid:e,objectRow:t,setRowWidth:n}){let l=(0,a.useRef)(null),[i,r]=(0,a.useState)(),{rowWidthsCache:s}=(0,eE.gz)();return(0,a.useEffect)(()=>{if(!l.current||!e)return;let t=s[e];void 0!==t&&(t!==i?.width||e!==i?.guid)&&r({width:t,guid:e})}),(0,a.useEffect)(()=>{i?.guid===e&&n({guid:e,width:i.width})},[i,e,n]),a.createElement("div",{ref:l,className:g()(ef.s.absolute.invisible.$,eb.Qr),"data-testid":"autoscroll-measurement-node"},t)}var ey=n(166365),e_=n(771430),ex=n(630701);function eS(e){let{top:t,width:n,guid:l,level:i,onMouseEnter:r,recordingKey:s}=e,{nestedObjectRowHeight:o}=a.useContext(K.y0),d=k.rf(s,"click",e=>{$.bd([l])}),c={transform:`translate3d(0px, ${t}px, 0)`,width:n,height:o},u={width:e_.iy*i*2,marginRight:1===i?e_.iy/2:0};return a.createElement("div",{className:"layer_expansion_row--layerExpansionRow--G8Twa object_row--row--HIYa5",style:c,onMouseDown:e=>e.stopPropagation(),onClick:d,onMouseEnter:r,role:"button",tabIndex:0},a.createElement("span",{className:"layer_expansion_row--layerExpansionIndent--Bg5Df object_row--indent--uZlad",style:u}),a.createElement("span",{className:"layer_expansion_row--iconWrapper--J3NJb object_row--iconWrapper--ivRSW"},a.createElement(ey.B,{svg:ex.A})),a.createElement("span",{className:"layer_expansion_row--rowText--yhMnt object_row--rowText--3qo7Q ellipsis--ellipsis--Tjyfa"},(0,Q.tx)("design_systems.component_properties.see_all_layers")))}var ew=n(427078);class eC extends k.o6{renderPlainIndents(e){let t=[];for(let n=0;n<e+1;n++)t.push(a.createElement("span",{key:n,className:eb.pZ}));return a.createElement("span",{className:eb.Wm},t)}render(){let e={transform:`translate3d(0px, ${this.props.top}px, 0)`,width:this.props.width,height:ew.n,"--selection-height":`${ew.n}px`,"--row-gap":"0px"},t=g()(eb.nM,eb.bV,{[eb.ct]:this.props.isParentSelected,[eb.j3]:this.props.isDescendantOfSymbol,[eb.cb]:this.props.isDescendantOfInstance,[eb.sc]:this.props.isParentSelected&&this.props.sectionHasChildren});return a.createElement("div",{className:t,style:e},this.renderPlainIndents(this.props.level),this.props.sectionType===o.KjJ.FIXED?(0,Q.t)("fullscreen.properties_panel.constraints_resizing_panel.fixed"):(0,Q.t)("fullscreen.properties_panel.scrolls"))}}eC.displayName="SectionRow";var ek=n(98582),eT=n(479760),eI=n(786175);let eN="objects_panel--dropTargetBox--4SX8i",eA=new w.V;function eR(e){return"object"===e.rowType?e.guid:"layer-expansion"===e.rowType?`expand-${e.containingPrimaryInstanceGUID}`:e.sectionId}class eM extends k.o6{constructor(e){super(e),this.state={scrollTop:0,scrollLeft:0,mouseDown:null,dropTarget:null,needsScrollLine:!1,rowToScrollToData:null},this.cachedAllRowData=[],this.topByGuid=Object.create(null),this.leftByGuid=Object.create(null),this.heightByGuid=Object.create(null),this.totalHeight=0,this.cachedAllObjectRowDataMap={},this.setNeedsScrollLine=e=>{this.setState({needsScrollLine:e>0})},this.rangeSelectAnchorNodeId=null,this.getScene=()=>this.props.sceneGraph||(0,u.UN)(),this.initializeRows=e=>{let t=this.getScene(),n=e.customRowBuilder?e.customRowBuilder():(0,ek.Sk)(t,e.topNodeFields,e.showImmutableFrameSublayers,e.temporarilyExpandedInstanceLayers,e.topLevelObjectRowHeight,e.nestedObjectRowHeight);this.topByGuid=n.topByGuid,this.leftByGuid=n.leftByGuid,this.heightByGuid=n.heightByGuid,this.sectionById=n.sectionById,this.totalHeight=n.totalHeight,this.cachedAllRowData=n.rowData,p.zl.set(eg.X,n.rowData.filter(e_.N1).some(e=>e.isExpanded&&e.hasChildren)),this.cachedAllObjectRowDataMap=n.rowData.filter(e_.N1).reduce((e,t)=>(e[t.guid]=t,e),{})},this.updateAllVisibleRowGuids=()=>{let e=[];for(let t of this.cachedAllRowData)(0,e_.N1)(t)&&e.push(t.guid);this.context.registerGuids(e)},this.justToggledExpandedGuid=null,this.anchorNodeId=null,this.topNodeDelta=0,this.lastCollapsedScrollPosition=null,this.scrollAfterNodeExpanded=!1,this.lastCollapsedGuid=null,this.hasCrossedDragThreshold=!1,this.onLeftPanelCollapsedChange=e=>{if(!e){let e=this.getTopSelectedNodeId();e&&this.scrollToNode({nodeId:e})}},this.scrollToNodeIdAfterUpdate=null,this.scrollToNode=({nodeId:e,forStackInsertion:t})=>{let n=this.topByGuid[e],a=void 0!==n,l=!this.props.horizontalScrollEnabled||this.state.rowToScrollToData?.guid===e;if(!a||!l){let t=this.getScene().get(e);t&&t.parentGuid&&$.hq(t.parentGuid),this.scrollToNodeIdAfterUpdate=e;return}let i=this.heightByGuid[e],r=!this.isVerticallyVisible(n,n+i),s=this.props.horizontalScrollEnabled&&this.shouldHorizontallyAutoscroll(e);(r||s)&&this.scrollNodeIntoView(e,{forStackInsertion:t})},this.recalculateLayout=()=>{this.windowInnerHeight=window.innerHeight,this.recalculateRequested=!1},this.recalculateRequested=!1,this.requestRecalculateLayout=()=>{this.recalculateRequested||requestAnimationFrame(this.recalculateLayout)},this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll=null,this.hasTrackedHScrollEvent=!1,this.onScroll=e=>{this.isScrolling=!0,this.nextScrollTop=e,null==this.frameRequestY&&(this.frameRequestY=requestAnimationFrame(this.setScrollTopState)),null!=this.scrollingTimeout&&clearTimeout(this.scrollingTimeout),this.scrollingTimeout=setTimeout(this.doneScrolling,50),this.props.onScroll(e),this.setNeedsScrollLine(e),p.zl.set(ep.uK,{autoScroll:!1})},this.onScrollLeftChanged=(e,t)=>{this.props.horizontalScrollEnabled&&(t||this.props.stopRenaming(!1),this.nextScrollLeft=e,null==this.frameRequestX&&(this.frameRequestX=requestAnimationFrame(this.setScrollLeftState)),this.hasTrackedHScrollEvent||((0,v.sx)("layers_horizontal_scroll"),this.hasTrackedHScrollEvent=!0))},this.doneScrolling=()=>{this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll&&(this.handleMouseEnterAfterScroll(),this.handleMouseEnterAfterScroll=null)},this.frameRequestY=null,this.frameRequestX=null,this.nextScrollTop=0,this.nextScrollLeft=0,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequestY=null},this.setScrollLeftState=()=>{this.setState({scrollLeft:this.nextScrollLeft}),this.frameRequestX=null},this.isNodeSticky=e=>((0,T.xO)(s.e.FIGJAM,this.props),e.parentGuid===this.props.currentPage&&("SYMBOL"===e.type||"FRAME"===e.type&&!e.resizeToFit)),this.isAncestorSticky=e=>{let t=this.getScene(),n=e.parentGuid?t.get(e.parentGuid):null;for(;n&&n.guid!==this.props.currentPage;){if(this.isNodeSticky(n))return!0;n=n.parentGuid?t.get(n.parentGuid):null}return!1},this.stickyHeaderGuid=null,this.lastStickyHeaderGuid=null,this.lastExpansionTarget=null,this.findStickyHeaderRowAndReplaceInVisibleRows=e=>{if(this.stickyHeaderGuid=null,(this.state.scrollTop>0||this.scrollAfterNodeExpanded)&&e.length>0){let t;let n=this.state.scrollTop,a=(e,t,n)=>{if("object"!==e.rowType)return!1;let a=this.findStickyHeader(e,t,n);if(a){let t=this.renderedVisibleRowProps.indexOf(e);t>=0?this.renderedVisibleRowProps[t]=a:this.renderedVisibleRowProps.push(a)}return!!a},l=null;for(let i=0;i<e.length;i++)if(0===(t=e[i]).level){if(l&&a(l,l.top,t.top)||t.top>n)return;l=t}(0,i.KF)(!!l,"has at least one top level section"),a(l,l.top,Number.POSITIVE_INFINITY)}},this.scrollNodeIntoView=(e,t)=>{let n=t&&t.fromAIRename||!1,a=t&&t.forStackInsertion||!1;if(null==this.topByGuid[e]||this.props.horizontalScrollEnabled&&this.shouldHorizontallyAutoscroll(e)&&this.state.rowToScrollToData?.guid!==e||!this.scrollContainerEl||!this.scrollContainer)return;let l=this.topByGuid[e],i=this.heightByGuid[e],r=this.state.scrollTop,s=this.scrollContainerHeight();if(this.stickyHeaderGuid===e){a&&this.scrollContainer.scrollTo(l-1);return}let o=this.getScene().get(e);if(!o)return;n||p.zl.set(ep.uK,{autoScroll:!1});let d=this.isAncestorSticky(o);if(d&&l<r+i?this.scrollContainer.scrollTo(l-i):!d&&l<r?this.scrollContainer.scrollTo(l):l+i>r+s&&this.scrollContainer.scrollTo(l-s/2),this.props.horizontalScrollEnabled&&this.shouldHorizontallyAutoscroll(e)&&this.state.rowToScrollToData?.guid===e&&this.state.rowToScrollToData?.width){let t=this.getNewHorizontalAutoscrollPosition(e,this.state.rowToScrollToData?.width);void 0!==t&&this.scrollContainer.scrollToLeft(t)}},this.rowContextMenu=(e,t)=>{if(this.props.onRowContextMenu){this.props.onRowContextMenu(e,t);return}let n=this.getScene().get(e);if(!n)return;(0,q.sp)(this.getScene(),this.props.sceneGraphSelection,n.guid)||this.updateSelection(n.guid);let{clientX:a,clientY:l}=t;this.props.dispatch(D.j7({type:P.Rb,data:{clientX:a,clientY:l}}))},this.rowContainerMouseDown=k.cZ(this,"mousedown",e=>{let t=this.guidAtMousePosition(e.clientY);if(!t||(e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&!this.props.renamingGuid&&document.activeElement.blur(),this.props.ignoreRightClickForSelection&&2===e.button))return;if((this.props.allowToggleSelection??!0)&&(0,S.Fo)(e)){this.toggleSelected(t);return}(0,m.k)().version_diffing&&this.props.editModeType===o.m1T.COMPARE_CHANGES&&o.glU.setActiveChange(t)&&this.props.showViewChangesNotification(t);let n=(0,r.IL)(this.props.sceneGraphSelection),a=null;if(n?a=n:this.rangeSelectAnchorNodeId&&(0,q.K3)(this.props.sceneGraphSelection,this.rangeSelectAnchorNodeId)&&(a=this.rangeSelectAnchorNodeId),(this.props.allowSelectRange??!0)&&e.shiftKey&&a){$.GL(a,t),B.Y5.commit();return}(0,q.sp)(this.getScene(),this.props.sceneGraphSelection,t)||(this.updateSelection(t),this.rangeSelectAnchorNodeId=t),(0,j.i)(e)||this.setState({mouseDown:new N.Mi(e.clientX,e.clientY)})},{recordMetadata:e=>{let t=this.guidAtMousePosition(e.clientY);return(0,i.KF)(!!t,"interaction test does not support rare case of no guid under mouse (empty layers panel?)"),{path:(0,e_.eT)(t,this.getScene()),clientX:e.clientX}},playbackMetadata:e=>{let t=(0,e_.g2)(e.path,this.getScene(),this.props.currentPage),n=this.topByGuid[t]+this.heightByGuid[t]/2;return{clientY:this.clientY(n),clientX:e.clientX}}}),this.onMouseMove=e=>{if(this.scrollContainer&&this.scrollContainerEl&&this.state.mouseDown&&!this.props.renamingGuid){this.state.mouseDown.distanceTo({x:e.clientX,y:e.clientY})>3&&(this.hasCrossedDragThreshold=!0);let t=this.relativeY(e.clientY),n=this.state.scrollTop,a=this.scrollContainerHeight();if(a>0){if(t<n){this.scrollContainer.scrollTo(n-(0,e_.bm)(n-t,this.props.topLevelObjectRowHeight));return}if(t>n+a){this.scrollContainer.scrollTo(n+(0,e_.bm)(t-n-a,this.props.topLevelObjectRowHeight));return}}let l=(0,e_.OL)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.heightByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,t,this.mouseOverStickyHeaderGuid(e.clientY),this.props.panelType??e_.g$.Object,this.props.topNodeFields,this.props.insertionLineBoxOffset);this.state.dropTarget&&l&&this.state.dropTarget.index!==l.index&&x.H.trigger(o.JA.SNAP),(this.hasCrossedDragThreshold||!l)&&(this.expandDropTargetIfNeeded(l,t),this.setState({dropTarget:l}))}},this.onMouseUp=k.cZ(this,"mouseup",e=>{let t=this.getScene(),n=!1;if(this.hasCrossedDragThreshold=!1,this.state.mouseDown&&!this.props.renamingGuid){if(n=!0,3>=this.state.mouseDown.distanceTo(new N.Mi(e.clientX,e.clientY))){if(!(0,j.i)(e)){let t=this.guidAtMousePosition(e.clientY);t?this.updateSelection(t):n=!1}}else if(!this.props.isReadOnly){let n=(0,e_.OL)(t,this.props.sceneGraphSelection,this.topByGuid,this.heightByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,this.relativeY(e.clientY),this.mouseOverStickyHeaderGuid(e.clientY),this.props.panelType??e_.g$.Object,this.props.topNodeFields,this.props.insertionLineBoxOffset);if(!n)return;let{parentGuid:a,index:l,section:i}=n,r=t.get(a);if(!r||void 0===l)return;let s=e.altKey,c=(0,e_.Lc)(r,l);s?d.l7.user("duplicate-selection",()=>$.kH(r.guid,c,i)):d.l7.user("reparent-selection",()=>$.Yu(r.guid,c,i)),$.hq(r.guid),o.Egt.clearTemporarilyExpanded(),B.Y5.commit()}}if(this.setState({mouseDown:null,dropTarget:null}),this.isDraggingToToggle&&(n=!0,this.isDraggingToToggle=null,B.Y5.commit()),!n)return k.aH},{recordMetadata:e=>{let t=this.getScene(),n=this.guidAtMousePosition(e.clientY),a=this.relativeY(e.clientY);(0,i.KF)(!!n,"interaction test does not support rare case of no guid under mouse (empty layers panel?)");let l=this.topByGuid[n],r=this.heightByGuid[n];return{path:(0,e_.eT)(n,t),treatAsEndOfClick:!!(this.state.mouseDown&&5>this.state.mouseDown.distanceTo(new N.Mi(e.clientX,e.clientY))),belowAll:a>l+r,clientX:e.clientX}},playbackMetadata:e=>{if(e.treatAsEndOfClick)return{clientX:this.state.mouseDown.x,clientY:this.state.mouseDown.y};{let t=(0,e_.g2)(e.path,this.getScene(),this.props.currentPage),n=this.topByGuid[t]+this.heightByGuid[t]/2;return e.belowAll&&(n+=this.heightByGuid[t]),{clientY:this.clientY(n),clientX:e.clientX}}}}),this.setRowToScrollToData=e=>{this.setState({rowToScrollToData:e})},this.getNewHorizontalAutoscrollPosition=(e,t)=>{let n=this.leftByGuid[e];if(void 0===n)return;let a=n-16;return this.isOutOfViewLeft(e)?Math.max(0,a):this.isOutOfViewRight(e)&&t?t-n>this.props.width?a:t-this.props.width:void 0},this.onScrollContainerMouseDown=()=>{$.wr(),B.Y5.commit()},this.scrollContainerRef=e=>{this.scrollContainer=e,this.scrollContainerEl=e?.getClipContainer()},this.containerMouseLeave=e=>{$.Uc(""),null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout)},this.expandMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n)return;t.stopPropagation(),(0,v.sx)("objects_panel_expand",{nonInteraction:0});let a=!n.isExpanded;t.altKey?$.sK(n.guid,a):(0,S.Fo)(t)&&!(0,r.Im)(this.props.sceneGraphSelection)?$.yF(n.guid,a):$.sq(n.guid,a),this.justToggledExpandedGuid=n.guid},this.isDraggingToToggle=null,this.lockMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.isReadOnly)return;t.stopPropagation();let a=!n.locked;this.isDraggingToToggle={locked:a},d.l7.user("set-locked",()=>{$.tU(n.guid,a,t.altKey)})},this.visibleMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.isReadOnly)return;t.stopPropagation();let a=!n.visible;this.isDraggingToToggle={visible:a},d.l7.user("set-visible",()=>{$.pr(n.guid,a,t.altKey)})},this.hoverToExpandGroupTimeout=null,this.rowMouseEnter=(e,t)=>{let n=this.getScene().get(e);if(!n)return;let a=()=>{if(this.isDraggingToToggle){let{locked:e,visible:t}=this.isDraggingToToggle;null!=e&&d.l7.user("set-locked",()=>(function(e,t,n){if(!e)return;let a=!1;ej(e,n,e=>{a=a||e.locked!==t,e.locked=t}),a&&O.wt.reportAnyPropertyChange(["locked"])})(n,e,!1)),null!=t&&d.l7.user("set-visible",()=>(function(e,t,n){if(!e)return;let a=!1;ej(e,n,e=>{a=a||e.visible!==t,e.visible=t}),a&&O.wt.reportAnyPropertyChange(["visible"])})(n,t,!1))}this.state.mouseDown||$.Uc(n.guid)};C.Ay.firefox&&this.isScrolling?this.handleMouseEnterAfterScroll=a:a()},this.onDragDrop=(e,t)=>{this.onMouseUp(t.nativeEvent)},this.onDragOver=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.onDragEnter=(e,t)=>{this.onMouseMove(t.nativeEvent),this.rowMouseEnter(e,t)},this.onDragLeave=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.renderedVisibleRowProps=[],this.touchAdapter=new Y(this,this.rowContainerMouseDown,this.onMouseMove,this.onMouseUp,{delayInMS:500}),this.getIsRowInView=(e,t)=>{if(!this.scrollContainer)return!0;let n=this.scrollContainer.getClipContainer().getBoundingClientRect();if(!t)return!0;let a=t.getBoundingClientRect();return e.fixed&&0!==this.props.width||a.top>=n.top&&a.bottom<=n.bottom},this.recalculateLayout(),this.initializeRows(this.props),this.scrollContainerInnerRef=a.createRef()}componentDidMount(){super.componentDidMount(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),window.addEventListener("resize",this.requestRecalculateLayout),B.Y5.fromFullscreen.on("scrollToNode",this.scrollToNode);let e=o.glU&&o.glU.getFirstSelectedNodeIdForCurrentPage();e&&this.scrollToNode({nodeId:e}),this.updateAllVisibleRowGuids(),this.props.scrollContainerInnerRef?.(this.scrollContainerInnerRef);let t="objects-panel-inner-render-timer",n=y.sn.get(t);n&&n.isRunning&&!n.isUnreliable&&y.sn.tryStop(t)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("resize",this.requestRecalculateLayout),B.Y5.fromFullscreen.removeListener("scrollToNode",this.scrollToNode)}updateSelection(e){this.props.onSelectionUpdated?this.props.onSelectionUpdated(e):((0,U.S)("panel"),$.tJ([e]),B.Y5.commit())}UNSAFE_componentWillUpdate(e,t){e.renamingGuid&&e.renamingGuid!==this.props.renamingGuid&&(this.scrollToNodeIdAfterUpdate=e.renamingGuid);let n=this.props.objectsPanelRowRebuildCounter!==e.objectsPanelRowRebuildCounter,a=this.props.customRowBuilder!==e.customRowBuilder;if((n||a||this.props.currentPage!==e.currentPage||this.props.showImmutableFrameSublayers!==e.showImmutableFrameSublayers||!E()(this.props.temporarilyExpandedInstanceLayers,e.temporarilyExpandedInstanceLayers)||!E()(this.props.temporarilyHoveredNodes,e.temporarilyHoveredNodes))&&this.initializeRows(e),this.anchorNodeId=null,this.topNodeDelta=0,n){if(null!==this.justToggledExpandedGuid)this.justToggledExpandedGuid===this.stickyHeaderGuid?(this.lastCollapsedScrollPosition=this.state.scrollTop,this.lastCollapsedGuid=this.justToggledExpandedGuid,this.scrollToNodeIdAfterUpdate=this.stickyHeaderGuid):this.justToggledExpandedGuid===this.lastCollapsedGuid&&this.justToggledExpandedGuid===this.lastStickyHeaderGuid&&this.topByGuid[this.lastStickyHeaderGuid]===this.state.scrollTop&&(this.scrollAfterNodeExpanded=!0),this.justToggledExpandedGuid=null;else{let e=!1;for(let t of this.renderedVisibleRowProps)if("object"===t.rowType&&this.scrollContainer&&(0,e_.U$)(t,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&this.props.sceneGraphSelection[t.guid]){e=!0;break}let t=null,n=null;for(let a of this.renderedVisibleRowProps)"object"===a.rowType&&this.scrollContainer&&(0,e_.U$)(a,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&((!e||this.props.sceneGraphSelection[a.guid])&&(null===t||t>a.top)&&(t=a.top,this.anchorNodeId=a.guid),(null===n||n>a.top)&&(n=a.top,this.topNodeDelta=this.topByGuid[a.guid]-a.top))}}}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),!this.scrollContainer)return;if(this.updateAllVisibleRowGuids(),this.scrollToNodeIdAfterUpdate){this.scrollNodeIntoView(this.scrollToNodeIdAfterUpdate);let e=void 0!==this.topByGuid[this.scrollToNodeIdAfterUpdate],t=!this.props.horizontalScrollEnabled||this.state.rowToScrollToData?.guid===this.scrollToNodeIdAfterUpdate;e&&t&&(this.scrollToNodeIdAfterUpdate=null)}else if(this.scrollAfterNodeExpanded)null!=this.lastCollapsedScrollPosition&&this.scrollContainer.scrollTo(this.lastCollapsedScrollPosition),this.scrollAfterNodeExpanded=!1,this.lastCollapsedScrollPosition=null,this.lastCollapsedGuid=null;else{let e=this.scrollContainer.getScrollTop()+this.topNodeDelta,t=!1;for(let n of this.renderedVisibleRowProps)if("object"===n.rowType&&n.guid===this.anchorNodeId){t=(0,e_.U$)(n,0,this.scrollContainer.getTrackHeight(),e);break}t?this.scrollContainer.scrollTo(e):this.anchorNodeId&&this.scrollNodeIntoView(this.anchorNodeId)}let n="objects-panel-inner-render-timer",a=y.sn.get(n);a&&a.isRunning&&!a.isUnreliable&&y.sn.tryStop(n)}getTopSelectedNodeId(){let e;let t=Object.keys(this.props.sceneGraphSelection),n=1/0;for(let a of t){let t=this.topByGuid[a];t<n&&(n=t,e=a)}return e}findStickyHeader(e,t,n){let a=this.state.scrollTop,l=this.getScene().get(e.guid);if(!l||!e.hasChildren||!(e.isExpanded||e.isTemporarilyExpanded))return null;let i=t<=a&&n>a+e.height,r=n>a&&n<=a+e.height;return(this.scrollAfterNodeExpanded||i||r)&&this.isNodeSticky(l)?i?(this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0}):r?{...e,top:n-e.height,layerAbove:!0}:this.scrollAfterNodeExpanded&&e.guid===this.lastStickyHeaderGuid?(this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0}):null:null}expandDropTargetIfNeeded(e,t){let n=null;if(e&&"sticky"!==e.parentTop){let a=this.getScene().get(e.parentGuid);(0,i.KF)(!!a,"parentGuid should point to a valid node");let l=this.heightByGuid[e.parentGuid],r=t>e.parentTop+l/3&&t<e.parentTop+2*l/3;a.uiOrderedChildren.length&&r&&(n=a.guid)}this.lastExpansionTarget!==n&&(this.lastExpansionTarget&&null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout),n&&(this.hoverToExpandGroupTimeout=setTimeout(()=>{this.state.mouseDown&&$.Ir(n,!0)},1e3)),this.lastExpansionTarget=n)}toggleSelected(e){this.props.sceneGraphSelection[e]?$.D$([e]):($.Dh([e]),this.rangeSelectAnchorNodeId=e),B.Y5.commit()}relativeY(e){let t=(0,I.bG)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e-t+this.state.scrollTop}clientY(e){let t=(0,I.bG)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e+t-this.state.scrollTop}isVerticallyVisible(e,t){if(!this.scrollContainerEl)return!0;let n=this.state.scrollTop,a=this.scrollContainerEl.getBoundingClientRect().height+this.state.scrollTop;return n<e&&t<a}isOutOfViewLeft(e){let t=this.leftByGuid[e];return void 0!==t&&t<this.state.scrollLeft-50}isOutOfViewRight(e){let t=this.leftByGuid[e];return void 0!==t&&t+(0,_.jz)(eI.indentWidth)>this.state.scrollLeft+this.props.width-50}shouldHorizontallyAutoscroll(e){return this.props.renamingGuid!==e&&(this.isOutOfViewLeft(e)||this.isOutOfViewRight(e))}guidAtMousePosition(e){return this.mouseOverStickyHeaderGuid(e)||(0,e_.GN)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.heightByGuid,this.relativeY(e))}mouseOverStickyHeaderGuid(e){return this.scrollContainerEl&&e-this.scrollContainerEl.getBoundingClientRect().top<this.props.topLevelObjectRowHeight?this.stickyHeaderGuid:null}computeStackOutlineHeight(e,t,n,a){return"sticky"===e?Math.min(t-n,a):Math.min(t-e,a-(e-n))}scrollContainerHeight(){return this.scrollContainerEl?this.scrollContainerEl.clientHeight:0}renderDropTarget(e){let t=null;if(null!=e.parentTop){let n=this.scrollContainerHeight(),l=e.bottomForCanvasStackReparenting,i=this.cachedAllObjectRowDataMap[e.parentGuid].height,r="sticky"===e.parentTop||this.stickyHeaderGuid===e.parentGuid;l&&n&&(i=this.computeStackOutlineHeight(r?"sticky":e.parentTop,l,this.state.scrollTop,n)),t=r?a.createElement("div",{key:"drop-target-box","data-testid":"drop-target-box",className:eN,style:{position:"sticky",width:this.props.width,height:i,zIndex:eT.Wb}}):a.createElement("div",{key:"drop-target-box","data-testid":"drop-target-box",className:eN,style:{transform:`translate3d(0px, ${e.parentTop}px, 0)`,height:i}})}let n=null;return null!=e.lineTop&&(n=a.createElement("div",{key:"drop-target-line","data-testid":"drop-target-line",className:"objects_panel--dropTargetLine--vmN9u",style:{marginLeft:`${e.lineIndent?e.lineIndent:0}px`,transform:`translate3d(0px, ${0===e.lineTop?0:e.lineTop-1}px, 0)`,transition:"margin-left 150ms 0ms"}})),[t,n]}onContextMenu(e){e.stopPropagation(),e.preventDefault()}hasAtLeastOneRefToHoveredDefId(e){if(!this.props.hoveredPropDef||!this.props.hoveredPropDef.nodeIDs?.length||!this.props.hoveredPropDef.defID)return!1;let t=e.containingSymbolId;if(!t||!this.props.hoveredPropDef.nodeIDs.includes(t))return!1;for(let t of Object.values(e.propRefs))if(t.isLinked&&t.explicitDefID===this.props.hoveredPropDef.defID)return!0;return!1}renderObjectRow(e,t,n,l){let i=t.getNode(e.guid);if(!i||!i.parentGuid)return null;let r=t.getAncestorInfo(i.parentGuid),s=t.getMaskInfo(e.guid),o=null!=e.isSelected?e.isSelected:(0,q.K3)(this.props.sceneGraphSelection,e.guid);if(!r||!s)return null;let d=(r.isAncestorSelected||o)&&!r.isAncestorHidden&&this.hasAtLeastOneRefToHoveredDefId(i),u=!!e.prevNodeGuid&&t.getAncestorInfo(e.prevNodeGuid).isAncestorSelected,p=(!!e.prevNodeGuid&&(0,q.K3)(this.props.sceneGraphSelection,e.prevNodeGuid)||u)&&ek.OZ(this.cachedAllRowData)?.guid!==e.guid,h=!!e.nextNodeGuid&&t.getAncestorInfo(e.nextNodeGuid).isAncestorSelected,g=("FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===i.scrollBehavior||r.isAncestorFixed)&&r.isAncestorSelected,f=(!!e.nextNodeGuid&&(0,q.K3)(this.props.sceneGraphSelection,e.nextNodeGuid)||h)&&ek.w6(this.cachedAllRowData)?.guid!==e.guid,E=(0,m.k)().objects_panel_perf?null:i.isState?i.stateAbbreviatedName:null;return a.createElement(es.oo,{key:eA.getKeyForId(e.guid),isReadOnly:this.props.isReadOnly,...e,abbreviatedStateName:E,booleanOperation:i.booleanOperation,componentLike:(i.isCodeInstance||i.isCodeFile)&&!i.isLayerLikeCodeNode,cornerRadius:i.cornerRadius,currentPage:this.props.currentPage,dispatch:this.props.dispatch,displayOrder:r.childrenDisplayOrder,expandMouseDown:this.expandMouseDown,hasChildren:i.isExpandable||e.hasChildren||(0,X.vo)(i,this.getScene()),hasRefToHoveredDef:d,hideRowActions:this.props.hideRowActions,isAncestorHidden:r.isAncestorHidden,isAncestorLocked:r.isAncestorLocked,isAncestorSelected:!e.ignoreAncestorSelection&&r.isAncestorSelected,isDefaultResponsiveSet:this.props.topNodeFields?.defaultResponsiveSetId===e.guid,isDragging:!!this.state.dropTarget,isExpanded:e.isExpanded||e.isTemporarilyExpanded,isFavicon:this.props.faviconGuid===e.guid,isGIF:i.hasEnabledAnimatedPaint,isHoveredAndOptimizePerfFlagDisabled:this.props.hoveredNodeIfOptimizePerfDisabled===e.guid,isLastMaskedAtLevels:s.isLastMaskedAtLevels,isLayerAboveSelected:p,isLayerBelowSelected:f||g,isMaskedAtLevels:s.isMaskedAtLevels,isPrimaryBreakpoint:i.isPrimaryResponsiveNode,isRenaming:this.props.renamingGuid===e.guid,isResponsiveSet:i.isResponsiveSet,isRowInView:n,isSelected:o,isSocialImage:this.props.socialImageGuids?.split(",").includes(e.guid),isStamp:(0,c.GI)(i),isState:i.isState,isStateGroup:i.isStateGroup,isStaticImage:i.hasEnabledStaticImagePaint,isTemporarilyHovered:this.props.temporarilyHoveredNodes.includes(e.guid),isThumbnail:this.props.thumbnailGuid===e.guid,isWidgetSublayer:!!i.isInWidget,layerChangeStatus:i.nodeChangeStatus,layerLikeCodeNode:i.isLayerLikeCodeNode,lockMouseDown:this.lockMouseDown,locked:i.locked,mask:i.mask,nodeMemoryUsage:i.nodeMemoryUsage,nodeType:i.type,objectsPanelThumbnailId:i.objectsPanelThumbnailId,observeWithResizeObserver:this.props.observeWithResizeObserver,onContextMenu:this.rowContextMenu,onDragDropCallback:this.onDragDrop,onDragEnterCallback:this.onDragEnter,onDragLeaveCallback:this.onDragLeave,onDragOverCallback:this.onDragOver,onMouseEnter:this.rowMouseEnter,panelType:this.props.panelType??e_.g$.Object,panelWidth:this.props.width,recordingKey:l?void 0:e.recordingKey,renderResourceUse:this.props.renderResourceUse,resizeToFit:i.resizeToFit,rootMemoryUsage:i.rootMemoryUsage,scrollDirection:i.scrollDirection,scrollLeft:this.state.scrollLeft,shouldShowGuids:this.props.shouldShowGuids,showInFileMemoryPercentage:this.props.showInFileMemoryPercentage,showMemoryUsage:this.props.showMemoryUsage,stackMode:i.stackMode,startRenaming:this.props.startRenaming,stopRenaming:this.props.stopRenaming,unobserveWithResizeObserver:this.props.unobserveWithResizeObserver,userId:this.props.userId,versionHistory:this.props.versionHistory,visible:i.visible,visibleMouseDown:this.visibleMouseDown})}renderLayerExpansionRow(e){let t=eA.getKeyForId(eR(e)),n=this.props.width+(this.props.horizontalScrollEnabled?this.state.scrollLeft:0);return a.createElement(eS,{key:t,top:e.top,width:n,guid:e.containingPrimaryInstanceGUID,level:e.level,onMouseEnter:()=>$.Uc(""),dispatch:this.props.dispatch,recordingKey:k.Pt(this.props,"layerExpansion",e.containingPrimaryInstanceGUID)})}renderSectionHeader(e){let t=this.sectionById[e.sectionId],n=t&&(0,q.sp)(this.getScene(),this.props.sceneGraphSelection,t.parentGuid),l=!0;if(t?.parentGuid&&t?.type!==o.KjJ.FIXED){let e=this.props.sceneGraph.get(t?.parentGuid);e&&e.fixedChildrenCount===e.uiOrderedChildren.length&&(l=!1)}let i=Math.max(this.props.horizontalScrollEnabled?this.props.scrollWidth:this.props.width,this.props.width);return a.createElement(eC,{key:eA.getKeyForId(e.sectionId),...e,width:i,isParentSelected:n,sectionHasChildren:l,dispatch:this.props.dispatch})}render(){y.sn.start("objects-panel-inner-render-timer");let e=this.renderedVisibleRowProps,t=this.cachedAllRowData||[];for(let n of(this.renderedVisibleRowProps=(0,e_.Uw)(t,this.windowInnerHeight,this.state.scrollTop),this.findStickyHeaderRowAndReplaceInVisibleRows(t),e))(0,e_.Mq)(n,this.windowInnerHeight,this.state.scrollTop)||eA.freeKeyForId(eR(n));this.renderedVisibleRowProps.sort((e,t)=>eA.getKeyForId(eR(e))-eA.getKeyForId(eR(t)));let n=this.props.nodeInfoCache||new ek.nV(this.getScene(),this.props.sceneGraphSelection),l=[];for(let e of this.renderedVisibleRowProps)"object"===e.rowType?l.push(this.renderObjectRow(e,n,this.getIsRowInView)):"layer-expansion"===e.rowType?l.push(this.renderLayerExpansionRow(e)):l.push(this.renderSectionHeader(e));var i=null;if(this.scrollToNodeIdAfterUpdate){let e=this.cachedAllObjectRowDataMap[this.scrollToNodeIdAfterUpdate];void 0!==e&&(0,e_.N1)(e)&&(i=this.renderObjectRow(e,n,this.getIsRowInView,!0))}if(!this.props.hideCanvasDropTargets&&this.props.reparentIntoStackInfo&&this.props.sceneGraph){let e=this.props.reparentIntoStackInfo.indexInParent,t=this.props.reparentIntoStackInfo.parentGuid,n=this.props.sceneGraph.get(t);n&&l.push(...this.renderDropTarget((0,e_.Gs)(n,this.topByGuid,this.heightByGuid,this.props.sceneGraph,this.totalHeight,this.props.insertionLineBoxOffset,e)))}else!this.props.isReadOnly&&this.state.dropTarget&&l.push(...this.renderDropTarget(this.state.dropTarget));let r=this.stickyHeaderGuid||!this.state.needsScrollLine?"objects_panel--scrollContainer--h6khG":"objects_panel--scrollContainerWithBorder--SR2sm objects_panel--scrollContainer--h6khG",s={width:Math.max(this.props.scrollWidth??0,this.props.width),height:this.totalHeight,"--row-gap":`${this.props.rowSelectionGap}px`};return a.createElement(a.Fragment,null,a.createElement(ev,{objectRow:i,setRowWidth:this.setRowToScrollToData,guid:this.scrollToNodeIdAfterUpdate}),a.createElement(e_.M3,{selection:this.props.sceneGraphSelection,getNode:function(e){return n.getNode(e)??null}}),a.createElement(R.P,{ref:this.scrollContainerRef,className:g()(r,{"objects_panel--hasPending--0IO3j":this.props.hasPending,"objects_panel--reserveBottomHeight--yfmtq":this.props.reserveBottomHeight}),dataOnboardingKey:this.props.isUI3?void 0:eu.m4,enableOverscroll:!0,horizontalScrollBarEnabled:this.props.horizontalScrollEnabled,initialScrollTop:this.props.initialScrollTop,minContentWidth:this.props.horizontalScrollEnabled?this.props.width:void 0,onContextMenu:this.onContextMenu,onMouseDown:this.onScrollContainerMouseDown,onScroll:this.onScroll,onScrollLeftChanged:this.onScrollLeftChanged,recordingKey:k.Pt(this.props,"scrollContainer"),scrollContainerRef:this.scrollContainerInnerRef,width:this.props.width},a.createElement(eh.jq,{onLeftPanelCollapsedChange:this.onLeftPanelCollapsedChange}),a.createElement(A.V,null,a.createElement("div",{className:g()("objects_panel--rowContainer--03VQD",{"objects_panel--horizontalScrollBarPadding--JfnK4":this.props.horizontalScrollEnabled}),style:s,onMouseDown:this.rowContainerMouseDown,onTouchStart:this.touchAdapter.onTouchStart,onMouseLeave:this.containerMouseLeave,"data-testid":"objects-panel"},l))))}}function eD(e){let t=(0,l.wA)(),n=(0,V.J2)((0,F.UK)().showImmutableFrameSublayers),i=(0,V.ut)(o.Ez5?.uiState().reparentIntoStackInfo,null),r=(0,V.J2)(o.Ez5.uiState().renderResourceUse),s=(0,V.J2)(o.Ez5.uiState().showMemoryUsage),d=(0,V.J2)(o.Ez5.uiState().hoveredComponentPropDef),c=(0,V.J2)(o.Ez5.uiState().showInFileMemoryPercentage),h=(0,V.J2)(o.Ez5.canvasViewState().temporarilyHoveredNodes),g=(0,H.TA)(),f=(0,l.d4)(e=>e.mirror.sceneGraphSelection),E=(0,l.d4)(e=>e.mirror.objectsPanelRowRebuildCounter),v=(0,l.d4)(e=>e.mirror.appModel.temporarilyExpandedInstanceLayers),y=(0,l.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),_=(0,em.ks)(),x=(0,M._I)(),S=(0,z.E)(),w=(0,u.UN)(),C=(0,W.wA)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,children:n.uiOrderedChildren,defaultResponsiveSetId:n.defaultResponsiveSetId}:null},e.currentPage),k=(0,eE.el)(),{topLevelObjectRowHeight:T,nestedObjectRowHeight:I,rowSelectionGap:N,insertionLineBoxOffset:A}=a.useContext(K.y0);(0,e_.SV)();let[R,D]=(0,p.fp)(eg.C),P=(0,b.A)(D,200),j=(0,W.Fk)(e=>e.getCurrentPage()?.responsiveSetSettings?.faviconID),L=(0,W.Fk)(e=>{let t=e.getCurrentPage();return(0,m.k)().derived_prop_slow_selectors?(t?t.socialImageGuidsOnPage:[]).join(","):[t?.responsiveSetSettings?.socialImageID,...t?.childrenNodes.map(e=>"RESPONSIVE_SET"===e.type&&e.responsiveSetSettings?.socialImageID)||[]].filter(e=>"string"==typeof e).join(",")}),O=(0,V.J2)((0,F.UK)().showGuids),B=(0,G._Z)().isLoading,$=(0,a.useMemo)(()=>(0,m.k)().objects_panel_perf?new ek.nV(w,f):null,[w,E,f]),U=(0,m.k)().objects_panel_perf,Y=(0,l.d4)(e=>U?void 0:e.mirror.appModel.hoveredNode),q=a.useRef(null),X=a.useRef(new Map);a.useEffect(()=>{let e=X.current;return q.current=new ResizeObserver(t=>{for(let n of t){let t=e.get(n.target);t?.(n)}}),()=>{q.current?.disconnect(),e.clear()}},[]);let Z=a.useCallback((e,t)=>{!e||X.current.has(e)||(X.current.set(e,t),q.current?.observe(e))},[]),Q=a.useCallback(e=>{e&&(q.current?.unobserve(e),X.current.delete(e))},[]);if(_&&!x)return null;let ee=void 0===e.topNodeFields?C:e.topNodeFields;return a.createElement(a.Fragment,null,a.createElement(eM,{...e,currentPage:e.currentPage,dispatch:t,editModeType:y,faviconGuid:j,hasPending:B,horizontalScrollEnabled:e.horizontalScrollEnabled,hoveredNodeIfOptimizePerfDisabled:Y,hoveredPropDef:d,initialScrollTop:R,insertionLineBoxOffset:A,nestedObjectRowHeight:I,nodeInfoCache:$,objectsPanelRowRebuildCounter:E,observeWithResizeObserver:Z,onScroll:P,recordingKey:e.recordingKey??"objectsPanel",renderResourceUse:r,reparentIntoStackInfo:i,reserveBottomHeight:e.reserveBottomHeight,rowSelectionGap:N,sceneGraph:w,sceneGraphSelection:f,scrollWidth:e.horizontalScrollEnabled?k:void 0,shouldShowGuids:O,showImmutableFrameSublayers:n,showInFileMemoryPercentage:c,showMemoryUsage:s,showViewChangesNotification:S,socialImageGuids:L,temporarilyExpandedInstanceLayers:v,temporarilyHoveredNodes:h,topLevelObjectRowHeight:T,topNodeFields:ee,unobserveWithResizeObserver:Q,userId:g??void 0}),a.createElement(J.p,{featureFlag:"auto_auto_layout"},a.createElement(ec,null)))}function eP(e){let t=(0,L.GS)(),n=(0,e_._j)()&&t;return a.createElement(eE.Rp,null,a.createElement(eD,{...e,horizontalScrollEnabled:n}))}function ej(e,t,n){if(n(e),t)for(let t of e.uiOrderedChildren)ej((0,u.UN)().get(t),!0,n)}eM.displayName="ObjectsPanelView",eM.contextType=eE.$V},454272:(e,t,n)=>{n.d(t,{Cg:()=>o,UA:()=>d,fr:()=>r,uF:()=>i,ym:()=>s});var a=n(818754),l=n(27776);let i=40,r=(0,a.jz)(l.xM9),s=(0,a.jz)(l.M$q),o=(0,a.jz)(l.MGP),d=8},606120:(e,t,n)=>{n.d(t,{B:()=>s});var a=n(848318),l=n(536384),i=n.n(l),r=n(212974);function s({children:e,hasScrollLine:t,onClick:n}){return a.createElement("div",{className:i()(r.kL,{[r.to]:t}),onClick:n},e)}},47296:(e,t,n)=>{n.d(t,{H:()=>i});var a=n(848318),l=n(584305);function i({children:e,dataOnboardingKey:t}){return a.createElement("div",{className:"header_text--headerText--ZXIeN",onContextMenu:l.jo,"data-onboarding-key":t},e)}},520932:(e,t,n)=>{n.d(t,{e:()=>p,i:()=>m});var a=n(848318);if(443==n.j)var l=n(452551);var i=n(566699),r=n(882439),s=n(442313),o=n(326971),d=n(503024);if(443==n.j)var c=n(954184);if(443==n.j)var u=n(546131);function m({onClick:e,recordingKey:t,tooltipText:n}){return a.createElement(r.Me,{recordingKey:t,"aria-label":n,onClick:e,trackingProperties:{text:"Add new page"},htmlAttributes:{"data-testid":"new-page-button","data-tooltip":n,"data-tooltip-type":d.Ib.TEXT,"data-tooltip-show-above":!0}},a.createElement(i.U,{svg:c.A,fallbackSvg:u.A},a.createElement(l.x,null)))}function p({recordingKey:e}){let t=(0,o.rE)();return a.createElement(m,{onClick:()=>t(null),recordingKey:e,tooltipText:(0,s.t)("fullscreen.pages_panel.add_new_page")})}},159140:(e,t,n)=>{n.d(t,{t:()=>k});var a=n(848318),l=n(321508),i=n(76925),r=n(452551),s=n(404827),o=n(741419),d=n(654104),c=n(166365),u=n(566699),m=n(17755),p=n(442313),h=n(235441),g=n(535650),f=n(326971),E=n(376780),b=n(503024),v=n(3418),y=n(246633);let _="new_page_dropdown--newPageIcon--R2RXS";var x=n(769773),S=n(954184),w=n(546131),C=n(871428);function k({recordingKey:e}){let{Dropdown:t,toggleDropdown:n,isDropdownShown:k,dropdownTargetRef:T}=(0,v.B)("newPageDropdown"),I=(0,h.lg)(),N=(0,g.Te)(),A=(0,f.rE)();if(!N)return null;let R=[{displayText:(0,p.t)("fullscreen.pages_panel.page_dropdown_new"),optionHeight:24,editorType:null,disabled:!0},{displayText:(0,p.t)("fullscreen.pages_panel.design_page"),optionHeight:24,editorType:E._Y.DESIGN,icon:a.createElement("div",{className:_},a.createElement(l.k,null)),callback:()=>A(o._YF.DESIGN)},{displayText:(0,p.t)("fullscreen.pages_panel.figjam_page"),optionHeight:24,editorType:E._Y.WHITEBOARD,icon:a.createElement("div",{className:_},a.createElement(c.B,{svg:C.A})),callback:()=>A(o._YF.WHITEBOARD)},{displayText:(0,p.t)("fullscreen.pages_panel.slide_deck"),optionHeight:24,editorType:E._Y.SLIDES,icon:a.createElement("div",{className:_},a.createElement(i.l,null)),callback:()=>A(o._YF.SLIDES)}],M=48;for(let e=0;e<R.length;e++)if(R[e].editorType===I){M+=24*e;break}return a.createElement(a.Fragment,null,a.createElement("div",{className:m.s.absolute.w8.h8.$,ref:T,style:{bottom:`${M}px`,right:"42px"}}),a.createElement(y.K0,{className:"new_page_dropdown--newPageButton--sYJsl",recordingKey:d.Pt(e,"newPageDropdown"),"data-tooltip-type":b.Ib.TEXT,"data-tooltip":(0,p.t)("fullscreen.pages_panel.add_new_page"),"data-tooltip-show-above":!0,onMouseDown:n},a.createElement("div",{className:"new_page_dropdown--newPageIconsContainer--pzY38"},a.createElement(u.U,{svg:S.A,fallbackSvg:w.A},a.createElement(r.x,null)),a.createElement("div",{className:"new_page_dropdown--newPageChevron--N0hv3"},a.createElement(u.U,{svg:x.A},a.createElement(s.r,null))))),k&&a.createElement(t,{minWidth:160,items:R,showPoint:!0}))}},473431:(e,t,n)=>{n.d(t,{k3:()=>h,q0:()=>g});var a=n(848318),l=n(23459),i=n(463117),r=n(397579),s=n(359480),o=n(889132),d=n(727341),c=n(792478),u=n(273199),m=n(454272),p=n(837913);function h({initialHeight:e,numberOfPages:t,upsellHeight:n,panelHeadersHeight:l,showingExtraControls:c,scrollContainerInnerRef:u,filterState:h,onHeightChange:f}){let[E,b]=(0,a.useState)(void 0),v=(0,a.useRef)(!1),{windowInnerHeight:y}=(0,s.l)(),_=(0,a.useCallback)(function(e){b(e),f?.(e)},[f]);(0,a.useLayoutEffect)(()=>{void 0===e||v.current||(b(e),v.current=!0)},[e]);let x=function({numberOfPages:e,upsellHeight:t,panelHeadersHeight:n,showingExtraControls:l,windowInnerHeight:i}){let r=(0,d.GS)();return(0,a.useMemo)(function(){let a=e*m.fr;return a=Math.ceil(a/m.fr)*m.fr+t+(r?m.UA:m.fr/2),l&&(a+=m.fr),Math.min(a,Math.round(.25*(i-(0,o.bG)()-m.Cg-n)))},[r,n,t,i,e,l])}({numberOfPages:t,upsellHeight:n,panelHeadersHeight:l,showingExtraControls:c,windowInnerHeight:y}),S=g({scrollContainerInnerRef:u,windowInnerHeight:y}),w=E?S(E):x;return function({filterState:e,computedHeight:t,defaultHeight:n,setHeight:l}){let s=(0,r.ZC)(t),o=(0,i.F)({previousComputedHeight:s,defaultHeight:n,setHeight:l});(0,a.useLayoutEffect)(()=>{if(void 0===e)return;let{previousComputedHeight:t,defaultHeight:n,setHeight:a}=o.current;t&&a(e===p.m.ALL?Math.max(t,n):Math.min(t,n))},[e,o])}({filterState:h,computedHeight:w,defaultHeight:x,setHeight:_}),{height:w,setHeight:_,defaultHeight:x}}function g({scrollContainerInnerRef:e,windowInnerHeight:t}){let n=(0,d.GS)(),{topLevelObjectRowHeight:l}=a.useContext(u.y0);return(0,a.useCallback)(function(a){return Math.max(1.5*m.fr,Math.min(a,t-(e.current?.getBoundingClientRect().top??175)-(1.5*l+(n?m.uF+m.ym:0))))},[n,e,t,l])}(0,c.Wh)(()=>(0,l.eU)(null))},837913:(e,t,n)=>{n.d(t,{m:()=>a});var a=(e=>(e.FILTERED="filtered",e.ALL="all",e))(a||{})},884055:(e,t,n)=>{n.d(t,{g:()=>r});var a=n(848318),l=n(411132),i=n(649372);function r(e){return a.createElement("div",{className:"pages_panel_chevron--chevron--3E6os","data-show-on-hover":e.isExpanded||void 0},e.isExpanded?a.createElement(l.O,null):a.createElement(i.k,null))}},134100:(e,t,n)=>{n.d(t,{J:()=>x});var a=n(848318),l=n(376025),i=n(157907),r=n(536384),s=n.n(r),o=n(654104),d=n(17755),c=n(119699),u=n(584305),m=n(326971),p=n(60546),h=n(21783),g=n(606120),f=n(47296),E=n(520932),b=n(159140),v=n(884055);let y="ui3_header_row--toggleButton--hYOqV",_="ui3_header_row--isHidden--IIOWY";function x({isReadOnly:e,isPagesOpen:t,isComparingChanges:n,hasMultiplePageTypes:r,hasScrollLine:x,onClickNewPage:S,onTogglePages:w,onCanvasSearch:C,onPageContextMenu:k,recordingKey:T,title:I,tooltipText:N}){let A=(0,m.dh)(),R=(0,m.nn)(),M=(0,p.ks)(),D=(0,c.l7)(),P=M||D,j=r||(0,i.k)().interop_pages,L=(e||P)&&!!C,O=(0,a.useCallback)(e=>{(0,u.jo)(e),t||k?.({nodeId:A,clientX:e.clientX,clientY:e.clientY})},[k,t,A]);return a.createElement(g.B,{onClick:e?w:void 0,hasScrollLine:x},L?a.createElement(f.H,null,a.createElement(l.E,{onClick:w,className:s()(y),htmlAttributes:{onContextMenu:O},recordingKey:o.Pt(T,"collapsedRow")},a.createElement("span",{className:s()("ui3_header_row--pageExpandToggle--jZKwE",{[_]:D})},a.createElement(v.g,{isExpanded:t})),a.createElement("span",{className:"ui3_header_row--pageTitle--N3-To ellipsis--ellipsis--Tjyfa","data-onboarding-key":"pages-panel-toggle"},t?a.createElement("span",null,I):R||"")),a.createElement("div",{className:s()("ui3_header_row--searchButtonContainer--U--jv",{[_]:n})},a.createElement(h._,{onClick:C}))):a.createElement(f.H,null,a.createElement(l.E,{onClick:w,className:y,recordingKey:o.Pt(T,"collapsedRow")},a.createElement(v.g,{isExpanded:t}),a.createElement("span",null,I))),!e&&a.createElement("div",{className:d.s.flex.relative.mr8.justifyEnd.itemsCenter.$},j?a.createElement(b.t,{recordingKey:T}):a.createElement(E.i,{onClick:S,recordingKey:o.Pt(T,"newPage"),tooltipText:N})))}},561932:(e,t,n)=>{n.d(t,{P:()=>j,v:()=>R});var a=n(848318),l=n(716544),i=n(741419),r=n(980399);if(443==n.j)var s=n(813321);var o=n(579020),d=n(397579),c=n(427193),u=n(182059),m=n(473889),p=n(771186),h=n(575492),g=n(197945),f=n(166365),E=n(442313),b=n(790355),v=n(789269),y=n(950738),_=n(51910),x=n(369600),S=n(793954),w=n(877297),C=n(205397),k=n(810968),T=n(763554);if(443==n.j)var I=n(523860);if(443==n.j)var N=n(862045);if(443==n.j)var A=n(85206);var R=(e=>(e.LOADED="post-to-feed-view-loaded",e.SELECT_NODE="post-to-feed-select-node",e))(R||{});function M(e){return a.createElement("div",{className:null!==e.isSelectedIdx?T.El:T.Vs,onClick:e.onClick,role:"button",tabIndex:0,ref:t=>{t&&e.observe(t)},"data-observer-guid":e.node.guid},a.createElement("div",{className:T.h3,style:{backgroundColor:e.backgroundColor}},a.createElement(p.x,{isLoading:!e.thumbnailUrl},()=>a.createElement("img",{className:T.xn,src:e.thumbnailUrl,alt:"",draggable:!1}))),a.createElement("div",{className:T.JO},a.createElement("div",{className:T.qp},e.node.name)),null!==e.isSelectedIdx&&1!==e.totalNumSelected&&a.createElement("div",{className:T.Jx},e.isSelectedIdx+1))}function D(e){let{toggleSelectNode:t}=e,n=(e.pageNode&&(0,r.colorToHex)(e.pageNode.backgroundColor))??"",[l,i]=a.useState(!1),s=a.useCallback(a=>{t(a,{pageId:e.pageNode.guid,pageBackgroundColor:n})},[t,e.pageNode.guid,n]);return a.createElement("div",{className:T.RW},e.showCollapsibleHeader&&a.createElement("div",{className:T.Vr,onClick:()=>i(e=>!e),role:"button",tabIndex:0},l?a.createElement(f.B,{svg:A.A,className:T.Rq}):a.createElement(f.B,{svg:I.A,className:T.Rq}),e.pageNode.name,"\xa0",a.createElement("span",{className:T.Du},"\xb7 ",e.nodes.length)),!l&&a.createElement("div",{className:T.Mc},e.nodes.map(t=>{let l=e.selectedNodeGuids?.indexOf(t.guid)??null;return a.createElement(M,{key:`node-${t.guid}`,node:t,thumbnailUrl:e.thumbnailByGuid[t.guid]?.url??"",backgroundColor:n,isSelectedIdx:-1===l?null:l,onClick:()=>s(t.guid),totalNumSelected:e.selectedNodeGuids?.length??null,observe:e.observe})})))}let P="feed-post-page-selector-menu";function j(){let e=a.useCallback((e,t)=>{let n=window.parent;window.self.origin===n.origin&&n&&n.postMessage({type:e,data:t})},[]),t=a.useRef(new c.jk("feed_post_to_file_load",{}));a.useEffect(()=>{t.current.start()},[]);let n=(0,_.aV)(),r=(0,_.eY)(),p=(0,x.tS)();a.useEffect(()=>{if(!n){t.current.stop();let n=t.current.getElapsedTime();(0,o.sx)("team_feed.post_from_file.file_load",{elapsedMs:n,fileKey:p}),e("post-to-feed-view-loaded",!0)}},[n,e,p]);let I=(0,l.d4)(e=>e.mirror.appModel.pagesList),A=a.useMemo(()=>I.reduce((e,t)=>({...e,[t.nodeId]:r.get(t.nodeId)}),{}),[I,r]),R=(0,l.wA)(),M=a.useMemo(()=>Object.values(A).flatMap(e=>e?e.uiOrderedChildren.map(t=>{let n=r.get(t);return n&&("FRAME"===n.type||"SECTION"===n.type)?{...n,pageId:e.guid,name:n?.name}:null}).filter(e=>e):[]).filter(e=>null!==e),[A,r]),j=a.useMemo(()=>{let e={};for(let t of M)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[M]),L=a.useMemo(()=>new S.Ef(M,{keys:["name"]}),[M]),[O,B]=a.useState(""),[F,z]=a.useState(null),[$]=(0,s.A)(O,200),G=a.useCallback(e=>{z(L.search(e))},[L]),U=a.useMemo(()=>{if(null===F)return null;let e={};for(let t of F)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[F]);a.useEffect(()=>{""!==$&&G($)},[$,G]);let H=(0,y.Um)(),K=a.useRef(null),[V,W]=a.useState(null);a.useEffect(()=>{if(V||!r||!j||0===Object.keys(j).length)return;let e=r.get(Object.keys(j)[0]);e&&W(e)},[V,j,r]);let[Y,q]=a.useState({}),[X,J]=a.useState([]),Z=(0,d.ZC)(X),Q=a.useRef(null),[ee,et]=a.useState([]),en=a.useCallback(e=>{let t=[];e.forEach(e=>{if(e.isIntersecting&&e.target instanceof HTMLElement){let n=e.target.dataset?.observerGuid;n&&t.push(n)}}),et(t)},[]),ea=a.useMemo(()=>new IntersectionObserver(en,{threshold:[.25]}),[en]),el=a.useCallback(e=>{ea&&ea.observe(e)},[ea]),[ei,er]=a.useState({});a.useEffect(()=>{if(0===ee.length)return;let e=ee.filter(e=>!ei[e]);0!==e.length&&(0,v.Jr)().loadAllImagesUnder(e,i.MoD.NON_ANIMATED_ONLY,"feed.postFromFile").then(()=>{e.forEach(e=>{setTimeout(()=>{er(t=>{if(t[e])return t;let n=(0,k.BO)(e);return{...t,[e]:{url:URL.createObjectURL(new Blob([n])),data:n}}})},0)})})},[ee,ei]),a.useEffect(()=>{X!==Z&&e("post-to-feed-select-node",X.map(e=>({guid:e,thumbnail:ei[e].data,backgroundColor:Y[e]})))},[Z,X,e,ei,Y]);let es=a.useCallback((e,t)=>{ei[e]&&(q(n=>t.pageBackgroundColor?{...n,[e]:t.pageBackgroundColor}:n),J(t=>t.includes(e)?t.filter(t=>e!==t):t.length>=w.e3?t:[...t,e]))},[ei]);return j&&0===Object.keys(j).length?a.createElement("div",{className:T.se},(0,E.t)("fig_feed.no_top_level_nodes")):V?a.createElement("div",{className:T.kL},a.createElement("div",{className:T.Y},a.createElement(g.IW,{query:O,className:T.ON,onChange:B,clearSearch:()=>{B(""),z(null)},focusOnMount:!1,iconClassName:T.qc,placeholder:(0,E.t)("fig_feed.search_frames")}),""===O&&a.createElement(a.Fragment,null,a.createElement("div",{role:"button",ref:K,onClick:()=>{H?.type===P?R(b.oB()):R(b.j7({type:P}))},tabIndex:0,className:T.YZ},a.createElement("div",null,V.name),a.createElement(f.B,{svg:N.A,width:"8px",autosize:!0})),K.current&&H?.type===P&&a.createElement(C.Cf,{showPoint:!1,targetRect:K.current.getBoundingClientRect(),propagateCloseClick:!0},Object.keys(j).map(e=>a.createElement(u.MM,{key:e,onClick:()=>W(A[e]),checked:V.guid===e},A[e].name))))),a.createElement(h.P,{hideScrollbar:!0,className:T.jG,innerClassName:T.hu,scrollContainerRef:Q},""===O&&a.createElement(D,{pageNode:V,nodes:j[V.guid]||[],thumbnailByGuid:ei,selectedNodeGuids:X,toggleSelectNode:es,observe:el}),""!==O&&(null===U?a.createElement("div",{className:T.Do},a.createElement(m.kt,{size:"large"})):Object.entries(U).length>0?Object.entries(U).map(([e,t])=>a.createElement(D,{key:e,pageNode:A[e],nodes:t,thumbnailByGuid:ei,selectedNodeGuids:X,toggleSelectNode:es,showCollapsibleHeader:!0,observe:el})):a.createElement("div",{className:T.Lp},a.createElement("div",null,(0,E.tx)("fig_feed.no_frames_matching",{searchQuery:a.createElement(a.Fragment,null,a.createElement("span",{className:T.ZF},O))})))))):null}},304059:(e,t,n)=>{n.d(t,{u:()=>y});var a=n(848318);if(443==n.j)var l=n(897378);if(443==n.j)var i=n(415873);if(443==n.j)var r=n(970905);if(443==n.j)var s=n(622876);var o=n(654104),d=n(566699),c=n(442313),u=n(584305),m=n(718451),p=n(256429),h=n(585677),g=n(459377);if(443==n.j)var f=n(952200);if(443==n.j)var E=n(389075);if(443==n.j)var b=n(954184);if(443==n.j)var v=n(546131);function y({addProperty:e,children:t,contentsVisibleOrMixed:n,minusDisabled:y,plusDisabled:_,recordingKey:x,removeProperty:S,showButton:w,title:C,dataTestId:k,dataOnboardingKey:T,shouldHideButton:I,plusButtonLabel:N,minusButtonLabel:A}){let{version:R}=(0,s.DP)(),M=(0,a.useCallback)(()=>{!1!==n||_||e()},[e,n,_]),D=n===m.oV,P=!D&&!n;null==w&&(w=!0===n?"-":"+");let j="+"===w?a.createElement(l.K,{recordingKey:o.Pt(x,"addButton"),onClick:e,disabled:_,"aria-label":N??(0,c.t)("fullscreen.properties_panel.add"),htmlAttributes:{onMouseDown:u.dG,"data-testid":k??"","data-tooltip-type":"text","data-tooltip":N??""}},a.createElement(d.U,{svg:b.A,fallbackSvg:v.A},a.createElement(i.e,null))):a.createElement(l.K,{recordingKey:o.Pt(x,"removeButton"),onClick:S,disabled:y,"aria-label":A??(0,c.t)("fullscreen.properties_panel.remove"),htmlAttributes:{onMouseDown:u.dG,"data-testid":k??"","data-tooltip-type":"text","data-tooltip":A??""}},a.createElement(d.U,{svg:f.A,fallbackSvg:E.A},a.createElement(r.O,null)));return"ui3"===R?a.createElement(a.Fragment,null,C&&a.createElement(h.n,{onMouseDown:M,faded:P,isEmpty:P,titleTx:a.createElement("span",null,C),icon:I?void 0:j,dataOnboardingKey:T}),D&&a.createElement(p.fI,null,a.createElement(p.UZ,{className:g.Pf},(0,c.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!D&&!P&&t):a.createElement(a.Fragment,null,C&&a.createElement(p.fI,{onMouseDown:M,className:P?g.et:void 0,recordingKey:o.Pt(x,"panelTitle")},a.createElement(p.xw,{faded:P,extended:!0},a.createElement("div",{className:g.yr},C)),a.createElement(p.$4,null,I?null:j)),D&&a.createElement(p.fI,null,a.createElement(p.UZ,{className:g.Pf},(0,c.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!D&&!P&&t)}},585677:(e,t,n)=>{n.d(t,{I:()=>c,n:()=>d});var a=n(848318),l=n(536384),i=n.n(l),r=n(678517),s=n(696137),o=n(42379);let d=a.forwardRef(function({titleTx:e,icon:t,faded:n,isEmpty:l,appendedClassName:d,onClick:c,onMouseDown:u},m){return a.createElement(s.pG,{ref:m,onClick:c,onMouseDown:u,appendedClassName:i()(o.En,o.VJ,{[o.yf]:n,[o.ry]:l},d),input:a.createElement(r.Mw,null,e),label:null,icon:t})}),c=a.forwardRef(function({titleTx:e,faded:t,isEmpty:n,children:l,...d},c){return a.createElement(s.SP,{dataOnboardingKey:d.dataOnboardingKey,onClick:d.onClick,ref:c,appendedClassName:i()(o.En,{[o.yf]:t,[o.ry]:n}),input:a.createElement(r.Mw,null,e)},l)})},62429:(e,t,n)=>{n.d(t,{A:()=>a.A,D:()=>l});var a=n(765285),l=(e=>(e.NEW_FILE="NEW_FILE",e.NEW_RESOURCE="NEW_RESOURCE",e.PROJECT_OVERFLOW_MENU="PROJECT_OVERFLOW_MENU",e.NEW_TEAM="NEW_TEAM",e.NEW_PROJECT="NEW_PROJECT",e.IMPORT="IMPORT",e.INVITE="INVITE",e.SHARE="SHARE",e.FAVORITE="FAVORITE",e.LOG_OUT="LOG_OUT",e.CLAIM="CLAIM",e.NEW_WHITEBOARD_FILE="NEW_WHITEBOARD_FILE",e.VIEW_COMMUNITY_PROFILE="VIEW_COMMUNITY_PROFILE",e.REQUEST_TO_EDIT="REQUEST_TO_EDIT",e.JOIN_TEAM="JOIN_TEAM",e.UPGRADE_TO_TEAM_ADMIN="UPGRADE_TO_TEAM_ADMIN",e.DROPDOWN="DROPDOWN",e.VIEW_MEMBERS="VIEW_MEMBERS",e.TEAM_OVERFLOW_MENU="TEAM_OVERFLOW_MENU",e.VIEW_LIBRARIES="VIEW_LIBRARIES",e.NEW_SITE_FILE="NEW_SITE_FILE",e.GET_DESKTOP_APP="GET_DESKTOP_APP",e.ADD_TO_CHROMEBOOK="ADD_TO_CHROMEBOOK",e.REQUEST_SENT_DESIGN="REQUEST_SENT_DESIGN",e.REQUEST_SENT_WHITEBOARD="REQUEST_SENT_WHITEBOARD",e.REQUEST_SENT_ALL="REQUEST_SENT_ALL",e.SETTINGS="SETTINGS",e.NEW_FIGMAKE_FILE="NEW_FIGMAKE_FILE",e))(l||{})},157684:(e,t,n)=>{n.d(t,{Nz:()=>l,UU:()=>s,cV:()=>i,vX:()=>r});var a=n(794321);let l=a.C,i=a.C,r=null,s=null},958149:(e,t,n)=>{function a(){return null}n.d(t,{YA:()=>i,AJ:()=>l,Sm:()=>r}),n(41015),n(112546),new(n(190008)).b({name:"litmus",dependencies:[],exports:[{glob:"components.ts",sideEffects:!1},{glob:"litmus_view_selector.ts",sideEffects:!1},{glob:"is_litmus.ts",sideEffects:!1}],friendFiles:[],routeHints:["litmus"],eslint:{rules:{"react/no-array-index-key":"off","@typescript-eslint/no-explicit-any":"off"}}});let l=a,i=a,r=a},467397:(e,t,n)=>{n.d(t,{OF:()=>l,e7:()=>a});let a=function(){return!1},l=function(){return!1}},659172:(e,t,n)=>{n.d(t,{F:()=>d});var a=n(848318),l=n(379338),i=n(280198),r=n(442313),s=n(725478);let o=class e extends a.PureComponent{constructor(e){super(e),this.state={loaded:!1,error:null,isOpen:!1}}componentDidMount(){e.singleton=this}componentWillUnmount(){e.singleton=null}init(){return(0,s.L3)().then(()=>{this.state.loaded||(window.zE("webWidget","hide"),window.zE("webWidget:on","open",()=>{this.setState({isOpen:!0})}),window.zE("webWidget:on","close",()=>{this.setState({isOpen:!1}),this.close(!0)})),this.setState({loaded:!0,error:null})}).catch(e=>{throw e&&console.error("Unable to load Zendesk Web Widget:",e),this.setState({loaded:!1,error:e}),e})}open(e,t){this.init().then(()=>(0,s.wB)({name:this.props.userName,email:this.props.userEmail},e)).then(()=>{this.state.isOpen||(0,s.b_)()}).catch(()=>{this.props.dispatch(i.s.flash((0,r.t)("help_widget.zendesk.unavailable_error_message",{supportEmail:(0,l.W4)()})))})}close(e=!1){this.state.loaded&&(this.state.isOpen||e)&&(window.zE("webWidget","hide"),window.zE("webWidget","close"))}isError(){return!!this.state.error}render(){return a.createElement("div",{className:"zendesk-web-widget"})}};o.singleton=null;let d=443==n.j?o:null},558874:(e,t,n)=>{n.d(t,{_:()=>a});let a=48},670408:(e,t,n)=>{n.d(t,{b:()=>i});var a=n(848318),l=n(983229);let i=(0,a.forwardRef)(function(e,t){let{tag:n,...i}=e;return"div"===n?e.recordingKey?a.createElement(l.D8,{"data-fpl-audit":!0,...i,ref:t}):a.createElement("div",{"data-fpl-audit":!0,...i,ref:t}):e.recordingKey?a.createElement(l.oj,{"data-fpl-audit":!0,...i,ref:t}):a.createElement("span",{"data-fpl-audit":!0,...i,ref:t})})},129042:(e,t,n)=>{n.d(t,{BX:()=>s,S7:()=>u,YP:()=>i,Yr:()=>m,go:()=>l,j8:()=>o,lV:()=>p,lt:()=>a,mh:()=>c,oT:()=>d,rC:()=>r});let a=n(507642).l,l=n(269846).g,i=n(838488).YP,r=n(555028).rC,s=n(312417).BX,o=n(782789).j,d=n(245137).o,c=n(985702).m;n(426840).g;let u=n(220659).S,m=n(954691).Y,p=n(694639).l},493640:(e,t,n)=>{n.d(t,{EI:()=>s,Ld:()=>r,SQ:()=>o,Xl:()=>i,lf:()=>a,ly:()=>l}),(0,n(23459).eU)(!1);let a=n(435146).l,l=n(808913).l,i=n(580270).Xl,r=n(580270).Ld,s=n(887426).E,o=n(359583).SQ},339180:(e,t,n)=>{n.d(t,{N:()=>i,h:()=>l});var a=n(23459);let l=(0,n(792478).Wh)(()=>(0,a.eU)(null));function i(e){return e?"code"===e.type?e.fullFilePath:"editedFiles"===e.type?e.files.join(", "):"view_tool"===e.toolName?e.partialArgs.path:null:null}},294417:(e,t,n)=>{n.d(t,{En:()=>d,Ic:()=>c,Pe:()=>u,gC:()=>o});var a=n(848318),l=n(23459),i=n(792478);let r=(0,i.Wh)(()=>(0,l.eU)([])),s=(0,i.Wh)(()=>(0,l.eU)(new Map));function o(){let e=l.zl.get(s);l.zl.set(r,Array.from(e.values()))}function d(){l.zl.set(s,new Map)}function c(){l.zl.set(r,[])}function u(){let[e,t]=(0,l.fp)(s),[n,i]=(0,l.fp)(r),o=a.useCallback(()=>{i([])},[i]);return{communityAttribution:e,addCommunityAttribution:a.useCallback((e,n)=>{t(t=>{let a=new Map(t);return a.set(e,n),a})},[t]),communityAttributionDisplay:n,clearCommunityAttributionDisplay:o}}},580270:(e,t,n)=>{n.d(t,{Ld:()=>d,Ut:()=>c,Xl:()=>o,hR:()=>s,kz:()=>r,p7:()=>u,s8:()=>i});var a=n(23459),l=n(792478),i=(e=>(e.LOADING="loading",e.AUTH="auth",e.PAUSE_PROJECT="pause_project",e.CREATE_PROJECT="create_project",e.CONNECTED_PROJECT="connected_project",e))(i||{});let r=(0,l.Wh)(()=>(0,a.eU)(null)),s=(0,l.Wh)(()=>(0,a.eU)("loading")),o=(0,l.Wh)(()=>(0,a.eU)(!1)),d=(0,l.Wh)(()=>(0,a.eU)(!1));var c=(e=>(e.INIT="init",e.DEPLOYING="deploying",e.SUCCESS="success",e))(c||{});let u=(0,l.Wh)(()=>(0,a.eU)("init"))},88159:(e,t,n)=>{n.d(t,{Us:()=>S,hN:()=>w});var a=n(248427),l=n(445777),i=n(741419),r=n(673906),s=n(23459),o=n(992444),d=n(306612),c=n(878028),u=n(972813);let m=c.z.record(c.z.string(),c.z.string()),p=new class{constructor(){this.CreateCodeSnapshotValidator=(0,u.vh)(),this.GetCodeSnapshotValidator=(0,u.vh)()}createCodeSnapshot(e){return this.CreateCodeSnapshotValidator.validate(async({xr:t})=>(m.parse(e.codeFiles),await t.post(`/api/rev/${e.fileKey}/code_snapshot`,{code_files:e.codeFiles})))}getCodeSnapshot(e){return this.GetCodeSnapshotValidator.validate(async({xr:t})=>await t.get(`/api/rev/${e.fileKey}/code_snapshot/${e.codeSnapshotKey}`))}};var h=n(140469),g=n(608080),f=n(101454),E=n(267760),b=n(783029),v=n(917930),y=n(359583);async function _({fileKey:e,codeFiles:t}){let{code_snapshot_key:n,file_version_id:a}=(await p.createCodeSnapshot({fileKey:e,codeFiles:t})).data.meta;return{codeSnapshotKey:n,fileVersionId:a}}async function x({fileKey:e,codeSnapshotKey:t}){return(await p.getCodeSnapshot({fileKey:e,codeSnapshotKey:t})).data.meta.code_files}async function S({messages:e,codeFiles:t,fileKey:n}){let l=await _({fileKey:n,codeFiles:t});return l?e.map(e=>{if(e.type===i.K$p.ASSISTANT_MESSAGE){let t=(0,a.lr)(e.textContent);t.codeSnapshot=l,e.textContent=(0,a.J6)(t)}return e}):e}async function w({fileKey:e,codeSnapshotKey:t,user:n,featureType:c,chatMessagesNode:u}){let m=await x({fileKey:e,codeSnapshotKey:t}),p=await _({fileKey:e,codeFiles:m});if(!p)throw Error("Failed to create code snapshot");let S=function(e,t){let n=(0,a.ic)(i.K$p.SYSTEM_MESSAGE,e.id,()=>((0,E.vA)(void 0!==i.glU,"Fullscreen must be defined"),i.glU.generateUniqueID()));return n.textContent=(0,a.J6)({type:"restore",codeSnapshot:t,plainText:""}),n}(n,p),w=c===g.lV.FIGMAKE?(0,b.mb)():(0,b.OS)(u);r.l7.ai("restore-version",()=>{(0,l.vA)(void 0!==i.glU,"Fullscreen must be defined");let e=[];for(let[t,n]of(c===g.lV.FIGMAKE&&(e=Object.values(w).filter(e=>"/App.tsx"!==e.codeFileFullPathWithoutScheme),(0,b.zK)(e)),Object.entries(m))){let{codeFile:e}=(0,b.Ur)(w,t,n);e&&(e.sourceCode=n,s.zl.set(f.tK,"assistant"))}e.length>0&&c===g.lV.FIGMAKE&&e.forEach(e=>{e.codeFilePath=`${y.GX}${e.codeFileFullPathWithoutScheme}`});let t=v.O.get(u.guid);t&&(t.hasSystemEdited=!0);let n=[...u.chatMessages,S];u.chatMessages=n,d.u.markCodeNodesDirty(new Set(Object.keys((0,b.mb)()))),o.Y5.commit(),(0,h.wi)(u.guid)})}},783029:(e,t,n)=>{n.d(t,{OS:()=>h,Ur:()=>f,_J:()=>m,mb:()=>p,zK:()=>E});var a=n(741419),l=n(673906),i=n(179703),r=n(23459),s=n(992444),o=n(792478),d=n(917930),c=n(359583);let u=(0,o.Wh)(()=>(0,r.eU)({}));function m(e){let t=r.zl.get(u);if(t[e])return t[e];let n=function e(t,n){if(n(t))return t;if(t.childrenNodes)for(let a of t.childrenNodes){let t=e(a,n);if(t)return t}}((0,i.UN)().getInternalCanvas(),t=>t.isCodeFile&&(0,c.iD)(t.codeFileFullPathWithoutScheme,e));return n&&r.zl.set(u,{...t,[e]:n}),n}function p(){let e=g((0,i.UN)().getInternalCanvas(),c.kv),t={};for(let n of e)t[n.codeFileFullPathWithoutScheme]=n;return r.zl.set(u,t),t}function h(e){let t=g(e,e=>e.isCodeFile&&!e.isSoftDeleted),n={};for(let e of t)n[e.codeFileFullPathWithoutScheme]=e;return r.zl.set(u,n),n}function g(e,t,{depth:n=1/0}={}){let a=[];if(!e)return a;if(t(e)&&a.push(e),e.childrenNodes&&n>0)for(let l of e.childrenNodes)a.push(...g(l,t,{depth:n-1}));return a}function f(e,t,n){return l.l7.ai("code-chat",()=>{let l=(0,i.UN)(),r=e[t],s=!1;if(!(0,c.kv)(r)){let{fileName:e,codeFilePath:i}=(0,c.EY)(t),o=a.glU?.createNewCodeFile(e,n,null);if(o){if(r=l.get(o)||void 0){r.codeFilePath=i;let e=d.O.get(r.guid);e&&(e.hasSystemEdited=!0)}s=!0}}return r&&(e[t]=r),{codeFile:r,created:s}})}function E(e){0!==e.length&&l.l7.ai("remove-code-files",()=>{e.forEach(e=>{a.glU?.deleteCodeFile(e.guid)}),s.Y5.commit()})}},682601:(e,t,n)=>{n.d(t,{O:()=>U,y:()=>G});var a=n(248427),l=n(643774),i=n(741789),r=n(992277),s=n(741419),o=n(673906),d=n(179703),c=n(157907),u=n(23459),m=n(614315),p=n(267760),h=n(379338),g=n(502255),f=n(442313),E=n(665471),b=n(947934),v=n(992444),y=n(701200),_=n(369600),x=n(273121),S=n(997894);if(443==n.j)var w=n(861182);var C=n(131180),k=n(140469),T=n(339180),I=n(608080),N=n(913552),A=n(101454),R=n(815290),M=n(294417),D=n(976282),P=n(924222),j=n(42135),L=n(999556),O=n(88159),B=n(452204),F=n(783029);async function z({chatMessagesNode:e,newMessage:t,userId:n,featureType:l,modelConfig:i}){o.l7.ai("code-chat-clear-import-data",()=>{e.chatMessages=(0,a.Li)(e.chatMessages)});let r=e.chatCompressionState?e.chatMessages.slice(e.chatCompressionState.startIndex):e.chatMessages,d=(0,a.Vs)(e.chatCompressionState),c=[t],m=function({exchange:e,prevMessage:t,userId:n}){if(!s.glU||e[0]?.type===s.K$p.TOOL_MESSAGE||!t||t.type!==s.K$p.ASSISTANT_MESSAGE)return;let l=t.toolCalls;if(0===l.length)return;let i=l[0];if(!i)return;let r=i.toolName,o=i.toolCallId;if(a.AD.includes(r))return{id:s.glU.generateUniqueID(),type:s.K$p.TOOL_MESSAGE,userId:n,textContent:(0,a.J6)({plainText:""}),sentAt:Date.now(),toolCalls:[],toolResults:[(0,a.k4)({toolCallId:o,toolName:r,result:{success:!1,message:"Was not successful."}})]}}({exchange:c,prevMessage:r[r.length-1],userId:n});m&&(r.push(m),c=[m,...c]);let p=r.map(a.oh).filter(e=>null!==e),h=(0,a.oh)(t);if(h){if(l===I.lV.CODE_IN_SITES&&"user"===h.role){let e=u.zl.get(C.f3);if(e){let{pngDataURL:t}=await e.snapshotPage({maxSnapshotWidth:1568,maxSnapshotHeight:1568});h.nodeThumbnailBase64=t}}p.push(h)}return{exchangeInit:c,codeChatRequest:{chats:p,chatCompression:d,files:l===I.lV.CODE_IN_SITES?{"/App.tsx":e.sourceCode}:Object.fromEntries(Object.entries((0,F.mb)()).map(([e,t])=>[e,t.sourceCode])),modelConfig:i,supabase:await K()}}}async function $({featureType:e,chatMessagesNode:t,newMessage:n,user:d,modelConfig:c,persistentEntityId:m,clientLifecycleId:h,setInput:f,requestUuid:v}){let y,_;(0,p.vA)(void 0!==s.glU,"Fullscreen must be defined"),(0,M.Ic)();let{exchangeInit:x,codeChatRequest:S}=await z({chatMessagesNode:t,newMessage:n,userId:d.id,featureType:e,modelConfig:c}),C=new a.P5({initialMessages:x,userId:d.id,nodeIdGenerator:()=>((0,p.vA)(void 0!==s.glU,"Fullscreen must be defined"),s.glU.generateUniqueID())});(0,k.YZ)({node:t.guid,messages:C.getExchange(),fileUpdates:[],isTyping:!1});let A=new AbortController;u.zl.set((0,k.Z3)(t.guid),A);let P=new Promise(e=>{A&&A.signal.addEventListener("abort",e)});async function j(e){e&&await e.cancel(),t&&(0,k.wi)(t.guid),(0,F.zK)(U);let{plainText:l}=(0,a.H5)(n.textContent);f(l),(0,N.WH)()}let L=performance.now(),O=function(e){let t=null;switch(e){case I.lV.FIGMAKE:t=E.Ay.shared.generateFigMake;break;case I.lV.CODE_IN_SITES:t=E.Ay.shared.generateLivingDesigns;break;default:(0,p.xb)(e)}return t}(e);(0,p.vA)(O,"Stream function must be defined");let B=O(S,{...(0,b.Ay)(),persistentEntityId:m,clientLifecycleId:h,cortexRequestUuid:v}),$=H();function G(){return A&&A.signal.aborted?(y="user_cancelled",!0):H()!==$?(y="user_left",!0):(!t||!t.isAlive)&&(y="missing_node",!0)}let U=[],K={};try{let n=await Promise.race([B,P]);if(G())return await j(),null;(0,p.vA)(n,"Response must be defined");let i=n.getReader(),s=(0,F.mb)();for(;;){let n=await Promise.race([i.read(),P]);if(G())return await j(i),null;let{done:d,value:c}=n;if(c&&("code"===c.type?function({response:e,fileUpdates:t,codeFiles:n,newlyCreatedCodeFiles:a,featureType:l,chatMessagesNode:i}){let r=e.file;l===I.lV.CODE_IN_SITES&&(r=i.codeFileFullPathWithoutScheme),e.reset&&(t[r]="");let s=(t[r]||"")+e.code;t[r]=s,u.zl.set(T.h,{type:"code",fullFilePath:r}),l===I.lV.FIGMAKE&&function({codeFiles:e,writeFilePath:t,response:n,newlyCreatedCodeFiles:a}){let{codeFile:l,created:i}=(0,F.Ur)(e,t,n.code);l&&o.l7.ai("code-chat",()=>{(0,w.Zr)(l)}),l&&i&&a.push(l)}({codeFiles:n,writeFilePath:r,response:e,newlyCreatedCodeFiles:a})}({response:c,fileUpdates:K,codeFiles:s,newlyCreatedCodeFiles:U,featureType:e,chatMessagesNode:t}):"chat-compression"===c.type&&(0,a.yZ)(t,c),function(e){if("code"===e.type)u.zl.set(T.h,{type:"code",fullFilePath:e.file});else if("toolCall"===e.type){let t=l.JZ.safeParse({toolName:e.toolName,partialArgs:e.partialArgs});t.success?"multi_edit_tool"!==t.data.toolName&&u.zl.set(T.h,{type:"tool",...t.data}):(0,g.$D)(r.e.AI_FOR_PRODUCTION,Error("Invalid tool data for code chat artifact"),{extra:{toolName:e.toolName,partialArgs:e.partialArgs,error:t.error}})}else"message"===e.type||"summary"===e.type||"plan"===e.type?u.zl.set(T.h,null):"editedFiles"===e.type&&u.zl.set(T.h,{type:"editedFiles",files:e.files})}(c),C.processResponseDelta(c),(0,k.YZ)({node:t.guid,messages:C.getExchange(),fileUpdates:Object.entries(K).map(([e,t])=>({name:e,contents:t})),isTyping:!1}),_||(_=performance.now())),d)break}}catch(n){return n instanceof i.G1||n instanceof TypeError?u.zl.set((0,R.QK)(t?.guid||""),{error:n,cortexRequestUuid:v}):u.zl.set((0,R.QK)(t?.guid||""),{error:n}),(0,I.Ho)(n,e,I.a5.SEND_MESSAGE),j(),null}finally{let t=performance.now();(0,D.oL)(e,L,_,t,C.getToolCalls(),m,h,y)}return{exchangedMessages:C.getExchange(),fileUpdates:K}}async function G({newMessage:e,user:t,chatMessagesNode:n,featureType:l,modelConfig:i,persistentEntityId:c,clientLifecycleId:E,setInput:b,fileKey:_}){let S;let w=n.chatMessages;(0,D.rH)(l,w.length,c,E),(0,h.b5)()&&(S=(0,m.g)());let C=await $({featureType:l,chatMessagesNode:n,newMessage:e,user:t,modelConfig:i,persistentEntityId:c,clientLifecycleId:E,setInput:b,requestUuid:S});if(C){let{exchangedMessages:e,fileUpdates:t}=C;(0,D.eM)({featureType:l,clientLifecycleId:E,persistentEntityId:c,fileUpdates:t}),function(e,t,n,l,i){let c=i===I.lV.FIGMAKE?(0,F.mb)():(0,F.OS)(t),m=(0,a.Li)(e),E=t.chatMessages||[],b=[...E,...m];if(o.l7.ai("update-source-code-and-chat-messages",()=>{for(let[e,a]of((0,p.vA)(void 0!==s.glU,"Fullscreen must be defined"),(0,y.r)(()=>{t.chatMessages=b}),v.Y5.commit(),Object.entries(n))){let{codeFile:t}=(0,F.Ur)(c,e,a);t&&(t.sourceCode=a,u.zl.set(A.tK,"assistant"))}v.Y5.commit()}),l&&Object.keys(n).length>0){let e={...Object.fromEntries(Object.entries(c).map(([e,t])=>[e,t.sourceCode])),...n};(0,O.Us)({messages:m,codeFiles:e,fileKey:l}).then(e=>{o.l7.ai("enrich-exchange-messages-with-code-snapshots",()=>{let n=[...E,...e];(0,y.r)(()=>{t.chatMessages=n})})}).catch(e=>{(0,g.$D)(r.e.AI_FOR_PRODUCTION,Error(`Failed to generate code snapshot: ${e}`))})}if(i===I.lV.FIGMAKE){!function(e){let t=(0,d.UN)();if(!t.getInternalCanvas())return;let n=e.map(e=>{if(e.type!==s.K$p.USER_MESSAGE)return null;let{imports:t}=(0,a.MK)(e.textContent);return t&&0!==t.length?t.map(e=>"node"===e.type&&e.communityAttribution?e.communityAttribution:null).filter(e=>!!e):null}).filter(e=>!!e).flat().filter((e,t,n)=>t===n.findIndex(t=>t.hubFileId===e.hubFileId)),l=(0,F._J)("/Attributions.md");o.l7.system("update-attributions",()=>{if(!l){let e=s.glU?.createNewCodeFile("Attributions.md","",null);if(!e||!(l=t.get(e)))return}let e=[(0,f.t)("figmake.chat.unsplash_attribution.attribution_comment"),...n.map(e=>e?(0,f.t)("figmake.chat.community_attribution.attribution_comment",{creatorName:e.creatorName,hubFileName:e.hubFileName,hubFileLink:`${(0,h.Ay)().figma_url}${(0,x.X$)(e.hubFileId)}`,licenseName:"CC BY 4.0",licenseLink:"https://creativecommons.org/licenses/by/4.0/"}):null).filter(e=>!!e)].join("\n\n");l.sourceCode=e,v.Y5.commit()}),(0,M.gC)(),(0,M.En)()}(b);let e=(0,d.UN)(),t=(0,j.VH)(e);(0,P.Jt)(t)}}(e,n,t,_,l)}(0,k.wi)(n.guid),u.zl.set(A.mH,!1)}async function U({userMessageContent:e,user:t,chatMessagesNode:n,featureType:l,modelConfig:i,setInput:r,fileKey:o,lastUserMessageId:d}){if((0,p.vA)(void 0!==s.glU,"Fullscreen must be defined"),!t||!n)return;let c=(0,D.qE)(o,n?.guid||""),u=s.glU.generateUniqueID();(0,B.gG)(e)&&d&&(u=d);let m=(0,D.Pd)(o,n?.guid||"",u),h={id:u,type:s.K$p.USER_MESSAGE,userId:t.id,textContent:(0,a.J6)(e),sentAt:Date.now(),toolCalls:[],toolResults:[]};await G({newMessage:h,user:t,chatMessagesNode:n,featureType:l,modelConfig:i,persistentEntityId:c,clientLifecycleId:m,setInput:r,fileKey:o})}function H(){return u.zl.get(_.ze)}async function K(){return(0,c.k)().bake_sb?await (async()=>{let e=await S.M4.fetch((0,L.TT)(H()));return{projectId:e.connectedProject?.id??void 0,publicAnonKey:e.connectedProject?.public_anon_key??void 0}})():void 0}},976282:(e,t,n)=>{n.d(t,{Pd:()=>o,eM:()=>c,oL:()=>s,qE:()=>d,rH:()=>r});var a=n(579020),l=n(640823),i=n(608080);function r(e,t,n,l){a.az.trackDefinedEvent("ai_for_production.chat_message_sent",{messageHistoryLength:t,featureType:e,productType:e===i.lV.FIGMAKE?"figmake":"sites",persistentEntityId:n,clientLifecycleId:l})}function s(e,t,n,l,r,s,o,d){a.az.trackDefinedEvent("ai_for_production.chat_response_received",{featureType:e,productType:e===i.lV.FIGMAKE?"figmake":"sites",timeToFirstCharacterMs:n?n-t:void 0,totalResponseTimeMs:l-t,persistentEntityId:s,clientLifecycleId:o,toolCalls:JSON.stringify(r.map(e=>`${e.toolName}${"command"in e.partialArgs?" "+e.partialArgs.command:""}`)),toolCallsMessageLength:r.reduce((e,t)=>e+JSON.stringify(t.partialArgs).length,0),abortReason:d})}function o(e,t,n){return(0,l.F)(e+"-"+t+"-"+n)}function d(e,t){return(0,l.F)(e+"-"+t)}function c({featureType:e,persistentEntityId:t,clientLifecycleId:n,fileUpdates:l}){for(let r of Object.values(l)){let l=r.match(/https:\/\/images\.unsplash\.com\/photo-[a-zA-Z0-9_-]+(?:\?[a-zA-Z0-9_=&-]*)?/g)||[];l&&l.forEach(l=>a.az.trackDefinedEvent("ai_for_production.llm_generated_image_url",{featureType:e,productType:e===i.lV.FIGMAKE?"figmake":"sites",persistentEntityId:t,clientLifecycleId:n,imageUrl:l}))}}},917930:(e,t,n)=>{n.d(t,{O:()=>s});var a=n(6819),l=n(507152),i=n(481540);let r=class e{constructor(e,t){this.sessionId=(0,l.g)(),this.hasErrors=!1,this.hasUserEdited=!1,this.hasSystemEdited=!1,this.fileKey=e,this.codeFileId=t}static start(t,n){let a=new e(t,n);return this.activeSessions.set(n,a),a.trackOpened(),a}end(){this.trackClosed(),e.activeSessions.delete(this.codeFileId)}static get(e){return this.activeSessions.get(e)}trackOpened(){(0,i.ds)("code_editor_opened",this.fileKey,a.D.getState(),{codeEditorSessionId:this.sessionId,codeFileId:this.codeFileId})}trackClosed(){(0,i.ds)("code_editor_closed",this.fileKey,a.D.getState(),{codeEditorSessionId:this.sessionId,codeFileId:this.codeFileId,hasErrors:this.hasErrors,systemEdited:this.hasSystemEdited,userEdited:this.hasUserEdited})}};r.activeSessions=new Map;let s=443==n.j?r:null},700072:(e,t,n)=>{n.d(t,{f:()=>a});let a=48},985702:(e,t,n)=>{n.d(t,{m:()=>p});var a=n(848318),l=n(716544),i=n(425642),r=n(741419),s=n(351766),o=n(921494),d=n(442313),c=n(604613),u=n(369600),m=n(777042);function p(e){let t=(0,l.wA)(),n=(0,o.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),i=(0,u.q5)(),r=(0,s.oA)(i?.siteMount);return a.createElement(h,{...e,...n,openFileHasPublishedSiteMount:!!r&&!r.unpublishedAt,dispatch:t})}class h extends a.PureComponent{constructor(e){super(e)}componentDidMount(){r.VDs.setExpectingCopyCutEvent(!0)}componentWillUnmount(){r.VDs.setExpectingCopyCutEvent(!1)}contextMenu(){let e=this.props.sceneGraphSelection,t=this.props.sceneGraph.getCurrentPage()?.defaultResponsiveSetId,n=!!t&&void 0!==e[t];return[{action:"sites-copy-link",flags:["edit"],displayText:(0,d.t)("sites.fullscreen_actions.copy-external-url"),disabled:!this.props.openFileHasPublishedSiteMount},{action:"copy-link",flags:["edit"],displayText:(0,d.t)("sites.fullscreen_actions.copy-link")},{separator:!0},{action:"rename-selection",flags:["edit"],displayText:(0,d.t)("fullscreen.context_menu.rename")},{action:"duplicate",flags:["edit"],displayText:(0,d.t)("sites.fullscreen_actions.duplicate-webpage")},{action:"copy",flags:["edit"]},{action:"delete-selection",flags:["edit"],disabled:n,displayText:(0,d.t)("sites.fullscreen_actions.delete-selection")},{separator:!0},{action:"set-as-default-responsive-set",flags:["edit"]}]}render(){let e=this.props.clientX,t=this.props.clientY,n=(0,i.WI)(this.contextMenu());return a.createElement("div",{className:`${c.Dm}`},a.createElement(m.Q,{appModel:this.props.appModel,dispatch:this.props.dispatch,isLimitedDevMode:this.props.isLimitedDevMode,menuItems:n,recordingKey:"webpageMenu",removeDisabledItems:!0,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,selectedView:this.props.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}}))}}h.displayName="WebpageContextMenu"},838488:(e,t,n)=>{n.d(t,{sZ:()=>m,YP:()=>p});var a=n(848318),l=n(716544),i=n(376025),r=n(384409),s=n(44509),o=n(17755),d=n(442313),c=n(51910),u=n(990807);let m="https://coda.io/d/EXT-Figma-Alpha-Onboarding-Guide_do5vkVZSFt5/Figma-Alpha-Onboarding-Guide_suasWc8I";function p(){let e=(0,c.aV)(),t=(0,l.d4)(e=>e.mirror.appModel.showUi);return!e&&t?a.createElement(i.E,{className:"sites_feedback--feedbackContainer--eOEEh",onClick:()=>{s.Ay.unsafeRedirect("https://form.asana.com/?k=-5CMT8zfO7zsRO3Db9pGIA&d=10497086658021","_blank")}},a.createElement("div",{className:o.s.colorTextOnbrand.textBodyMedium.$,"data-onboarding-key":u.zE},(0,d.tx)("sites.onboarding.give_feedback")),a.createElement(r.S,{className:"sites_feedback--feedbackIcon---CvoT"})):null}},42135:(e,t,n)=>{n.d(t,{VH:()=>E,Ve:()=>b,oA:()=>f});var a=n(848318),l=n(716544);if(443==n.j)var i=n(445777);var r=n(992277),s=n(23459),o=n(322035),d=n(502255),c=n(790355),u=n(51910),m=n(834996),p=n(32947),h=n(394966),g=n(187536);function f(){let e=(0,s.md)(h.wh),t=(0,u.eY)(),n=(0,a.useMemo)(()=>{let n=e?.[0];return n?v(()=>t.get(n),null):null},[e,t]),l=E(t),r=function(e){if(!e)return null;(0,i.KF)(e.isCodeInstance,"Node is not a code instance");let t=e.backingCodeComponent;if(!t)return null;let n=t.exportedFromCodeFile;return n&&n.belongsToCodeLibrary||null}(l);return{entryPointCodeInstance:l,codeLibraryInstance:r,selectedCodeNode:n}}function E(e){return(function e(t,n){if(!t)return[];let a=[];if(t.isCodeInstance&&t.name===n&&a.push(t),t.childrenNodes)for(let l of t.childrenNodes)a.push(...e(l,n));return a})(v(()=>e.getCurrentPage(),null),"App").sort((e,t)=>(t.editInfo?.lastEditedAt??0)-(e.editInfo?.lastEditedAt??0))[0]??null}function b(){let e=(0,m._6)();return{figmakeInFullscreen:(0,g.B5)(e),openFigmakeFullscreenInNewTab:function(){let e=(0,p.B)();return(0,a.useCallback)(()=>{let t=e();if(t){let e;e=null,null!=(e=(0,o.FJ)(t))&&e.focus()}else(0,d.$D)(r.e.AI_FOR_PRODUCTION,Error("Failed to generate Rev preview link for navigation"))},[e])}(),exitFigmakeFullscreenView:function(){let e=(0,l.wA)(),t=(0,m._6)(),n=(0,g.Oc)();return(0,a.useCallback)(()=>{n&&"fullscreen"===t.view&&e((0,c.$T)({...t,figmakeInFullscreen:!1}))},[n,t,e])}()}}function v(e,t){try{return e()}catch(e){return t}}},808913:(e,t,n)=>{n.d(t,{l:()=>b});var a=n(848318),l=n(776402),i=n(777611),r=n(731755),s=n(356505),o=n(322035),d=n(972813),c=n(757033),u=n(775038),m=n(369600),p=n(997894),h=n(464012),g=n(783029),f=n(999556);let E=(0,d.vh)(),b=(0,h.Ju)(function(e){let t=l.hS(e),n=(0,m.q5)().key,[h,b]=(0,a.useState)(null),[v,y]=(0,a.useState)(null),[_,x]=(0,a.useState)([]),[S,w]=(0,a.useState)(null),[C,k]=(0,a.useState)(""),[T,I]=(0,a.useState)(""),[N,A]=(0,a.useState)(""),[R,M]=(0,p.IT)((0,f.TT)(n)),D=(0,p.gY)(f.rY),[P,j]=(0,p.IT)((0,f.y7)(n)),L=R.data?.connectedProject,O="loaded"!==R.status,B=P.data,F="loaded"!==P.status,[z,$]=(0,a.useState)(!1);(0,a.useEffect)(()=>{O||F?$(!0):$(!1)},[O,F]);let G=async()=>{try{$(!0),b(null),await c.Ay.del(`/api/integrations/supabase/${n}/authorization`),j.refetch(),M.refetch()}catch(e){b(`Failed to revoke authorization: ${e}`)}finally{$(!1)}},U=async()=>{try{$(!0),b(null);let e=(0,o.FJ)("/api/integrations/supabase/authorize","_blank");await new Promise(t=>{window.addEventListener("message",n=>{n.data&&"child-redirect-complete"===n.data.type&&(e?.close(),j.refetch(),t(!0))})})}catch(e){b("Failed to authorize oauth app")}finally{$(!1)}};(0,a.useEffect)(()=>{(async()=>{if(!F&&B&&!O&&B&&!L)try{k("Loading projects..."),$(!0);let e=await E.validate(async({xr:e})=>await e.get(`/api/integrations/supabase/${n}/existing_projects`));x(e.data.meta||[])}catch(e){b(`Failed to fetch projects: ${e}`)}finally{$(!1),k("")}})()},[L,O,B,F,n]);let H=async()=>{if(!S){b("Please select a project first");return}try{$(!0),b(null);let e=_.find(e=>e.id===S);if(!e){b("Selected project not found");return}await c.Ay.post(`/api/integrations/supabase/${n}/connect`,d.td.toAPIParameters({supabase_project_id:e.id,supabase_org_id:e.organization_id})),await M.refetch()}catch(e){b(`Failed to connect to project: ${e}`)}finally{$(!1)}},K=async()=>{try{$(!0),b(null),await D({fileKey:n})}catch(e){b(`Failed to disconnect from project: ${e}`)}finally{$(!1)}},V=async()=>{try{$(!0),b(null),y(null);let e=(0,g.mb)(),t={};for(let[n,a]of Object.entries(e))if(n.includes("/supabase/functions/server/")){let e=n.split("/").pop(),l=a.sourceCode;e&&l&&(t[e]=l)}if(!t["index.tsx"]){b("/supabase/functions/server/index.tsx not found");return}await c.Ay.post(`/api/integrations/supabase/${n}/edge_functions/figmake-server/deploy`,{files:t}),y("Deployed function - it may take a few seconds to spin up")}catch(e){b(`Failed to publish edge function: ${e}`)}finally{$(!1)}},W=async()=>{try{$(!0),b(null),y(null),await c.Ay.post(`/api/integrations/supabase/${n}/project/pause`),y("Paused project - you may need to refresh status to see updates")}catch(e){b(`Failed to pause project: ${e}`)}finally{$(!1)}},Y=async()=>{try{$(!0),b(null),y(null),await c.Ay.post(`/api/integrations/supabase/${n}/project/restore`),y("Restored project - you may need to refresh status to see updates")}catch(e){b(`Failed to restore project: ${e}`)}finally{$(!1)}},q=async()=>{try{if($(!0),b(null),y(null),!T.trim()){b("Secret name cannot be empty");return}if(!N.trim()){b("Secret value cannot be empty");return}await c.Ay.post(`/api/integrations/supabase/${n}/secrets`,d.td.toAPIParameters({secret_name:T,secret_value:N})),I(""),A(""),y("Secret added")}catch(e){b(`Failed to add secret: ${e}`)}finally{$(!1)}};return a.createElement(i.bL,{manager:t,width:"lg"},a.createElement(r.vo,null,a.createElement(r.Y9,null,a.createElement(r.hE,null,"Supabase")),a.createElement(r.nB,null,a.createElement("div",{style:{padding:"16px"}},h&&a.createElement("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(235, 87, 87, 0.1)",border:"1px solid rgba(235, 87, 87, 0.3)",borderRadius:"6px"}},a.createElement(u.E,{color:"danger"},h)),v&&a.createElement("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(39, 174, 96, 0.1)",border:"1px solid rgba(39, 174, 96, 0.3)",borderRadius:"6px"}},a.createElement(u.E,{color:"success"},v)),B?a.createElement(a.Fragment,null,L?a.createElement("div",{style:{marginBottom:"16px"}},a.createElement("div",{style:{padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",marginBottom:"12px"}},a.createElement("div",{style:{fontWeight:"bold",marginBottom:"8px"}},a.createElement(u.E,null,`Connected: ${L.name}`)),a.createElement("div",{style:{fontSize:"12px",color:"#666"}},a.createElement(u.E,null,`ID: ${L.id} \u2022 Status: ${L.status}`))),"ACTIVE_HEALTHY"===L.status&&a.createElement("div",{style:{marginTop:"12px",marginBottom:"12px",border:"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"4px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)"}},a.createElement("div",{style:{fontSize:"13px",marginBottom:"12px"}},a.createElement(u.E,null,"Add Secret")),a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"10px"}},a.createElement("div",null,a.createElement("div",{style:{marginBottom:"4px",fontSize:"12px",color:"rgba(0, 0, 0, 0.6)"}},a.createElement(u.E,null,"Secret Name")),a.createElement("input",{type:"text",value:T,onChange:e=>I(e.target.value),placeholder:"Enter secret name",style:{width:"95%",padding:"6px 8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontSize:"13px",outline:"none",transition:"border-color 0.2s ease"}})),a.createElement("div",null,a.createElement("div",{style:{marginBottom:"4px",fontSize:"12px",color:"rgba(0, 0, 0, 0.6)"}},a.createElement(u.E,null,"Secret Value")),a.createElement("input",{type:"password",value:N,onChange:e=>A(e.target.value),placeholder:"Enter secret value",style:{width:"95%",padding:"6px 8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontSize:"13px",outline:"none",transition:"border-color 0.2s ease"}})),a.createElement("div",{style:{alignSelf:"flex-start",display:"flex",gap:"10px"}},a.createElement(s.$n,{variant:"secondary",onClick:q,disabled:z},z?"...":"Add secret"),a.createElement(s.$n,{variant:"secondary",onClick:()=>(0,o.FJ)(`https://supabase.com/dashboard/project/${L.id}/functions/secrets`),disabled:z},z?"...":"View secrets \u2197\uFE0F"))))):a.createElement("div",{style:{marginBottom:"16px"}},C.length>0?a.createElement(u.E,null,C):0===_.length?a.createElement(u.E,null,"No projects available. Create a project in your Supabase dashboard first."):a.createElement("div",{style:{marginBottom:16}},a.createElement("div",{style:{marginBottom:8,fontWeight:"bold"}},a.createElement(u.E,null,"Select a project to connect:")),a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"200px",overflowY:"auto",padding:"8px",border:"1px solid #e0e0e0",borderRadius:"4px"}},_.map(e=>a.createElement("label",{key:e.id,style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"4px 0"}},a.createElement("input",{type:"radio",name:"project",value:e.id,checked:S===e.id,onChange:()=>w(e.id),style:{marginRight:8}}),a.createElement("div",null,a.createElement("div",{style:{fontWeight:"bold"}},a.createElement(u.E,null,e.name)),a.createElement("div",{style:{fontSize:"12px",color:"#666"}},a.createElement(u.E,null,`ID: ${e.id} \u2022 Status: ${e.status}`)))))))),a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",borderTop:"1px solid rgba(0, 0, 0, 0.1)",paddingTop:"16px"}},!L&&a.createElement(s.$n,{variant:"primary",onClick:H,disabled:z||!S},z?"...":"Connect to selected project"),a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginTop:L?"8px":"0"}},L?.status==="ACTIVE_HEALTHY"&&a.createElement(s.$n,{variant:"primary",onClick:V,disabled:z},z?"...":"Deploy backend"),L&&a.createElement(s.$n,{variant:"secondary",onClick:()=>(0,o.FJ)(`https://supabase.com/dashboard/project/${L.id}/functions/figmake-server-${n.substring(0,5)}/logs`),disabled:z},z?"...":"Server logs \u2197\uFE0F"),L&&a.createElement(s.$n,{variant:"secondary",onClick:M.refetch,disabled:z},z?"...":"Refresh status"),L?.status==="ACTIVE_HEALTHY"&&a.createElement(s.$n,{variant:"secondary",onClick:W,disabled:z},z?"...":"Pause"),L?.status==="INACTIVE"&&a.createElement(s.$n,{variant:"secondary",onClick:Y,disabled:z},z?"...":"Restore"),L&&a.createElement(s.$n,{variant:"secondary",onClick:K,disabled:z},z?"...":"Disconnect")),B&&a.createElement("div",{style:{width:"100%",marginTop:"12px",borderTop:"1px solid rgba(0, 0, 0, 0.1)",paddingTop:"12px"}},a.createElement(s.$n,{variant:"destructive",onClick:G,disabled:z},z?"...":"Revoke Supabase authorization")))):a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"16px 0"}},a.createElement(s.$n,{variant:"primary",onClick:U,disabled:z},z?"...":"Authorize with Supabase"))))))},"SupabakeModal")},63341:(e,t,n)=>{n.d(t,{e:()=>d,k:()=>c});var a=n(157907),l=n(493554),i=n(376780),r=n(635547),s=n(572699),o=n(187536);function d(){var e;let t=(0,s.Xd)();return e=t.data?.seatTypeLicenseTypes,!!(0,o.aI)()&&(e?!!e.includes(i.G_.DESIGN)||!!(0,a.k)().bake_all_seats_see_file_create:!!(0,a.k)().bake_starter_limit&&!!(0,a.k)().bake_all_seats_see_file_create)}function c(e){let t=function(e){let t=(0,l.Rs)(r.GxG,{id:e},{enabled:!!e});if("loaded"!==t.status)return!0;let n=t.data.project;if(!n||"loaded"!==n.status||!n.data)return!0;let{publicDenyReasons:a}=n.data.hasPermission;return function(e){let t=[i.QK.FOLDER_CREATE_FIGMAKE_FILE_DENY_K12_ORG,i.QK.FOLDER_CREATE_FIGMAKE_FILE_DENY_STARTER_TEAM,i.QK.FOLDER_CREATE_FIGMAKE_FILE_DENY_STUDENT_TEAM,i.QK.FOLDER_CREATE_FIGMAKE_FILE_DENY_PLAN_NOT_ENABLED],n=!1;return t.forEach(t=>{e.includes(t)&&(n=!0)}),n}(a)}(e),n=d();return!t&&n}},220659:(e,t,n)=>{n.d(t,{S:()=>h});var a=n(848318),l=n(741419),i=n(654104),r=n(166365),s=n(604613),o=n(992444),d=n(718451),c=n(790663),u=n(823425),m=n(850239),p=n(435789);function h(e){let t=(0,u.JI)();if(!t)return null;let n=(0,d.E7)(t?.url)??"",h=null;if(""!==n){let{url:t,nodeIdInThisFile:a,versionId:l}=(0,c.ih)(n,e.store);h=a&&!l?{type:"internal",id:a}:{type:"url",url:t}}let{x:g,y:f}=t,E=o.Y5.getViewportInfo(),b=Math.min(Math.max(g,100),E.width-100);return a.createElement("div",{className:"sites_hyperlink_editor--container--67YMj",style:{left:Math.round(b+E.x),top:Math.round(f+E.y)}},a.createElement("div",{className:`sites_hyperlink_editor--popup--3kD7E _overlayBase--_overlayBase--Rkj8l ${s.Dm}`},h&&a.createElement(r.B,{svg:p.A,className:"sites_hyperlink_editor--breakIcon--LW2w0",onMouseDown:t=>{e.onClickTrash(t)},recordingKey:i.Pt(e.recordingKey,"breakHyperlink")}),a.createElement(m.M,{id:"inline_editor",recordingKey:e.recordingKey,link:h,onLinkChange:t=>{let n;t?.type==="url"?n=t.url:t?.type==="internal"&&(n=o.Y5.generateLinkToNode(t.id)),e.setUrl(n??""),l.glU.hideHyperlinkEditor()},isHyperlinkEditor:!0})))}},543090:(e,t,n)=>{n.d(t,{h:()=>d});var a=n(848318),l=n(741419),i=n(23459),r=n(859470),s=n(252244),o=n(470199);function d(){let e=(0,i.Xr)(o.s0),[t,n]=(0,i.fp)(o.Nl),[d,c]=(0,i.fp)(o.bP),u=(0,a.useRef)(null),m=(0,a.useCallback)(()=>{c(!0),u.current=setTimeout(()=>{n(void 0),c(!1)},100)},[c,n]),p=(0,s._4)(),h=e=>{u.current&&(clearTimeout(u.current),c(!1)),e===o.$e.FIND&&p(),n(e)},g=()=>{h(o.$e.INSERT)},f=()=>{h(o.$e.FIND)};(0,a.useEffect)(()=>{t&&e(l.Nfd.FILE)},[t]);let E=(0,a.useCallback)(()=>!!t&&(m(),!0),[t,m]);return(0,r.O1)(E,r.KD.SITES_NON_DEFAULT_LEFT_RAIL_VIEW),{hasOverlay:!!t,overlayClosing:d,closeOverlay:m,inserts:{open:g,toggle:()=>{t!==o.$e.INSERT||d?g():m()}},search:{open:f,toggle:()=>{t!==o.$e.FIND||d?f():m()}}}}},694639:(e,t,n)=>{n.d(t,{l:()=>o});var a=n(848318),l=n(716544),i=n(921494);if(443==n.j)var r=n(604613);var s=n(777042);function o({clientX:e,clientY:t,selectedView:n,isLayerLike:o,deleteItem:d}){let c=(0,l.wA)(),{sceneGraph:u,sceneGraphSelection:m}=(0,i.R)(e=>({sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),p=(0,l.d4)(e=>e.mirror.appModel),h=[];return h.push({name:o?"delete-code-layer":"delete-code-file",callback:()=>{d()}}),a.createElement("div",{className:r.Dm},a.createElement(s.Q,{appModel:p,dispatch:c,menuItems:h,recordingKey:"codeComponentContextMenu",removeDisabledItems:!0,sceneGraph:u,sceneGraphSelection:m,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}}))}},954691:(e,t,n)=>{n.d(t,{Y:()=>K,Q:()=>Y});var a=n(848318),l=n(716544),i=n(376025),r=n(897378),s=n(411132),o=n(649372),d=n(452551),c=n(741419),u=n(673906),m=n(179703),p=n(23459),h=n(818754),g=n(6819),f=n(359480),E=n(654104),b=n(566699),v=n(17755),y=n(442313),_=n(697714),x=n(790355),S=n(604613),w=n(416105),C=n(375536),k=n(992444),T=n(326971),I=n(273199),N=n(207715),A=n(500076),R=n(503024),M=n(657661),D=n(771430),P=n(454272),j=n(606120),L=n(47296),O=n(902166),B=n(394966),F=n(219205),z=n(184054),$=n(27776);let G="code_components_list--toggleButton--eKzaU";var U=n(954184),H=n(546131);function K(e){let{renamingNodeGuid:t,startRenamingNode:n,stopRenamingNode:i}=e,r=(0,l.wA)(),s=(0,T.A$)(),o=(0,l.d4)(e=>e.versionHistory),d=(0,l.d4)(e=>!e.mirror.appModel.isReadOnly&&e.mirror.appModel.topLevelMode!==c.lyf.HISTORY),g=!d,{windowInnerHeight:E}=(0,f.l)(),[b,v]=(0,p.fp)(z.Yu),[_,w]=(0,p.fp)(z.o3),{topLevelObjectRowHeight:R}=a.useContext(I.y0),{layerCount:j,componentCount:L,buildCodeComponentRows:O,buildCodeLayerRows:G}=function(){let e=(0,p.md)(C.Mk[A.PW.CODE_FILE].local),{codeComponentFiles:t,codeLayerFiles:n,nameCounts:l}=(0,a.useMemo)(()=>{let t=Object.values(e).filter(Y).sort((e,t)=>e.name.localeCompare(t.name)),n=(0,m.UN)(),a=[],l=[];for(let e of t)n.get(e.localGuid)?.isLayerLikeCodeNode?l.push(e):a.push(e);let i=t.reduce((e,t)=>(t?.name&&(e[t.name]=(e[t.name]||0)+1),e),{});return{allLocalCodeFilesArray:t,codeComponentFiles:a,codeLayerFiles:l,nameCounts:i}},[e]),{topLevelObjectRowHeight:i}=a.useContext(I.y0),r=(0,N.ut)(c.Ez5?.codeSelection().fullscreenCodeNodeIds,[]),s=(0,a.useMemo)(()=>r[0]?m.UN().get(r[0])?.exportedFromCodeFile?.guid??r[0]:null,[r]),o=(0,a.useCallback)(e=>{let t={rowData:[],topByGuid:{},leftByGuid:{},heightByGuid:{},sectionById:{},totalHeight:0},n=0;return e.forEach((a,r)=>{if(!a)return;let o=e[r-1]?.localGuid||null,d=e[r+1]?.localGuid||null,c=(0,m.UN)().get(a.localGuid),u=c?.userFriendlyName??a.name;!function(e,a,r,o,d,c,u){let m=i*n,p=(l[c]??0)>1;t.rowData.push({rowType:"object",level:0,height:i,guid:e,isExpanded:!1,isTemporarilyExpanded:!1,hasChildren:!1,isDescendantOfSymbol:!1,isDescendantOfInstance:!1,isDescendantOfModule:!1,prevNodeGuid:r,nextNodeGuid:o,recordingKey:d,top:m,isSelected:s===e,ignoreAncestorSelection:!0,hasWarning:p,warningMessage:p?(0,y.t)("sites.code_components.code_file_name_warning"):void 0,displayName:u}),t.topByGuid[e]=m,t.heightByGuid[e]=i,t.totalHeight+=i,n++}(a.localGuid,0,o,d,`codeComponentsList.row.${r}`,a.name,u)}),t},[i,s,l]);return(0,a.useMemo)(()=>({componentCount:t.length,layerCount:n.length,buildCodeComponentRows:()=>o(t),buildCodeLayerRows:()=>o(n)}),[t,n,o])}();if(!(0,F.oz)())return null;let U=e=>{let t=(0,m.UN)().get(e);t&&(0,B.xB)(t)},H=(e,t)=>{let n=(0,m.UN)().get(e);if(!n)return;let{clientX:a,clientY:l}=t;r(x.j7({type:S.jQ,data:{clientX:a,clientY:l,isLayerLike:n.isLayerLikeCodeNode,deleteItem:()=>{u.l7.user("delete-code-component",()=>{c.glU.deleteCodeFile(e),k.Y5.triggerAction("commit")})}}}))},K=Math.min(R*L+8,Math.round(.5*(E-(0,h.hG)($.MGP)-P.uF)));return a.createElement("div",{className:"code_components_list--codeComponentsPanelContent--5nEHr"},a.createElement(V,{isOpen:b,onToggle:()=>{g||v(!b)},fileInEditableState:d,recordingKey:"codeComponentsListHeader"}),b&&L>0&&a.createElement("div",{style:{height:K}},a.createElement(M.X,{currentPage:s,customRowBuilder:O,hideCanvasDropTargets:!0,hideRowActions:!0,ignoreRightClickForSelection:!0,isReadOnly:!0,onRowContextMenu:H,onSelectionUpdated:U,panelType:D.g$.CodeComponent,recordingKey:"codeComponentsList",renamingGuid:t,startRenaming:n,stopRenaming:i,thumbnailGuid:null,versionHistory:o,width:e.width})),j>0&&a.createElement(a.Fragment,null,a.createElement(W,{isOpen:_,onToggle:()=>{g||w(!_)}}),_&&a.createElement(M.X,{currentPage:s,customRowBuilder:G,hideCanvasDropTargets:!0,hideRowActions:!0,ignoreRightClickForSelection:!0,isReadOnly:!0,onRowContextMenu:H,onSelectionUpdated:U,panelType:D.g$.CodeComponent,recordingKey:"codeLayersList",renamingGuid:t,startRenaming:n,stopRenaming:i,thumbnailGuid:null,versionHistory:o,width:e.width})))}function V(e){let{isOpen:t,onToggle:n,fileInEditableState:l}=e,h=(0,p.Xr)(O.fF);return a.createElement(j.B,null,a.createElement(L.H,null,a.createElement(i.E,{className:G,htmlAttributes:{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},tabIndex:0},onClick:n},t?a.createElement(s.O,null):a.createElement(o.k,null),(0,y.tx)("sites.panel.pages_panel.code_components")),l&&a.createElement("div",{className:v.s.flex.gap8.itemsCenter.$},a.createElement(r.K,{recordingKey:E.Pt(e.recordingKey,"newCodeComponent"),"aria-label":(0,y.t)("sites.panel.pages_panel.add_new_code_component"),onClick:e=>{e.preventDefault(),e.stopPropagation(),g.D.dispatch(_.F.dequeue({matchType:B.US})),(0,w.J)(()=>{u.l7.user("create-new-code-file",()=>{let e=c.glU?.createNewCodeFile(null,null,"layers_panel");if(e){k.Y5.triggerAction("commit");let t=(0,m.UN)().get(e);t&&((0,B.xB)(t),h(!0))}})})},htmlAttributes:{"data-testid":"new-code-component-btn","data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,y.t)("sites.panel.pages_panel.add_new_code_component"),"data-tooltip-show-above":!0}},a.createElement(b.U,{svg:U.A,fallbackSvg:H.A},a.createElement(d.x,null))))))}function W({isOpen:e,onToggle:t}){return a.createElement(j.B,null,a.createElement(L.H,null,a.createElement(i.E,{className:G,htmlAttributes:{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},tabIndex:0},onClick:t},e?a.createElement(s.O,null):a.createElement(o.k,null),(0,y.tx)("sites.panel.pages_panel.code_layers"))))}function Y(e){return!e.isSoftDeleted&&!e.canvasNodeId}},245137:(e,t,n)=>{n.d(t,{o:()=>U});var a=n(848318),l=n(379338),i=n(473889),r=n(575492),s=n(17755),o=n(430285),d=n(314506);let c=(e,t)=>{let n=Number(e.name),a=Number(t.name);return isNaN(n)||isNaN(a)?e.name.localeCompare(t.name):n-a};var u=n(741419),m=n(157907),p=n(536384),h=n.n(p);function g({title:e,showDividerAfter:t,children:n}){return a.createElement(a.Fragment,null,a.createElement("div",{className:s.s.pl16.pt8.pb16.wFull.textBodyMediumStrong.$},e),a.createElement("div",{className:h()("kits_list--grid--uH3if",s.s.pl16.pr16.$)},n),t&&a.createElement("div",{className:"kits_list--divider--Zqmzi"}))}var f=n(891627),E=n(673906),b=n(579020),v=n(654104),y=n(701780),_=n(481540),x=n(992444),S=n(369600),w=n(279101),C=n(139444),k=n(983229),T=n(645736);function I({name:e,thumbnailUrl:t,onPointerDown:n,onClick:l}){let[i,r]=a.useState(void 0);return a.createElement(k.D8,{className:"tile--tile--FkT4T",onPointerDown:n,onClick:l},!i&&a.createElement(T.a,{onIntersectionChange:e=>{e.isIntersecting&&r(t)},rootMargin:"40px"}),a.createElement("img",{className:h()("tile--tileImage--IB0er tile--baseTileImage--DOhr8",s.s.bRadius4.mtAuto.mbAuto.$),src:i,alt:e,draggable:!1}),e&&a.createElement("div",{className:s.s.font11.fontInter.colorTextSecondary.ellipsis.noWrap.overflowHidden.wFull.alignCenter.$},e))}var N=n(357202);function A({widget:e}){let t=(0,S.tS)(),{onInsertableResourcePointerDown:n,dragState:l}=function(e){let t=async t=>{let n=t.pointerPercentageOffset||new y.Mi;await E.l7.user("insert-web-widget",()=>{(0,m.k)().sts_generic_embed?(u.glU.insertEmbed(e.resource.initial_url||"",{x:t.dropPosition.x,y:t.dropPosition.y,percentOffsetX:n.x,percentOffsetY:n.y},!1,{x:e.resource.width,y:e.resource.height}),(0,b.sx)("insert_generic_embed",{embedType:e.resource.type})):(u.glU.insertHTMLWidget(e.resource.type,{x:t.dropPosition.x,y:t.dropPosition.y,percentOffsetX:n.x,percentOffsetY:n.y},!1,{x:e.resource.width,y:e.resource.height}),(0,b.sx)("insert_web_widget",{webWidgetType:u._eX[e.resource.type]}))})};return(0,w.t)({...e},{insertAction:t,dragPreviewPointerPosition:C.N.CENTERED,getDragPreviewSrc:()=>e.resource.preview_url,onPointerDownCallback:()=>{u.glU.setShowHTMLWidgetCanvasDragAndDropOutlines(!0,{x:e.resource.width,y:e.resource.height})},onPointerUpCallback:()=>{u.glU.setShowHTMLWidgetCanvasDragAndDropOutlines(!1,null)},recordingKey:v.Pt("html-widget",e.resource.type)})}({resource:e,clickToInsert_DEPRECATED:!0}),i=E.nc.user("insert-site-html-widget",n);return a.createElement(a.Fragment,null,a.createElement(R,{dragState:l,opacityOverride:.5}),a.createElement(I,{key:`widget-tile-${e.type}`,thumbnailUrl:e.thumbnail_url,name:e.name,onPointerDown:i,onClick:()=>(0,_.Cu)({widgetType:e.type,fileKey:t,name:"site_web_widget_tile",productType:"sites"})}))}function R(e){let t=e.dragState;if(!t?.dragPosition||!t?.grabbedPointerPercentageOffset)return null;let n=function(e){let{draggingResource:t}=e,{zoomScale:n,x:a}=x.Y5.getViewportInfo(),l=e.dragPosition?.x;return(!l||l<a)&&e.draggingThumbSize?e.draggingThumbSize:new y.Mi(t.width,t.height).scale(n)}(t),l=t.dragPosition;return l=l.subtract(new y.Mi(t.grabbedPointerPercentageOffset.x*n.x,t.grabbedPointerPercentageOffset.y*n.y)),(0,f.createPortal)(a.createElement("div",{className:h()(N.Wy,{[N.ce]:t.isDraggingOverCanvas}),style:{left:l.x,top:l.y,width:n?.x,height:n?.y,maxWidth:t.draggingThumbMaxDimensions?.x||void 0,maxHeight:t.draggingThumbMaxDimensions?.y||void 0,zIndex:e.zIndexOverride,opacity:e.opacityOverride?e.opacityOverride:1}},a.createElement("img",{src:t.draggingResource.preview_url,alt:""})),document.getElementById("fullscreen-root"))}let M=[{type:u._eX.GOOGLE_MAP,name:"Google Maps",thumbnail_url:(0,l.ck)("e3414cd8bb4b5e1e76366525ddf193782545e567"),preview_url:(0,l.ck)("5732708498034ce891d9f33c7269ee8679bb3191"),initial_url:"https://maps.google.com/",width:600,height:400,feature_flag:"sts_widget_google_maps"},{type:u._eX.MAILCHIMP,name:"Mailchimp",thumbnail_url:(0,l.ck)("9fe3833386aadd6fd49a7370ec5226bec8d4275b"),preview_url:(0,l.ck)("d7e138cef4cc27e9232fbfd3613728b05cb530ca"),width:400,height:50,feature_flag:"sts_widget_mailchimp"},{type:u._eX.YOUTUBE,name:"YouTube",thumbnail_url:(0,l.ck)("c89e882e58779c46c4e5656b3775f715309928fc"),preview_url:(0,l.ck)("528dac2da25ce6a68901dd629c4606171f762fcc"),initial_url:"https://www.youtube.com/",width:600,height:400,feature_flag:"sts_widget_youtube"},{type:u._eX.GENERIC,name:"Embed",thumbnail_url:(0,l.ck)("86ba1f4a16abbec4208d141f3127d6f86c72f818"),preview_url:(0,l.ck)("86ba1f4a16abbec4208d141f3127d6f86c72f818"),width:600,height:400,feature_flag:"sts_generic_embed"}];function D(e){let t=M.filter(e=>!e.feature_flag||(0,m.k)()[e.feature_flag]);return t.length?a.createElement(g,{title:e.title,showDividerAfter:e.showDividerAfter},t.map(e=>a.createElement(A,{key:`widget-tile-${e.type}`,widget:e}))):null}var P=n(303035),j=n(990449),L=n(918331);function O({module:e}){let t=(0,S.tS)(),{onInsertableResourcePointerDown:n,dragState:l}=(0,L.j)({resource:e,isList:!1,sourceForTracking:"sites-blocks-panel",clickToInsert_DEPRECATED:!0,insertAsChildOfCanvas:!1,afterSuccessfulInsert:P.lQ}),i=E.nc.user("insert-site-module",n);return a.createElement(a.Fragment,null,a.createElement(j.q,{dragState:l,isList:!1,opacityOverride:.5}),a.createElement(I,{key:e.node_id,name:e.name,thumbnailUrl:e.thumbnail_url,onPointerDown:i,onClick:()=>(0,_.Cu)({moduleId:e.id,moduleLibraryKey:e.library_key,fileKey:t,name:"site_block_tile",productType:"sites"})}))}var B=(e=>(e.SECTION="SECTION",e.NAV="NAV",e.PAGE="PAGE",e.MENU="MENU",e.TEXT="TEXT",e))(B||{});let F=e=>{switch(e){case"SECTION":return"Sections";case"NAV":return"Navigation";case"PAGE":return"Pages";case"MENU":return"Menus";case"TEXT":return"Text blocks"}},z={SECTION:"IbYpsyU8e5u9t14nevK55b",NAV:"RntmcMDGBjSuN8k3JfvUk3",PAGE:"loZogHQcH4FK5NFSypc0G6",MENU:"sUF0LBU3K0ZX1Awq16LlBV",TEXT:"dO0TRVx1ylWu2uWGlWEN1v"},$={SECTION:"gfVjukePODl2oYnd7l2jP1",NAV:"sfxfX4Ewy3DP1DMOCKin9o",PAGE:"TmE0KRiH443rMVLR3lVowc",MENU:"rzpQBCPNV8Gs0unrpxKO5V",TEXT:"aBSKcqoNea6z5HJfMiTIOJ"},G=(e,t)=>{let n=(0,l.O_)()?$[e]:z[e];return t.get(n)||[]};function U(e){let t=function(){let e=(0,d.Ef)();if(e.status===o.H.LOADING)return o.Qw.loading();let t=e.data;if(!t)return o.Qw.loaded({});let n={};return Object.entries(t).forEach(([e,t])=>{t.length>0&&(n[e]=t.sort(c))}),o.Qw.loaded(n)}();if("loaded"!==t.status)return a.createElement("div",{className:s.s.flexColumn.alignCenter.pt32.$},a.createElement(i.kt,null));let n=Object.entries(t.data),l=new Map;for(let[e,t]of n)l.set(e,t);return a.createElement(r.P,{className:s.s.pt8.$,dataTestId:"sitesKitsScrollContainer"},a.createElement(H,{title:F("SECTION"),modules:G("SECTION",l),showDividerAfter:!0}),a.createElement(H,{title:F("NAV"),modules:G("NAV",l),showDividerAfter:!0}),a.createElement(H,{title:F("MENU"),modules:G("MENU",l),showDividerAfter:!0}),a.createElement(H,{title:F("TEXT"),modules:G("TEXT",l),showDividerAfter:!0}),a.createElement(D,{title:"Widgets",showDividerAfter:!1}),a.createElement(H,{title:F("PAGE"),modules:G("PAGE",l),showDividerAfter:!0}))}function H({title:e,modules:t,showDividerAfter:n}){return t.length?a.createElement(g,{title:e,showDividerAfter:n},t.map(e=>a.createElement(O,{key:e.id,module:e}))):null}},426840:(e,t,n)=>{n.d(t,{g:()=>m});var a=n(848318),l=n(157907),i=n(322035),r=n(266163),s=n(17755),o=n(442313),d=n(205397);if(443==n.j)var c=n(316153);function u(){(0,i.FJ)("https://figma.enterprise.slack.com/archives/C07B9UYSW5V","_blank")}function m(e){if("ALPHA"!==(0,c.zS)())return null;let t=!(0,l.k)().sts_feedback;return a.createElement(d.Cf,{targetRect:e.targetRect,closeDropdown:e.onClose},a.createElement("div",{className:s.s.flex.flexColumn.itemsCenter.justifyCenter.alignCenter.w250.$,"data-preferred-theme":"dark"},a.createElement("div",{className:s.s.flex.flexColumn.itemsCenter.justifyCenter.pr12.pl12.pt4.if(t,s.s.pb12,s.s.pb4).$},a.createElement("div",{className:s.s.fontSemiBold.colorTextMenu.mb4.$},(0,o.t)("sites.alpha_cta.sites_is_still_under_wraps")),a.createElement("div",{className:s.s.colorTextMenu.$},(0,o.t)("sites.alpha_cta.be_careful_when_others_can_see_your_screen_and_only_share_feedback_below"))),t&&a.createElement(a.Fragment,null,a.createElement("div",{className:s.s.colorBorderMenu.bSolid.bt1.hFull.wFull.$}),a.createElement(r.$$,{className:s.s.mt8.$,onClick:u},(0,o.t)("sites.alpha_cta.share_feedback")))))}},782789:(e,t,n)=>{n.d(t,{j:()=>er});var a=n(848318),l=n(716544),i=n(513886),r=n(741419),s=n(673906),o=n(952423),d=n(179703),c=n(629829),u=n(157907),m=n(23459),p=n(818754),h=n(359480),g=n(575492),f=n(442313),E=n(790355),b=n(604613),v=n(992444),y=n(139736),_=n(449977),x=n(45584),S=n(328759),w=n(273199),C=n(166917),k=n(262032),T=n(657661),I=n(771430),N=n(454272),A=n(473431),R=n(134100),M=n(362201),D=n(541525),P=n(416105),j=n(326971),L=n(439984),O=n(439087),B=n(597817),F=n(251511),z=n(711337),$=n(68134),G=n(857188),U=n(654104),H=n(782623),K=n(670408),V=n(577023),W=n(192723),Y=n(369600),q=n(207715),X=n(770526),J=n(256429),Z=n(964e3),Q=n(501736);let ee=({guid:e,prevNodeGuid:t,nextNodeGuid:n,objectName:l,recordingKey:i,startRenaming:r,stopRenaming:s})=>{let[o,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),m=(0,a.useRef)(null),p=(0,a.useCallback)(e=>{e&&(m.current=e,m.current.select())},[]),h=U.rf(i,"dblclick",()=>{Q.F.trackFromFullscreen("action_rename_selection",{source:"click"}),r(e)}),g=U.AF(i,"change",e=>{d(e.currentTarget?.value)}),f=(...e)=>{s(...e),d(null)},E=U.v_(i,"keydown",e=>{if(!c){if(e.keyCode===G.Uz.ESCAPE)f(!1);else if(e.keyCode===G.Uz.ENTER)f(!0,m.current?.value,l);else{if(e.keyCode!==G.Uz.TAB)return(0,Z.jr)(e,Z.W0.NO),U.aH;e.preventDefault(),f(!0,m.current?.value,l),e.shiftKey?t&&r(t):n&&r(n)}}});return{renamingValue:o,initInputRef:p,onDoubleClick:h,onBlur:U.iQ(i,"blur",()=>{f(!0,m.current?.value,l)}),onKeyDown:E,onInputChange:g,setIsComposing:u}};var et=n(312417);function en({dropTarget:e,guid:t,defaultResponsiveSetGuid:n,isRenaming:i,nextNodeGuid:r,onContextMenu:s,onCtrlClick:o,onReorder:d,onShiftClick:u,prevNodeGuid:m,recordingKey:p,scrollTop:h,setDropTarget:g,startRenaming:f,stopRenaming:E,updateSelection:b}){let v=(0,C.Fk)((e,t)=>e.get(t)?.name??"",t),y=!!(0,C.Fk)((e,t)=>e.get(t)?.isResponsiveSet??"",t),x=(0,C.Fk)((e,t)=>e.get(t)?.editInfo?.lastEditedAt??"-",t),S=(0,l.d4)(e=>e.mirror.sceneGraphSelection),w=(0,k.K3)(S,t),T=(0,q.J2)((0,V.UK)().showGuids),I=(0,X.OG)({abbreviatedStateName:null,guid:t,name:v,shouldShowGuids:T,isResponsiveSet:y,isDefaultResponsiveSet:n===t}),N=(0,Y.tS)(),{guid:A,width:R,height:M}=(0,C.Fk)((e,t)=>e.get(t)?.childrenNodes.map(e=>({width:e.size.x,height:e.size.y,guid:e.guid})).reduce((e,t)=>t.width>e.width?t:e)??{guid:t,width:56,height:40},t),D=(0,W.yh)({fileKey:N,nodeId:A,width:112,height:M/(R/56)*2,version:x,reason:`${p}.thumbnail`,shouldSkip:!1,regenerateAfterImagesLoaded:!0}),P=(0,U.rf)(p,"click",(0,a.useCallback)(e=>{e.shiftKey?u(t):(0,G.Fo)(e)?o(t):b(t)},[b,u,o,t])),j=(0,U.rf)(p,"contextmenu",(0,a.useCallback)(e=>{s?.(t,e)},[s,t])),{renamingValue:L,initInputRef:O,onBlur:B,onDoubleClick:F,onInputChange:Z,onKeyDown:Q,setIsComposing:en}=ee({guid:t,prevNodeGuid:m,nextNodeGuid:r,objectName:I,recordingKey:p,startRenaming:f,stopRenaming:E}),el=(0,a.useRef)(null),ei=(0,$.s)(el),er=el.current,es=er?er.offsetTop+er.offsetHeight-h:0;(0,z.h4)(()=>({type:"collection-field-schema-item",item:{id:t,position:z.Nz.AFTER,value:I},element:el,canDrag:!0,onHover:e=>{e.dragItem.id!==n&&g(e.dropItem.id)},onDrop:e=>{e.dragItem.position&&e.dropItem.position&&e.dragItem.id!==e.dropItem.id&&e.dragItem.id!==n&&d(),g(null)},onStart:e=>{S[e.dragItem.id]||_.tJ([e.dragItem.id])}}));let eo=w?ea.webpageRowBgSelected:ei&&!e?ea.webpageRowBgHover:null;return a.createElement(a.Fragment,null,e===t&&a.createElement("div",{...c.Ay.props(ea.dropTarget,ea.dropTargetTransform(es-2)),"aria-hidden":!0}),a.createElement(K.b,{...c.Ay.props(ea.webpageRow,eo),onClick:P,onDoubleClick:F,onContextMenu:j,ref:el,tag:"div"},N&&D?a.createElement("div",{className:"x2lah0s x15yg21f x1vqgdyp x1cum3z5 x1kylzug x7z60cl x1n2onr6 xb3r6kr"},a.createElement(H.oW,{...c.Ay.props(ea.thumbnail,w?ea.thumbnailBorderSelected:ea.thumbnailBorder),src:D.src,alt:v})):a.createElement("div",{className:"x1u78mur x5kalc8 x1yjdb4r"}),a.createElement("div",{className:"x1tpqehw xs83m0k xb3r6kr xebhuq6"},i?a.createElement(J.ks,{autoCapitalize:"off",autoCorrect:"off",innerRef:O,onBlur:B,onChange:Z,onCompositionEnd:()=>en(!1),onCompositionStart:()=>en(!0),onKeyDown:Q,spellCheck:!1,value:null!==L?L:v}):a.createElement("span",null,I)),a.createElement("div",{...c.Ay.props(ea.webpageSettingsIcon,ei&&!i&&ea.webpageSettingsIconHover)},a.createElement(et.BX,{page:t,recordingKey:"webpagesListSettingsButton"}))))}let ea={webpageRow:{position:"x1n2onr6",display:"x78zum5",alignItems:"x6s0dn4",padding:"xe8ttls",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,overflow:"xb3r6kr",overflowX:null,overflowY:null,borderRadius:"x4pvk5x",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,zIndex:"x1vjfegm",$$css:!0},webpageRowBgSelected:{backgroundColor:"xcr9a89",$$css:!0},webpageRowBgHover:{backgroundColor:"x30nh5c",$$css:!0},webpageSettingsIcon:{position:"x10l6tqk",opacity:"xg01cxk",right:"x19up5dg",insetInlineStart:null,insetInlineEnd:null,backgroundColor:"x30nh5c",borderRadius:"x1pjcqnp",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},webpageSettingsIconHover:{opacity:"x1hc1fzr",$$css:!0},thumbnail:{position:"x10l6tqk",top:"x13vifvy",left:"xu96u03",insetInlineStart:null,insetInlineEnd:null,width:"x15yg21f",height:"xt7dq6l",$$css:!0},thumbnailBorder:{borderColor:"x7z60cl",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},thumbnailBorderSelected:{borderColor:"x1va2ikv",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},dropTarget:{height:"x36qwtl",display:"x78zum5",position:"x10l6tqk",top:"x13vifvy",left:"xu96u03",right:"x3m8u43",insetInlineStart:null,insetInlineEnd:null,width:"xh8yej3",pointerEvents:"x47corl",backgroundColor:"xi0y1te",borderRadius:"x4pvk5x",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,zIndex:"xbqvh2t",$$css:!0},dropTargetTransform:e=>[{transform:"x1uosm7l",$$css:!0},{"--transform":`translateY(${e}px)`}]};var el=n(184054),ei=n(27776);function er(e){let{sts_webpage_panel_redesign:t}=(0,u.k)(),[n,c]=(0,a.useState)(null),[z,$]=(0,a.useState)(null),{renamingNodeGuid:G,startRenamingNode:U,stopRenamingNode:H}=e,K=(0,y.Z)(),V=(0,l.wA)(),W=(0,l.d4)(e=>e.versionHistory),Y=(0,l.d4)(e=>!e.mirror.appModel.isReadOnly&&e.mirror.appModel.topLevelMode!==r.lyf.HISTORY),q=(0,l.d4)(e=>e.mirror.sceneGraphSelection),X=(0,a.useRef)(null),J=(0,a.useRef)(null),Z=(0,O.O)(),Q=(0,d.UN)(),ee=Q.get(Z),et=!Y,[ea,er]=(0,m.fp)(el.h0),{windowInnerHeight:es}=(0,h.l)(),eo=(0,A.q0)({scrollContainerInnerRef:X,windowInnerHeight:es}),[ed,ec]=(0,m.fp)(el.B_),{topLevelObjectRowHeight:eu}=a.useContext(w.y0),em=t?56:eu,ep=function(){let e=(0,y.Z)(),t=(0,l.wA)(),n=(0,O.O)(),a=(0,l.d4)(e=>e.mirror.appModel.currentPage),i=(0,l.d4)(e=>e.versionHistory),o=(0,D.U)(),c=(0,d.UN)(),u=(0,l.d4)(e=>e.mirror.appModel.pagesList);return l=>{l.stopPropagation();let d=c.getCurrentPage();(0,P.J)(()=>{s.l7.user("create-new-webpage",()=>{d&&d.guid===n?r.glU.createResponsiveSet(null):(0,j.$P)(n,a,i,t,(0,L.Fy)(u,n)===r.xal.LOADED,o,e).then(()=>{r.glU.createResponsiveSet(null)})})})}}(),eh=Q.getCurrentPage()?.defaultResponsiveSetId,eg=a.useCallback(e=>{K((0,x.QZ)({nodeId:e,alwaysPan:!0}))},[K]),ef=!q||Object.values(q).filter(Boolean).length;(0,a.useEffect)(()=>{ef||c(null)},[ef]);let eE=(0,C.Fk)((e,t)=>e.get(t)?.uiOrderedChildren,e.currentPageGuid)||[],eb=Math.min((0,F.V)(ee).length*em+8,Math.round(.25*(es-(0,p.hG)(ei.MGP)-N.uF))),ev=(0,a.useRef)(0),ey=Object.keys(q)[0];if((0,a.useEffect)(()=>{let e=G||ey;if(e){let t=eE.indexOf(e),n=(t+.5)*56,a=J.current?.getClipContainer().clientHeight||eb;(ev.current>n||ev.current+a<n)&&J.current?.scrollTo((t-1)*56)}},[ey,G]),(0,a.useEffect)(()=>{let e=e=>{if(z&&J.current){let t=J.current.getClipContainer(),n=t.clientHeight,a=t.getBoundingClientRect(),l=e.clientY-a.top+ev.current;if(l<ev.current){let e=ev.current-l;J.current.scrollTo(ev.current-(0,I.bm)(e,56));return}if(l>ev.current+n){let e=l-ev.current-n;J.current.scrollTo(ev.current+(0,I.bm)(e,56));return}}},t=()=>{z&&$(null)};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[z]),!(0,B.oz)())return null;let e_=e=>{(0,S.S)("panel"),(0,d.UN)().setCurrentPageFromNodeAsync(e),_.tJ([e]),v.Y5.commit(),eg(e),c(e)},ex=e=>{if(n){let t=eE.indexOf(e),a=eE.indexOf(n),l=eE.slice(Math.min(t,a),Math.max(t,a)+1);_.Dh(l),v.Y5.commit()}else e_(e),c(e)},eS=e=>{q[e]?_.D$([e]):(_.Dh([e]),c(e)),v.Y5.commit()},ew=()=>{if(!z)return;let e=eE.indexOf(z),t=(0,o.PA)(Q,z);t&&s.l7.user("reparent-selection",()=>_.Yu(t.guid,(0,I.Lc)(t,e)-1))},eC=(e,t)=>{let n=Q.get(e);if(!n)return;(0,k.K3)(q,n.guid)||e_(n.guid);let{clientX:a,clientY:l}=t;V(E.j7({type:b.J7,data:{clientX:a,clientY:l}}))},ek=()=>{let e={rowData:[],topByGuid:{},leftByGuid:{},heightByGuid:{},sectionById:{},totalHeight:0};if(!ee)return e;let t=(0,F.Y)(ee);for(let n=0;n<t.length;n++){let a=t[n],l=em*n;e.rowData.push({rowType:"object",level:0,height:eu,guid:a.guid,isExpanded:!1,isTemporarilyExpanded:!1,hasChildren:!1,isDescendantOfSymbol:!1,isDescendantOfInstance:!1,isDescendantOfModule:!1,prevNodeGuid:t[n-1]?.guid||null,nextNodeGuid:t[n+1]?.guid||null,recordingKey:`webpagesList.row.${n}`,top:l}),e.topByGuid[a.guid]=l,e.heightByGuid[a.guid]=em,e.totalHeight+=em}return e},eT=ek(),eI=ed?eo(ed):eb;return a.createElement(i.o,{eventListeners:["onClick"]},a.createElement("div",{className:"xh8yej3 xs83m0k xt0e3qv x1ba4aug xb3r6kr x78zum5 xdt5ytf x1n5zjp5 x1n2onr6"},a.createElement(R.J,{hasMultiplePageTypes:!1,hasScrollLine:!1,isComparingChanges:!1,isPagesOpen:ea,isReadOnly:!Y,onClickNewPage:ep,onTogglePages:()=>{et||er(!ea)},recordingKey:"webpagesListHeader",title:(0,f.t)("sites.panel.pages_panel.webpages"),tooltipText:(0,f.t)("sites.panel.pages_panel.add_new_webpage")}),ea&&a.createElement(M.wV,{className:"",size:eI,defaultSize:eb,onResize:e=>{ec(e),_.Uc("")},side:"bottom"},t?a.createElement(g.P,{className:"x78zum5 xdt5ytf x5yr21d x1yjhc3n",onContextMenu:e=>{e.stopPropagation(),e.preventDefault()},onScroll:e=>{ev.current=e},ref:J},eT.rowData.filter(I.N1).map(e=>a.createElement(en,{key:e.guid,defaultResponsiveSetGuid:eh,dropTarget:z,guid:e.guid,isRenaming:e.guid===G,nextNodeGuid:e.nextNodeGuid,onContextMenu:eC,onCtrlClick:eS,onReorder:ew,onShiftClick:ex,prevNodeGuid:e.prevNodeGuid,recordingKey:e.recordingKey,scrollTop:ev.current,setDropTarget:$,startRenaming:U,stopRenaming:H,updateSelection:e_}))):a.createElement(T.X,{currentPage:Z,customRowBuilder:ek,hideCanvasDropTargets:!0,hideRowActions:!0,isReadOnly:et,onRowContextMenu:eC,onSelectionUpdated:e_,panelType:I.g$.Webpage,recordingKey:"webpagesList",renamingGuid:G,scrollContainerInnerRef:e=>{X.current=e.current},startRenaming:U,stopRenaming:H,thumbnailGuid:null,versionHistory:W,width:e.width}))))}},734624:(e,t,n)=>{n.d(t,{jK:()=>F,F8:()=>j,tE:()=>A,j$:()=>O});var a=n(848318),l=n(445777),i=n(356505),r=n(897378),s=n(468189),o=n(882981),d=n(404827),c=n(754861),u=n(741419),m=n(23459),p=n(654104),h=n(182059),g=n(17755),f=n(442313),E=n(992444),b=n(449977),v=n(51910),y=n(6760),_=n(328162),x=n(382507),S=n(34417),w=n(620331),C=n(194948),k=n(822685),T=n(251511),I=n(786175);let N=(0,m.eU)(async e=>{let t=e(k.Qy);if(t){let n=await e(_.uh);return n.length>0?{[t]:n}:{}}return e(S.o)});function A({title:e,description:t}){return a.createElement("div",{className:"lint_error_modal--noErrors--yrO5N"},a.createElement(o.A,null),a.createElement("div",{className:"lint_error_modal--lintNoErrorsText--9EY-K"},a.createElement("div",{className:"lint_error_modal--header--SXufp"},e),a.createElement("div",{className:"lint_error_modal--body--F01se"},t)))}let R=e=>{b.tJ(e),u.glU.triggerAction("zoom-to-selection",void 0)},M=(e,t)=>{"function"==typeof e?e():(E.Y5.triggerActionInUserEditScope("sites-fix-issue",{fix:e,nodeIds:t}),R(t))};function D({recordingKey:e,error:t}){let[n,l]=a.useState(!1);if(0===t.recommendations.length)return null;if(1!==t.recommendations.length)return a.createElement("div",null,a.createElement(i.$n,{variant:"secondary",onClick:()=>{l(e=>!e)}},a.createElement("div",{className:"lint_error_modal--fixIssuesDropdownButton--vN-0U"},(0,f.t)("sites.lint.fix-issue"),a.createElement(d.r,null))),n&&a.createElement("div",{className:g.s.relative.$},a.createElement(h.X3,{options:t.recommendations.map(({label:e,action:n},l)=>a.createElement(h.c$,{key:l,onClick:()=>M(n,t.nodeIds)},e)),hideDropdown:()=>l(!1),positionAbsolute:!0}),a.createElement(h.X9,{closeDropdown:()=>l(!1)})));{let n=t.recommendations[0];return a.createElement(i.$n,{recordingKey:(0,p.Pt)(e,"fix"),onClick:()=>M(n.action,t.nodeIds),variant:"secondary"},n.label)}}function P({categories:e,error:t,recordingKey:n,showTargets:i}){let{label:s,icon:o}=e[t.category],d=t.icon??o;return(0,l.vA)(!!d,"icon is required"),a.createElement("div",{className:"lint_error_modal--lintErrorsItemRow--bwpl0"},a.createElement("div",{className:"lint_error_modal--lintErrorsItemLeft--pM6B6"},a.createElement("div",{className:"lint_error_modal--iconContainer--fIwYm"},d),a.createElement("div",{className:"lint_error_modal--lintContent--1OYXO"},a.createElement("div",{className:"lint_error_modal--issueContent--j9ORI"},a.createElement("div",{className:g.s.textBodyMediumStrong.$},s," \xb7 ",t.label),a.createElement("div",{className:g.s.colorTextSecondary.$},t.description)),a.createElement(D,{error:t,recordingKey:n}))),i&&a.createElement("div",{className:"lint_error_modal--errorTarget--kau97"},a.createElement(r.K,{"aria-label":(0,f.t)("sites.panel.sites_issues.select_nodes_with_issues"),onClick:()=>R(t.nodeIds),htmlAttributes:{"data-tooltip":(0,f.t)("sites.panel.sites_issues.select_nodes_with_issues"),"data-tooltip-type":"text"}},a.createElement(c.A,null))))}function j({recordingKey:e,lintingResults:t,onlyShowResponsiveSetGuids:n}){let l=(0,v.eY)(),i=m.md(k._b)?.mode!=="fullscreen",r=a.useMemo(x.uU,[]),s=a.useMemo(()=>(0,T.Y)(l.getCurrentPage()).map(({guid:e})=>{let n=t[e];return n?[e,n]:void 0}).filter(e=>{if(!e)return!1;let t=e[0];return!n||n.includes(t)}),[l,t,n]);return 0===Object.keys(t).length?a.createElement(A,{title:(0,f.t)("sites.panel.sites_issues.no_issues.title"),description:(0,f.t)("sites.panel.sites_issues.no_issues.description")}):a.createElement("div",{className:"lint_error_modal--lintErrorsContent--qTrOy"},s.map(([t,n])=>{let s=l.get(t)?.name,o="/"===s?(0,f.t)("sites.panel.home"):s;return a.createElement("div",{key:t},a.createElement("div",{className:"lint_error_modal--lintErrorLocation--lkNBw"},a.createElement("div",{className:g.s.textBodyMediumStrong.$},o)),a.createElement("div",{className:"lint_error_modal--lintErrorsList--kzsZc"},n.map(t=>a.createElement(P,{categories:r,key:t.name,error:t,recordingKey:(0,p.Pt)(e,t.name),showTargets:i}))))}))}function L(){return a.createElement("div",{className:"lint_error_modal--modalHeader--EsLbE"},(0,f.t)("sites.panel.sites_issues"))}function O(){return a.createElement("div",{className:"lint_error_modal--lintErrorsFallbackContent--dG9tc lint_error_modal--lintErrorsContent--qTrOy"},a.createElement(s.k,null),a.createElement("span",null,(0,f.tx)("sites.lint.looking-for-issues")))}function B(e){let t=(0,m.md)(k.Qy)?N:S.o,n=(0,m.md)(t);return a.createElement(j,{recordingKey:"sites-lint-error-modal",lintingResults:n,onlyShowResponsiveSetGuids:e.onlyShowResponsiveSetGuids})}function F(){let[e,t]=(0,m.fp)(w.o),[n,l]=(0,C._)(),i=a.useCallback(()=>{t(!1)},[t]);return(a.useEffect(()=>i,[i]),e)?a.createElement(y.vx,{alwaysEnsureModalOnScreen:!0,autoflowHeight:!0,dataTestId:"sites-lint-error-modal",ignoreCloseShortcut:!0,initialConstraints:l,initialPosition:n,initialWidth:344,maxHeight:615,onClose:i,scrollOverflow:!0,title:a.createElement(L,null),useOnScreenInitialPosition:!0,zIndex:I.sitesFullscreenPreviewZ+1},a.createElement(a.Suspense,{fallback:a.createElement(O,null)},a.createElement(B,null))):null}},194948:(e,t,n)=>{n.d(t,{_:()=>p});var a=n(741419),l=n(23459);if(443==n.j)var i=n(818754);if(443==n.j)var r=n(701780);if(443==n.j)var s=n(558874);var o=n(116111),d=n(207715),c=n(252244),u=n(822685),m=n(27776);function p(){let e=(0,c.GQ)(),t=(0,d.J2)(a.Ez5.editorPreferences().renderRulers),n=l.md(u._b)?.mode==="fullscreen",p=(0,i.jz)(m.y9S),h=(0,o.b)();return n?[new r.Mi(16,58),{x:"right",y:"top"}]:h?[new r.Mi(s._+12,12),{x:"left",y:"bottom"}]:[new r.Mi((t?p:0)+8+e+16,(t?p:0)+12),{x:"left",y:"top"}]}},747052:(e,t,n)=>{n.d(t,{AZ:()=>l,Aq:()=>a,Hd:()=>r,zg:()=>i});let a=624,l=640,i=160,r=16},850239:(e,t,n)=>{n.d(t,{M:()=>w});var a=n(848318),l=n(716544),i=n(719670),r=n(944250),s=n(350325),o=n(159491),d=n(553372),c=n(179703),u=n(157907),m=n(654104),p=n(442313),h=n(795005),g=n(610023),f=n(718451),E=n(950738),b=n(990807),v=n(665665),y=n(302839);n(992277),n(897392),n(502255),n(255603);class _ extends v.a3{}class x extends y.c${}function S({OriginalComponent:e,...t}){return a.createElement(e,{...t,className:"link_combo_box--ui3ComboBoxInput--8rKB- ellipsis--ellipsis--Tjyfa"})}function w({id:e,link:t,onLinkChange:n,disabled:r=!1,isHyperlinkEditor:s=!1,showCMSLinkFields:o=!1,recordingKey:d}){let w=(0,c.UN)(),k=w.getCurrentPage(),T=(0,a.useMemo)(()=>(k?.childrenNodes.filter(e=>e.isResponsiveSet&&!e.getNearestDakotaCollectionId())??[]).sort((e,t)=>e.name.localeCompare(t.name)),[k?.childrenNodes]),I=(0,g.mN)(),N=w.getDirectlySelectedNodes(),A=N[0]?.getNearestAncestorDakotaCollectionId()??null,R=N[0]?.isInDakotaRepeater?N[0]:null,M=(0,a.useMemo)(()=>R&&A?(k?.childrenNodes.filter(e=>e.isResponsiveSet&&e.getNearestDakotaCollectionId()===A)??[]).sort((e,t)=>e.name.localeCompare(t.name)):[],[k?.childrenNodes,R,A]),D=(0,h.u)(A??"").filter(e=>"link"===e.fieldType),P=A?[...M.map(e=>a.createElement(x,{value:{type:"internal_cms_item_page",collectionId:A,id:e.guid},recordingKey:m.Pt(d,"option",e.guid),key:e.guid})),...D.map(e=>a.createElement(x,{value:{type:"cms_link_field_alias",collectionId:A,fieldId:e.id,fieldName:e.name},recordingKey:m.Pt(d,"option",e.name),key:e.id}))]:[],j=o&&(0,u.k)().dakota_field_link&&I&&P.length>0,L=(0,l.wA)(),O=(0,E.Um)(),B=(0,a.useMemo)(()=>({format:e=>(0,f.gl)(e)?(0,p.t)("fullscreen.mixed"):e?.type==="header"?e.name:function(e,t,n){let a=(0,c.UN)();if(e?.type==="internal"){let n=t.find(t=>t.guid===e.id)?.name||(e.id?a?.get(e.id)?.name:void 0);return n?"/"===n?(0,p.t)("sites.panel.home"):n:""}if(e?.type==="url")return e.url;if(e?.type==="cms_link_field_alias")return e.fieldName;if(e?.type==="internal_cms_item_page"){let t=n.find(t=>t.guid===e.id)?.name;return t?("/"===t?(0,p.t)("sites.panel.home"):t)+"/slug":""}return""}(e,T,M),parse:e=>{if(!e)return null;let n=e===(0,p.t)("sites.panel.home")?"/":e,a=T.find(e=>e.name===n);if(a)return{type:"internal",id:a.guid};let l=D.find(e=>e.name===n);if(l)return{type:"cms_link_field_alias",collectionId:A??"",fieldId:l.id,fieldName:l.name};let i=M.find(e=>e.name===n);return i?{type:"internal_cms_item_page",collectionId:A??"",id:i.guid}:{type:"url",url:n,openInNewTab:!!(0,f.gl)(t)||t?.type!=="url"||t.openInNewTab}},isEqual:(e,t)=>(0,i.c2)(e,t)}),[t,T,A,D,M]);return a.createElement(v.ow,{value:{inputComponent:s?void 0:S}},a.createElement(_,{chevronClassName:s?"link_combo_box--sitesHyperlinkEditorChevron--X-K3X":void 0,disabled:r,dispatch:L,dropdownShown:O,dropdownWidth:172,forceInputPlaceholder:null===t,formatter:B,icon:s?null:C(t),id:e,inputClassName:s?"link_combo_box--sitesHyperlinkEditor--q6R2y input--darkInput--zfbnG":"link_combo_box--linkPanelComboBox--lmY7a",inputOnboardingKey:b.zu,omitValueFromDropdown:(0,f.gl)(t)||t?.type==="internal"||null==t,onChange:e=>{e?.type!=="header"&&n(e)},openBelowTarget:!0,placeholder:(0,p.t)("sites.panel.search_responsive_sets"),property:t,recordingKey:d},j&&[a.createElement(x,{isHeader:!0,disabled:!0,value:{type:"header",name:(0,p.t)("sites.panel.link_panel.cms_header")},key:"cms-header"}),...P,a.createElement(y.sK,{key:"cms-webpages-divider"}),a.createElement(x,{isHeader:!0,disabled:!0,value:{type:"header",name:(0,p.t)("sites.panel.link_panel.webpages_header")},key:"webpages-header"})],T.map(e=>a.createElement(x,{value:{type:"internal",id:e.guid},recordingKey:m.Pt(d,"option",e.name),key:e.guid}))))}let C=e=>(0,f.gl)(e)||e?.type!=="url"?a.createElement(d.N,null):e?.url.startsWith("mailto:")?a.createElement(r.f,null):e?.url.startsWith("tel:")?a.createElement(s.I,null):a.createElement(o.r,null)},555028:(e,t,n)=>{n.d(t,{rC:()=>B});var a=n(848318),l=n(716544);if(443==n.j)var i=n(897378);if(443==n.j)var r=n(960955);if(443==n.j)var s=n(596616);if(443==n.j)var o=n(893822);if(443==n.j)var d=n(245405);var c=n(741419),u=n(673906),m=n(897392);n(629829);var p=n(157907),h=n(541525),g=n(654104),f=n(442313);if(443==n.j)var E=n(389951);if(443==n.j)var b=n(399907);if(443==n.j)var v=n(610023);var y=n(449502),_=n(155651),x=n(992444),S=n(718451),w=n(52004),C=n(51910),k=n(790663);if(443==n.j)var T=n(990807);var I=n(255603),N=n(170042),A=n(256429),R=n(304059),M=n(545071),D=n(678517),P=n(541910);if(443==n.j)var j=n(786074);var L=n(669197),O=n(850239);function B({isInteractionModal:e=!1,recordingKey:t}){let n=(0,l.d4)(N.Cy),i=(0,C.KH)(),r=(0,C.eY)(),s=function(){let e=(0,h.U)();return(0,a.useCallback)(t=>{("URL"===t||"INTERNAL_NODE"===t)&&e("sites_add_link",{linkType:t})},[e])}(),o=(0,l.d4)(G),d=(0,p.k)().sites_text_links&&Object.keys(i).every(e=>{let t=r.get(e);return t?.type==="TEXT"&&!(0,j.FM)(n)}),m=(0,w.kl)("hyperlink"),g=d&&m&&Object.keys(m).length>0||!!(0,j.p4)(n);if(!((o||g)&&Object.keys(i).every(e=>{let t=r.get(e);return t&&(0,L.RZ)(t)})))return null;let f=e=>{u.l7.user(L.Tl,()=>{for(let t of Object.keys(i)){let n=r.get(t);n&&(0,L.qe)(n,e)}x.Y5.commit()}),s(e.connectionType)},E=(e,t)=>{u.l7.user("dakota-set-link-binding",()=>{for(let n of Object.keys(i)){let a=r.get(n);a&&(0,v.vE)(a,e).forEach(e=>e.setDakotaLinkFieldBindingOnPrototypeAction(t))}})},b=()=>{for(let e of Object.keys(i)){let t=r.get(e);t&&(0,L.RZ)(t)&&(t.prototypeInteractions=(0,L.eF)(t.prototypeInteractions))}};return d?a.createElement(z,{addLinkAction:f,addCMSAliasLinkAction:E,addCMSRepeaterToItemPageBindingAction:(e,t)=>{e&&u.l7.user("dakota-set-repeater-item-page-binding",()=>{for(let n of Object.keys(i)){let a=r.get(n);a&&(0,v.vE)(a,e).forEach(e=>{e.setDakotaItemPageLinkBindingOnHyperlink(t)})}})},removeLinkAction:()=>{u.l7.user(L.Tl,()=>{c.glU?.setHyperlinkOnCurrentSelection(""),b(),x.Y5.commit()})},removeEmptyInteractions:b,isPanelExpanded:g,disabled:!o,isInteractionModal:e,recordingKey:t}):a.createElement(F,{addLinkAction:f,addCMSAliasLinkAction:E,addCMSRepeaterToItemPageBindingAction:(e,t)=>{e&&u.l7.user("dakota-set-repeater-item-page-binding",()=>{for(let n of Object.keys(i)){let a=r.get(n);a&&(0,v.vE)(a,e).forEach(e=>{e.setDakotaItemPageLinkBindingOnPrototypeInteraction(t)})}})},removeLinkAction:()=>{u.l7.user(L.Tl,()=>{for(let e of Object.keys(i)){let t=r.get(e);t&&(0,L.RZ)(t)&&(0,L.Ve)(t)}x.Y5.commit()})},isPanelExpanded:g,disabled:!o,isInteractionModal:e,recordingKey:t})}function F({addLinkAction:e,addCMSAliasLinkAction:t,addCMSRepeaterToItemPageBindingAction:n,removeLinkAction:i,isPanelExpanded:r,disabled:s,isInteractionModal:o,recordingKey:d}){var u;let h=function(e){let t=e?.linkParam,n=t?.value?.collectionId??null,a=t?.value.fieldSchemaId??null,l=(0,v.VC)(n??null),i=(0,v.JD)(a??"")??void 0;return(0,p.k)().dakota_field_link&&t?U(t,a,l,n,i,e?.cmsTarget):e?.connectionType==="URL"&&e?.connectionURL?{type:"url",url:e.connectionURL,openInNewTab:e.openUrlInNewTab??!0}:e?.connectionType==="INTERNAL_NODE"&&e?.transitionNodeID?{type:"internal",id:m.dI(e.transitionNodeID)}:null}((u=(0,l.d4)(N.Cy).find(e=>e.event?.interactionType==="ON_CLICK")??null,u?.actions?.find(e=>"URL"===e.connectionType||"NAVIGATE"===e.navigationType)??null)),g=a=>{if(null===a)e({connectionType:"NONE"});else if("url"===a.type){e({connectionType:"URL",connectionURL:a.url,openUrlInNewTab:a.openInNewTab});return}else if("internal"===a.type){e({connectionType:"INTERNAL_NODE",transitionNodeID:m.sH(a.id)??m.Hr,navigationType:"NAVIGATE"});return}else"cms_link_field_alias"===a.type?t(a.collectionId,{type:c.Z_n.CMS_ALIAS,resolvedType:c.rXF.LINK,value:{collectionId:a.collectionId,fieldSchemaId:a.fieldId}}):"internal_cms_item_page"===a.type&&n(a.collectionId,a.id)};return a.createElement($,{link:h,onLinkChange:g,onAddLink:()=>{e({connectionType:"NONE"})},onRemoveLink:()=>{i()},onOpenInNewTabChange:e=>{h?.type==="url"&&g({...h,openInNewTab:e})},disabled:s,contentsVisibleOrMixed:r,isInteractionModal:o,recordingKey:d})}function z({addLinkAction:e,addCMSRepeaterToItemPageBindingAction:t,removeLinkAction:n,removeEmptyInteractions:l,isPanelExpanded:i,disabled:r,isInteractionModal:s,recordingKey:o}){let[d,h]=(0,w.lJ)("hyperlink"),g=(0,C.Mw)(),{variableConsumptionMap:f,setVariableConsumptionMap:b}=(0,P.R1)(),y=function(e,t){let n=(0,S.E7)(e),a=(0,E.i)("HYPERLINK"),l=t?.value.fieldSchemaId??null,i=(0,v.VC)(a),r=(0,v.JD)(l??"")??void 0;return(0,p.k)().dakota_field_link&&t?U(t,l,i,a,r,n?.cmsTarget):n&&void 0!==n.url?{type:"url",url:n.url,openInNewTab:n.openInNewTab}:n&&void 0!==n.guid?{type:"internal",id:m.dI(n.guid)}:(0,S.gl)(e)?S.oV:null}(d,function(e){let t=e?.HYPERLINK;return t&&!t.isMixed&&t.type===c.Z_n.CMS_ALIAS?t:null}(f));return a.createElement($,{link:y,onLinkChange:e=>{if(e?.type==="internal_cms_item_page")t(e.collectionId,e.id);else if(e?.type==="cms_link_field_alias"){if(!e.collectionId)return;u.l7.user("dakota-set-link-binding",()=>{let t={type:c.Z_n.CMS_ALIAS,resolvedType:c.rXF.LINK,value:{collectionId:e.collectionId,fieldSchemaId:e.fieldId}},n=[];if(g&&(n=(0,v.vE)(g,e.collectionId)),0===n.length||1===n.length&&n[0]===g){let e={};e.HYPERLINK=t,b(e)}else n.forEach(e=>{e.updateVariableConsumption("HYPERLINK",t)})})}else u.l7.user(L.Tl,()=>{null===e?c.glU?.setHyperlinkOnCurrentSelection(""):"url"===e.type?(c.glU?.setHyperlinkOnCurrentSelection(I.xT(e.url)),l&&l()):"internal"===e.type&&(c.glU?.setHyperlinkOnCurrentSelection(x.Y5.generateLinkToNode(e.id)),l&&l()),c.glU?.hideHyperlinkEditor()})},onAddLink:()=>{e({connectionType:"NONE"})},onRemoveLink:()=>{n()},onOpenInNewTabChange:e=>{h({...y,openInNewTab:e})},disabled:r,contentsVisibleOrMixed:i,isInteractionModal:s,recordingKey:o})}function $({link:e,onLinkChange:t,onAddLink:n,onRemoveLink:c,onOpenInNewTabChange:u,disabled:m,contentsVisibleOrMixed:p,isInteractionModal:h,recordingKey:E}){let b=(0,l.wA)(),v=e&&!(0,S.gl)(e)&&"url"===e.type,x=e&&!(0,S.gl)(e)&&e?.type==="url"&&(e?.url.startsWith("mailto:")||e?.url.startsWith("tel:")),w=(0,a.useCallback)(t=>{!e||(0,S.gl)(e)||e?.type!=="url"||(x?(0,k.UA)(b,e.url,"sites-link-panel"):b((0,y.RK)({rawInput:e.url,event:t})))},[b,x,e]),C=()=>!e||(0,S.gl)(e)||e?.type!=="url"?null:a.createElement(i.K,{onClick:w,children:x?a.createElement(o.a,null):a.createElement(d.V,null),"aria-label":x?(0,f.t)("sites.panel.copy_link"):(0,f.t)("sites.panel.open_link_new_tab")}),I=()=>a.createElement(a.Fragment,null,a.createElement(D.DE,{label:null,input:a.createElement(O.M,{id:h?"interaction_modal":"link_panel",disabled:m,recordingKey:E,link:e,onLinkChange:t,showCMSLinkFields:!0}),icon:C()}),v&&a.createElement(M.TN,null,a.createElement(r.S,{label:a.createElement(s.J,null,(0,f.tx)("proto.action_open_url_in_new_tab")),onChange:u,recordingKey:g.Pt(E,"open-url-in-new-tab-check"),checked:e.openInNewTab})));return a.createElement(_.fu,{name:"Link panel"},a.createElement(A.Zk,null,h?a.createElement("div",{className:"xz9dl7a"},I()):a.createElement(R.u,{title:(0,f.t)("sites.panel.link"),addProperty:n,removeProperty:c,contentsVisibleOrMixed:p,recordingKey:E,dataOnboardingKey:T.Mv,plusButtonLabel:(0,f.t)("sites.panel.create_link"),minusButtonLabel:(0,f.t)("sites.panel.remove_link")},I())))}function G(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!1}function U(e,t,n,a,l,i){if(!t||!n||!a||!l)return null;if(t!==n){if(l.fieldType===b._j.LINK)return{type:"cms_link_field_alias",collectionId:e.value.collectionId,fieldId:e.value.fieldSchemaId,fieldName:l?.name??""}}else if(t===n&&i?.nodeId!==void 0)return{type:"internal_cms_item_page",collectionId:a,id:m.dI(i.nodeId)};return null}},887426:(e,t,n)=>{n.d(t,{E:()=>i});var a=n(157907);if(443==n.j)var l=n(36789);function i(){return(0,l.aI)()&&!!(0,a.k)().bake_sb}},483365:(e,t,n)=>{n.d(t,{A:()=>I});var a=n(848318),l=n(716544),i=n(776402),r=n(777611),s=n(731755),o=n(356505),d=n(596616),c=n(66402),u=n(599952),m=n(150583),p=n(629829),h=n(653959),g=n(442313),f=n(950738),E=n(369600),b=n(506047),v=n(464012),y=n(302839),_=n(999556),x=n(864517);function S({name:e,setName:t,selectedRegion:n,setSelectedRegion:l,dbPass:i,setDbPass:r}){return a.createElement("div",{className:"x1g8o3q3 x78zum5 xdt5ytf x1c1vhfx"},a.createElement(w,{label:(0,g.t)("figmake.settings.create_project_modal.project_name.label"),placeholder:(0,g.t)("figmake.settings.create_project_modal.project_name.placeholder"),value:e,setValue:t}),a.createElement(k,{selectedRegion:n,setSelectedRegion:l}),a.createElement(w,{label:(0,g.t)("figmake.settings.create_project_modal.db_pass.label"),placeholder:(0,g.t)("figmake.settings.create_project_modal.db_pass.placeholder"),value:i,setValue:r,detailText:"The stronger the better.",isPassword:!0}))}function w({label:e,placeholder:t,value:n,setValue:l,detailText:i,isPassword:r=!1}){return a.createElement("div",{className:"x78zum5 xdt5ytf x1v2ro7d"},a.createElement(d.J,{htmlFor:e,...p.Ay.props(T.textBodyMediumStrong)},e),a.createElement("div",{className:"x78zum5 xdt5ytf x1jnr06f"},a.createElement(c.p,{type:r?"password":"text",id:e,value:n,onChange:l,placeholder:t,size:"lg"}),i&&a.createElement("p",{...p.Ay.props(T.textBodyMediumSecondary)},i)))}var C=(e=>(e.US_EAST_1="us-east-1",e.US_EAST_2="us-east-2",e.US_WEST_1="us-west-1",e.AP_SOUTHEAST_1="ap-southeast-1",e.AP_NORTHEAST_1="ap-northeast-1",e.AP_NORTHEAST_2="ap-northeast-2",e.AP_SOUTHEAST_2="ap-southeast-2",e.EU_WEST_1="eu-west-1",e.EU_WEST_2="eu-west-2",e.EU_WEST_3="eu-west-3",e.EU_NORTH_1="eu-north-1",e.EU_CENTRAL_1="eu-central-1",e.EU_CENTRAL_2="eu-central-2",e.CA_CENTRAL_1="ca-central-1",e.AP_SOUTH_1="ap-south-1",e.SA_EAST_1="sa-east-1",e))(C||{});function k({selectedRegion:e,setSelectedRegion:t}){let n=(0,l.wA)(),i=(0,f.Um)(),r=e=>{switch(e){case"us-east-1":return(0,g.t)("figmake.settings.create_project_modal.region.us_east_1");case"us-east-2":return(0,g.t)("figmake.settings.create_project_modal.region.us_east_2");case"us-west-1":return(0,g.t)("figmake.settings.create_project_modal.region.us_west_1");case"ap-southeast-1":return(0,g.t)("figmake.settings.create_project_modal.region.ap_southeast_1");case"ap-northeast-1":return(0,g.t)("figmake.settings.create_project_modal.region.ap_northeast_1");case"ap-northeast-2":return(0,g.t)("figmake.settings.create_project_modal.region.ap_northeast_2");case"ap-southeast-2":return(0,g.t)("figmake.settings.create_project_modal.region.ap_southeast_2");case"eu-west-1":return(0,g.t)("figmake.settings.create_project_modal.region.eu_west_1");case"eu-west-2":return(0,g.t)("figmake.settings.create_project_modal.region.eu_west_2");case"eu-west-3":return(0,g.t)("figmake.settings.create_project_modal.region.eu_west_3");case"eu-north-1":return(0,g.t)("figmake.settings.create_project_modal.region.eu_north_1");case"eu-central-1":return(0,g.t)("figmake.settings.create_project_modal.region.eu_central_1");case"eu-central-2":return(0,g.t)("figmake.settings.create_project_modal.region.eu_central_2");case"ca-central-1":return(0,g.t)("figmake.settings.create_project_modal.region.ca_central_1");case"ap-south-1":return(0,g.t)("figmake.settings.create_project_modal.region.ap_south_1");case"sa-east-1":return(0,g.t)("figmake.settings.create_project_modal.region.sa_east_1");default:throw Error("Unknown region")}};return a.createElement("div",{className:"x78zum5 xdt5ytf x1v2ro7d"},a.createElement(d.J,{htmlFor:"supabase-project-database-region-select",...p.Ay.props(T.textBodyMediumStrong)},(0,g.t)("figmake.settings.create_project_modal.region.label")),a.createElement(y.l6,{inputClassName:"x1kowl60 x6sinrp",id:"supabase-project-database-region-select",property:e,formatter:{format:r},onChange:t,dispatch:n,dropdownShown:i},Object.values(C).map(e=>a.createElement(y.c$,{value:e,key:e},r(e)))))}let T={textBodyMediumStrong:{...u.g.textBodyMediumStrong,$$css:!0},textBodyMediumSecondary:{...u.g.textBodyMedium,color:"x1n0bwc9",$$css:!0}},I=(0,v.Ju)(function(e){let t=i.hS(e),n=(0,E.tS)(),[l,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[p,f]=(0,a.useState)("us-east-1"),[v,y]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!0),[,k]=(0,h.IT)((0,_.TT)(n)),T=(0,x.Nh)(),I=(0,x.ql)();(0,a.useEffect)(()=>{l.length>0&&c.length>0?C(!1):C(!0)},[l,c]);let N=async()=>{if(!n||!T)return;y(!0);let a=await b.R.createProject({fileKey:n,projectName:l,dbPass:c,region:p});201!==a.status&&m.vF.error("Failed to create project",a.cause);let i=a.data.meta.id;if(!i){m.vF.error("Failed to find project id after creating it");return}let r=await b.R.connectFile({fileKey:n,supabaseProjectId:i,supabaseOrgId:T.id});(r.status<200||r.status>=300)&&m.vF.error("Failed to connect project",r.cause),await k.refetch(),e.toolCallId&&e.toolName&&I({toolCallId:e.toolCallId,toolName:e.toolName,message:"Connected to Supabase."}),t.props.close({source:"button"})};return a.createElement(r.bL,{manager:t,width:386},a.createElement(r.Rq,{onSubmit:N},a.createElement(s.Y9,null,a.createElement(s.hE,null,(0,g.t)("figmake.settings.create_project_modal.title"))),a.createElement(s.nB,{scrolling:"none"},a.createElement(S,{name:l,setName:d,selectedRegion:p,setSelectedRegion:f,dbPass:c,setDbPass:u})),a.createElement(s.wi,null,a.createElement(s.jk,{className:"x78zum5 x1q0g3np x13a6bvl x167g77z xhxeiv9 xh8yej3 x9f619"},a.createElement(o.$n,{variant:"secondary",onClick:()=>t.props.close({source:"button"})},(0,g.t)("figmake.settings.create_project_modal.button.cancel")),v?a.createElement(x.lV,{variant:"primary"},(0,g.t)("figmake.settings.create_project_modal.button.submit.loading")):a.createElement(o.$n,{variant:"primary",type:"submit",disabled:w},(0,g.t)("figmake.settings.create_project_modal.button.submit"))))))},"CreateProjectModal")},163288:(e,t,n)=>{n.d(t,{A:()=>d,F:()=>o});var a=n(23459),l=n(369600),i=n(506047),r=n(580270),s=n(783029);function o(){let e=a.zl.get(r.Ld);a.zl.set(r.Ld,!e),a.zl.set(r.Xl,!1)}function d({beforeDeploy:e,afterDeploy:t}){let[n,o]=(0,a.fp)(r.p7),d=(0,l.tS)();return{deployStatus:n,handlePublishEdgeFunction:async()=>{if(!d){console.error("No open file key found");return}try{e&&e(),o(r.Ut.DEPLOYING);let n=(0,s.mb)(),a={};for(let[e,t]of Object.entries(n))if(e.includes("/supabase/functions/server/")){let n=e.split("/").pop(),l=t.sourceCode;n&&l&&(a[n]=l)}if(!a["index.tsx"]){console.error("No index.tsx file found in the code files");return}await i.R.deployEdgeFunction({fileKey:d,files:a}),o(r.Ut.SUCCESS),t&&t()}catch(e){console.error("Error deploying edge function:",e),o(r.Ut.INIT)}}}}},999556:(e,t,n)=>{n.d(t,{GO:()=>o,Kj:()=>h,NT:()=>u,TT:()=>d,Ub:()=>p,YF:()=>c,eU:()=>s,rY:()=>m,y7:()=>i});var a=n(997894),l=n(506047);let i=a.M4.Query({fetch:async e=>{if(!e)return{authenticated:!1};let t=await l.R.getFileAuthorized({fileKey:e});return{authenticated:!!t.data.meta?.authorized}},key:"isFigMakeFileAuthenticated"});async function r(e){if(!e)return console.error("No file key found"),{needsToPauseProject:!1};let t=await l.R.getExistingProjects({fileKey:e}),n=t.data.meta?.filter(e=>e.status.toLowerCase().startsWith("active")).length,a=(await l.R.getOrganizations({fileKey:e})).data.meta;if(!a||!a.length)return console.error("No organizations found"),{needsToPauseProject:!1};a.length>1&&console.warn("Multiple organizations found");let i=a[0];return i?{needsToPauseProject:"free"===(await l.R.getOrganization({fileKey:e,orgId:i.id})).data.meta.plan&&n>=2}:(console.error("No organization found"),{needsToPauseProject:!1})}let s=a.M4.Query({fetch:async e=>await r(e),key:"needsToPauseSupabaseProject"}),o=a.M4.Query({fetch:async e=>e.fileKey&&e.projectId?(await l.R.getProject({fileKey:e.fileKey,projectId:e.projectId})).data.meta:null,key:"getSupabaseProject",refetchIntervalMs:2e3}),d=a.M4.Query({fetch:async e=>e?{connectedProject:(await l.R.getConnection({fileKey:e})).data.meta}:{connectedProject:null},key:"getSupabaseConnectedProject"}),c=a.M4.Query({fetch:async e=>e?(await l.R.getExistingProjects({fileKey:e})).data.meta:null,key:"getSupabaseExistingProjects"});a.M4.Query({fetch:async e=>e?(await l.R.getConnectedOrganization({fileKey:e})).data.meta:null,key:"getSupabaseOrganization"});let u=a.M4.Query({fetch:async e=>e?(await l.R.getOrganizations({fileKey:e})).data.meta:null,key:"getSupabaseOrganizations"}),m=a.M4.Mutation(async(e,{query:t})=>{let{fileKey:n}=e;return t.mutate(d(n),e=>{e.connectedProject=null}),await l.R.disconnectFile({fileKey:n})}),p=a.M4.Mutation((e,{query:t})=>{t.mutate(s(e.fileKey),e=>{e.needsToPauseProject=!1})}),h=a.M4.Mutation((e,{query:t})=>{let{fileKey:n}=e;t.mutate(i(n),e=>{e.authenticated=!0})})},864517:(e,t,n)=>{n.d(t,{Gu:()=>P,ND:()=>k,Nh:()=>A,Sy:()=>w,YY:()=>T,Yr:()=>C,fd:()=>N,jc:()=>j,kR:()=>M,lV:()=>L,n1:()=>R,p_:()=>D,ql:()=>I});var a=n(848318),l=n(248427);if(443==n.j)var i=n(468189);if(443==n.j)var r=n(356505);if(443==n.j)var s=n(384409);var o=n(599952),d=n(741419);if(443==n.j)var c=n(150583);var u=n(629829),m=n(23459),p=n(442313),h=n(369600),g=n(661780),f=n(997894),E=n(140469),b=n(608080),v=n(580270),y=n(682601),_=n(976282),x=n(42135),S=n(999556);let w="https://supabase.com/pricing",C="/api/integrations/supabase/authorize",k=(0,m.eU)({type:"loading"});function T(){let e=(0,h.tS)(),[t]=(0,f.IT)((0,S.YF)(e)),n=t.data;return{activeProjects:n?.filter(e=>e.status.toLowerCase().startsWith("active")||"pausing"===e.status.toLowerCase())??[],isLoading:"loading"===t.status}}function I(){let e=(0,h.tS)(),{codeLibraryInstance:t}=(0,x.oA)(),n=(0,g.iZ)(),a=(0,m.md)(E.h8),i=(0,_.qE)(e,t?.guid||"");return({toolCallId:r,toolName:s,message:o})=>{if(!d.glU||!n||!t)return;let c={id:d.glU.generateUniqueID(),type:d.K$p.TOOL_MESSAGE,userId:n.id,textContent:(0,l.J6)({plainText:""}),sentAt:Date.now(),toolCalls:[],toolResults:[(0,l.k4)({toolCallId:r,toolName:s,result:{success:!0,message:o}})]},u=(0,_.Pd)(e,t.guid||"",c.id);(0,y.y)({featureType:b.lV.FIGMAKE,chatMessagesNode:t,newMessage:c,user:n,modelConfig:a,persistentEntityId:i,clientLifecycleId:u,setInput:()=>{},fileKey:e})}}function N(){let e=(0,h.tS)(),[t,n]=(0,m.fp)(v.kz),l=t?.id??null,i=(0,f.gY)(S.Ub),[r]=(0,f.IT)((0,S.GO)({fileKey:e,projectId:l})),s=r.data?.status?.toLowerCase()==="inactive";return(0,a.useEffect)(()=>{e&&l&&s&&(n(null),i({fileKey:e}))},[l,s,n,i,e]),l}function A(){let e=(0,h.tS)(),[t]=(0,f.IT)((0,S.NT)(e)),n=t.data;return"loading"===t.status?null:n&&0!==n.length?(n.length>1&&c.vF.warn("Multiple Supabase organizations found, only displaying the first one"),n[0]):(c.vF.error("No Supabase organizations found"),null)}function R(e){return`https://supabase.com/dashboard/org/${e}/general`}function M(e){return`https://supabase.com/dashboard/project/${e}`}function D({organization:e}){return a.createElement("div",{className:"x1tamke2 xh8yej3 x9f619"},a.createElement("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xh8yej3"},a.createElement("div",{className:"x78zum5 xdt5ytf x1nhvcw1 xdpxx8g"},e&&a.createElement("p",{...u.Ay.props(O.textBodyLargeStrong)},e.name),a.createElement("p",{...u.Ay.props(O.textBodyMediumSecondary)},(0,p.t)("figmake.settings.project.org_info.title"))),e&&a.createElement(j,{url:R(e.id),linkText:(0,p.t)("figmake.settings.project.org_info.link")})))}function P(){return a.createElement("div",{className:"x78zum5 xl56j7k x6s0dn4 xh8yej3 x5yr21d"},a.createElement(i.k,null))}function j({url:e,linkText:t}){return a.createElement("a",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 x1wt4b31 xebhuq6",href:e},a.createElement(s.S,null),a.createElement("p",{...u.Ay.props(O.textBodyMedium)},t))}function L({variant:e,children:t}){return a.createElement(r.$n,{variant:e,disabled:!0},a.createElement("div",{className:"x78zum5 x1q0g3np x6s0dn4"},a.createElement(i.k,null),a.createElement("p",{...u.Ay.props(O.textBodyMedium)},t)))}let O={textBodyMedium:{...o.g.textBodyMedium,$$css:!0},textBodyMediumSecondary:{...o.g.textBodyMedium,color:"x1n0bwc9",$$css:!0},textBodyLargeStrong:{...o.g.textBodyLargeStrong,$$css:!0}}},53258:(e,t,n)=>{n.d(t,{M5:()=>T,Sv:()=>A,hm:()=>I});var a=n(848318);if(443==n.j)var l=n(950947);if(443==n.j)var i=n(643727);if(443==n.j)var r=n(760717);if(443==n.j)var s=n(595429);if(443==n.j)var o=n(897864);var d=n(599952),c=n(179703),u=n(629829),m=n(157907),p=n(23459),h=n(116111),g=n(166365),f=n(17755),E=n(442313),b=n(369600),v=n(187536),y=n(776785),_=n(733787),x=n(776332);if(443==n.j)var S=n(251511);var w=n(887426);if(443==n.j)var C=n(114344);let k=()=>{let e=(0,c.UN)().getCurrentPage(),t=(0,c.UN)().getDirectlySelectedNodes(),n=1===t.length?t[0]:void 0,l=(0,p.Xr)(_.jI),i=(0,h.b)();return{currentPage:e,setWebpage:(0,a.useCallback)(e=>{if(!i){let t=(0,c.UN)().getCurrentPage();t&&n?.guid!==e&&t.setSelectionToSingleNode(e)}l(e)},[i,n,l])}};function T(){let{currentPage:e,setWebpage:t}=k(),n=(0,m.k)().sts_custom_domains,l=(0,b.tS)(),i=(0,y._t)(l??"");return a.createElement(a.Fragment,null,a.createElement(M,{pageId:x.p.WEBSITE,pageName:(0,E.t)("sites.metadata.left_panel.site.label"),node:e,setWebpage:t}),n&&i?a.createElement(M,{pageId:x.p.DOMAINS,pageName:(0,E.t)("sites.metadata.left_panel.site.domains"),node:e,setWebpage:t}):null)}function I(){let{currentPage:e,setWebpage:t}=k(),n=(0,S.Y)(e);return a.createElement(a.Fragment,null,n.map(e=>a.createElement(M,{key:e.guid,pageId:e.guid,node:e,setWebpage:t})))}function N(){let{currentPage:e,setWebpage:t}=k();return(0,w.E)()?a.createElement(a.Fragment,null,a.createElement("div",{className:"xv42yna xh8yej3 xjm9jq1"}),a.createElement(M,{pageId:x.p.SUPABASE,pageName:"Supabase",node:e,setWebpage:t})):null}function A(){let e=(0,v.Oc)();return a.createElement("nav",{className:f.s.px8.py12.flex.flexColumn.gap8.$},a.createElement(T,null),a.createElement(I,null),e&&a.createElement(N,null))}let R=({isPage:e,isHome:t,isPageTakeover:n,pageId:d,isLeftRail:c})=>{if(c&&e)return null;if(n){if(d===x.p.WEBSITE)return a.createElement(l.Z,null);if(d===x.p.DOMAINS)return a.createElement(i.J,null);if(d===x.p.SUPABASE)return a.createElement(g.B,{svg:C.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"24px",svgHeight:"24px"})}return e?t?a.createElement(r.Q,{className:f.s.flexShrink0.$}):a.createElement(s.A,{className:f.s.flexShrink0.$}):d===x.p.SUPABASE?a.createElement("div",{className:"x78zum5 x6s0dn4 xlup9mm x1kky2od"},a.createElement(g.B,{svg:C.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"12px",svgHeight:"12px"})):a.createElement(o.$,null)};function M({pageId:e,pageName:t,setWebpage:n,node:l}){let i=(0,p.md)(_.jI),r=l?.type==="RESPONSIVE_SET",s=l?.name==="/",o=s?(0,E.t)("sites.panel.home"):l?.name,d=null!==i?e===i:"website"===e,c=(0,h.b)(),m=t=>{t.preventDefault(),n(e)},g=R({isPage:r,isHome:s,isPageTakeover:c,pageId:e,isLeftRail:c});return a.createElement("button",{...u.Ay.props(D.webpageItem,d&&D.webpageItemActive,!g&&D.webpageItemNoIcon),onMouseDown:m,onClick:m},g,a.createElement("div",{className:"xlyipyv xb3r6kr xuxw1ft"},t||o))}let D={webpageItem:{display:"x78zum5",justifyContent:"xlqzeqv",padding:"xfawy5m",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingBlock:null,paddingTop:null,paddingBottom:null,paddingRight:"xy13l1i",paddingInlineStart:null,paddingInlineEnd:null,alignItems:"x6s0dn4",backgroundColor:"xjbqb8w",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,textOverflow:"xlyipyv",height:"xxk0z11",marginTop:"x1gslohp",marginBottom:"x12nagc",$$css:!0},webpageItemActive:{backgroundColor:"x1v8gsql",...d.g.textBodyMediumStrong,$$css:!0},webpageItemNoIcon:{paddingLeft:"x163pfp",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0}}},801939:(e,t,n)=>{n.d(t,{BC:()=>A,L0:()=>D,Y9:()=>I});var a=n(848318),l=n(716544);if(443==n.j)var i=n(593815);if(443==n.j)var r=n(727204);if(443==n.j)var s=n(299148);if(443==n.j)var o=n(257256);if(443==n.j)var d=n(111116);if(443==n.j)var c=n(104885);if(443==n.j)var u=n(389567);if(443==n.j)var m=n(857242);if(443==n.j)var p=n(243972);var h=n(179703),g=n(818754),f=n(182059),E=n(190823),b=n(17755),v=n(442313),y=n(500276);if(443==n.j)var _=n(919546);var x=n(449977),S=n(950738),w=n(205397);if(443==n.j)var C=n(747052);var k=n(701417),T=n(550177);function I({children:e}){return a.createElement("h2",{className:b.s.textBodyLargeStrong.px16.py8.$},e)}function N({children:e,useLabel:t=!0}){return t?a.createElement("label",null,e):a.createElement("div",null,e)}function A({label:e,control:t,description:n,isInvalid:l,useLabel:r=!0}){return a.createElement("div",{style:{paddingBottom:"8px",paddingLeft:C.Hd,paddingRight:C.Hd},className:b.s.flex.flexColumn.$},a.createElement(N,{useLabel:r},a.createElement("div",{className:b.s.textBodyMediumStrong.minH32.flex.itemsCenter.$},e),a.createElement("div",{className:b.s.flex.itemsCenter.$},t,l&&a.createElement(i.Z,{style:{marginLeft:"-28px","--color-icon":"var(--color-icon-warning-pressed, --fallback-color-icon-warning-pressed)"}})),n?a.createElement("div",{className:b.s.colorTextSecondary.if(l,b.s.colorTextWarning).textBodyMedium.minH24.flex.itemsCenter.$},n):null))}let R=(0,g.jz)(k.t0),M=(0,g.jz)(k.hX);function D({addImage:e,selectImage:t,removeImage:n,imageCandidates:i,base64String:s,nodeId:o,dropdownType:d,removeString:c,disableUpload:u}){let m=(0,S.Um)(),p=(0,l.wA)(),g=o?(0,h.UN)().get(o):void 0;(0,a.useEffect)(()=>{o&&!g&&t("")},[g,o,t]);let C=u?0:R,k=i?.length||0,I=C+(k?M:0)+k*R;g&&(I+=R+M);let N=u&&!i?.length&&!g,A=a.createElement(a.Fragment,null,a.createElement(f.MM,{className:b.s.flex.$,checked:!1,key:"new",id:"new",onClick:e,onMouseDown:e=>e.preventDefault()},a.createElement(r.T,null),a.createElement("div",{className:b.s.p4.$},(0,v.t)("sites.metadata.image_selector.upload_image"))),i?.length?a.createElement(f.wv,null):null);return a.createElement(E.V,{showingDropdown:m?.type===d,type:d,dispatch:p,className:T.Ie,chevronClassName:b.s.mr4.$,isDisabled:N},a.createElement("div",{className:b.s.w32.h32.radiusSmall.flexShrink0.bgContain.bgNoRepeat.bgPosCenter.$,style:{backgroundImage:`url(${s??(0,_.A)()})`,border:"1px solid var(--color-border)"}}),a.createElement("div",{className:b.s.flexGrow1.$},g?g.name:a.createElement("span",{className:T.M8},N?(0,v.t)("sites.metadata.image_selector.nothing_to_select"):(0,v.t)("sites.metadata.image_selector.placeholder"))),m?.type===d&&a.createElement(f.gw,{dispatch:p,positionFixed:!0,style:y.sx.add({width:"272px",top:m?.data.position.top+48+8,left:m?.data.position.left}).$},a.createElement(w.g1,{dropdownChildrenHeight:I,maxDropdownHeight:e=>e-m?.data.position.top-84},!u&&A,i?.map(e=>a.createElement(f.MM,{className:b.s.flex.$,checked:e.guid===o,key:e.guid,id:e.guid,onClick:()=>{t(e.guid)},onMouseDown:e=>e.preventDefault(),onPointerOver:()=>{x.Uc(e.guid)},onPointerOut:()=>{x.Uc("")}},a.createElement("span",{className:b.s.minW24.$},P(e.type)),a.createElement("div",{className:T.Rm},e.name),a.createElement("div",{className:b.s.colorTextMenuSecondary.$},v.t("sites.metadata.image_selector.dropdown_dimensions",{width:Math.trunc(e.size.x),height:Math.trunc(e.size.y)})))),!!g&&a.createElement(a.Fragment,null,a.createElement(f.wv,null),a.createElement(f.MM,{className:b.s.flex.$,checked:!1,key:"remove",id:"remove",onClick:n,onMouseDown:e=>e.preventDefault()},a.createElement(r.T,{className:b.s.invisible.$}),a.createElement("div",{className:b.s.p4.$},c))))))}let P=e=>{switch(e){case"GROUP":return a.createElement(s.M,null);case"FRAME":return a.createElement(o.v,null);case"VECTOR":return a.createElement(d.w,null);case"STAR":return a.createElement(c.e,null);case"ELLIPSE":return a.createElement(u.m,null);case"RECTANGLE":case"ROUNDED_RECTANGLE":return a.createElement(r.T,null);case"TEXT":return a.createElement(m.B,null);case"INSTANCE":return a.createElement(p.y,null);default:return a.createElement(r.T,{className:b.s.invisible.$})}}},354098:(e,t,n)=>{n.d(t,{TN:()=>et,V1:()=>V,RI:()=>Z,Qd:()=>X,Ld:()=>Y,OE:()=>el,Xw:()=>J,Re:()=>Q,Ls:()=>K,jZ:()=>en});var a=n(848318),l=n(960955),i=n(596616),r=n(468189),s=n(356505),o=n(741419),d=n(673906),c=n(897392),u=n(157907),m=n(23459),p=n(536384),h=n.n(p),g=n(857188),f=n(195507),E=n(654104),b=n(145015),v=n(17755),y=n(442313),_=n(500276),x=n(604613),S=n(992444),w=n(369600),C=n(166917),k=n(503024),T=n(678290),I=n(900118),N=n(116111),A=n(747052);let R=a.lazy(()=>n.e(1157).then(n.bind(n,111157)));function M({code:e,onChange:t,placeholder:n}){let l=(0,N.b)()?A.AZ-2*A.Hd:A.Aq-A.zg-2*A.Hd-1;return a.createElement(a.Suspense,{fallback:null},a.createElement(R,{value:e,width:`${l}px`,minHeight:"24px",maxHeight:"152px",onChange:e=>{t(e)},placeholder:n}))}var D=n(187536),P=n(251511);function j(e){return(0,C.Fk)(t=>{let n=t.getCurrentPage(),a=n?.responsiveSetSettings,l=(0,P.V)(n).find(t=>t.guid===e),i=l?.responsiveSetSettings||a;return{title:i?.title??"",description:i?.description??"",lang:i?.lang??"",faviconID:i?.faviconID??"",socialImageID:i?.socialImageID??"",googleAnalyticsID:i?.googleAnalyticsID??"",blockSearchIndexing:i?.blockSearchIndexing,customCodeHeadStart:i?.customCodeHeadStart??"",customCodeHeadEnd:i?.customCodeHeadEnd??"",customCodeBodyStart:i?.customCodeBodyStart??"",customCodeBodyEnd:i?.customCodeBodyEnd??""}})}var L=n(733787),O=n(532091),B=n(614161),F=n(824563),z=n(801939),$=n(406265),G=n(31972),U=n(550177);let H=e=>{e.keyCode!==g.Uz.ESCAPE&&(e.keyCode!==g.Uz.ENTER||e.shiftKey)||(e.stopPropagation(),e.currentTarget.blur())};function K({recordingKey:e,page:t,isSite:n}){let l=E.Pt(e,"title"),i=(0,D.Oc)(),r=a.useMemo(()=>i?(0,y.t)("figmake.metadata.controls.site_title.label"):n?(0,y.t)("sites.metadata.controls.title_site.label"):(0,y.t)("sites.metadata.controls.title_page.label"),[n,i]);return a.createElement(z.BC,{label:r,control:n?a.createElement(G.q,{size:"lg",recordingKey:l}):a.createElement(G.f,{guid:t,size:"lg",recordingKey:l}),description:n?void 0:(0,y.t)("sites.metadata.controls.title_page.infotext")})}function V({recordingKey:e,page:t,isSite:n}){let l=j(t),[i,r]=(0,a.useState)(l.description),s=(0,$.OG)("description"),c=(0,D.Oc)(),u=a.useMemo(()=>c?(0,y.t)("figmake.metadata.controls.description_site.label"):n?(0,y.t)("sites.metadata.controls.description_site.label"):(0,y.t)("sites.metadata.controls.description_page.label"),[c,n]);return a.createElement(z.BC,{label:u,control:a.createElement(T.v,{className:h()(x.Dm,U.$S),onChange:e=>{let n=e.currentTarget.value;n?r(n):r(null),d.l7.user("set-responsive-set-settings",()=>{o.glU?.setResponsiveSetSettings({description:n?.trim()??void 0},[t])}),s()},onKeyDown:H,value:i??l.description,placeholder:n?(0,y.t)("sites.metadata.controls.description_site.placeholder"):(0,y.t)("sites.metadata.controls.description_page.placeholder"),recordingKey:E.Pt(e,"description"),minHeight:104,maxHeight:156}),description:n?void 0:(0,y.t)("sites.metadata.controls.description_page.infotext")})}let W=/^[a-zA-Z]{2,3}(-[a-zA-Z]{4})?(-[a-zA-Z]{2}|\d{3})?$/;function Y({recordingKey:e,page:t}){let n=j(t),[l,i]=(0,a.useState)(n.lang),r=!!(n.lang&&!W.test(n.lang));return a.createElement(z.BC,{label:(0,y.t)("sites.metadata.controls.language.label"),control:a.createElement(b.ks,{"aria-invalid":r,className:h()(x.Dm,v.s.wFull.$),style:_.sx.py8.px12.hAuto.if(r,_.sx.colorBorderWarningStrong).$,onChange:e=>{let n=e.currentTarget.value;n?i(n):i(null),d.l7.user("set-responsive-set-settings",()=>{o.glU?.setResponsiveSetSettings({lang:n?.trim()??void 0},[t])})},onKeyDown:H,value:l??n.lang,placeholder:(0,y.t)("sites.metadata.controls.language.placeholder"),recordingKey:E.Pt(e,"lang")}),description:r?(0,y.t)("sites.metadata.controls.language.infotext_invalid"):(0,y.t)("sites.metadata.controls.language.infotext"),isInvalid:r})}let q=/^(G-[A-Z0-9]{10}|GTM-[A-Z0-9]{6,8})$/;function X({recordingKey:e,page:t}){let n=j(t),[l,i]=(0,a.useState)(n.googleAnalyticsID),r=!!(n.googleAnalyticsID&&!q.test(n.googleAnalyticsID));return a.createElement(z.BC,{label:(0,y.t)("sites.metadata.controls.google_analytics_id.label"),control:a.createElement(b.ks,{"aria-invalid":r,className:h()(x.Dm,v.s.wFull.$),style:_.sx.py8.px12.hAuto.if(r,_.sx.colorBorderWarningStrong).$,maxLength:13,onChange:e=>{let n=e.currentTarget.value;n?i(n):i(null),d.l7.user("set-responsive-set-settings",()=>{o.glU?.setResponsiveSetSettings({googleAnalyticsID:n?.trim()??void 0},[t])})},onKeyDown:H,value:l??n.googleAnalyticsID,placeholder:(0,y.t)("sites.metadata.controls.google_analytics_id.placeholder"),recordingKey:E.Pt(e,"google_analytics_id")}),description:r?(0,y.t)("sites.metadata.controls.google_analytics_id.infotext_invalid"):void 0,isInvalid:r})}function J({recordingKey:e,page:t,isSite:n}){let r=j(t),s=j(null),c=n||!s.blockSearchIndexing,[m,p]=(0,a.useState)(r.blockSearchIndexing),h=(0,D.Oc)(),{sts_robots_allowed:g}=(0,u.k)(),f=a.useMemo(()=>h?(0,y.t)("figmake.metadata.controls.no_indexing_site.label"):n?(0,y.t)("sites.metadata.controls.no_indexing_site.label"):(0,y.t)("sites.metadata.controls.no_indexing_page.label"),[n,h]);return c?a.createElement("div",{className:v.s.flex.flexColumn.px16.minH24.justifyCenter.pt4.pb8.$},a.createElement(l.S,{disabled:!g,label:a.createElement(i.J,{htmlAttributes:g?void 0:{"data-tooltip":"Search engine indexing is unavailable during the Figma Sites alpha","data-tooltip-type":"text"}},f),onChange:e=>{p(e),d.l7.user("set-responsive-set-settings",()=>{o.glU?.setResponsiveSetSettings({blockSearchIndexing:e??void 0},[t])})},checked:!!m||!g,recordingKey:E.Pt(e,"allow_search_indexing")})):null}function Z({page:e,closeModal:t}){let n=j(e),l=(0,C.Fk)(e=>{let t=e.getCurrentPage();if(t)return t.childrenNodes.filter(e=>"FRAME"===e.type||"ROUNDED_RECTANGLE"===e.type).map(e=>({guid:e.guid,name:e.name,size:e.size,type:e.type}))}),i=t=>{d.l7.user("set-responsive-set-settings",()=>{o.glU?.setResponsiveSetSettings({faviconID:t??void 0},[e])})},[r,s]=(0,a.useState)(null);return a.useEffect(()=>{s(null),(async()=>{s(await en(n.faviconID,{type:"SCALE",value:2}))})()},[n.faviconID]),a.createElement(z.BC,{label:(0,y.t)("sites.metadata.controls.favicon.label"),control:a.createElement(z.L0,{addImage:e=>{d.l7.user("create-favicon-frame",()=>{let e=o.glU?.createFrame("Favicon",32,32,o.btW.LEFT,!0);e&&(0,c.fn)((0,c.sH)(e))&&(i(e),ee(),t?.())}),e.preventDefault()},selectImage:i,removeImage:()=>i(""),imageCandidates:l,base64String:r,nodeId:n.faviconID,dropdownType:"favicon",removeString:(0,y.t)("sites.metadata.image_selector.remove_selection")}),description:(0,y.t)("sites.metadata.controls.favicon.infotext",{width:32,height:32})})}function Q({page:e,closeModal:t}){let n=j(e),l=(0,C.Fk)(e=>{let t=e.getCurrentPage();if(t)return t.childrenNodes.filter(e=>"FRAME"===e.type||"ROUNDED_RECTANGLE"===e.type).map(e=>({guid:e.guid,name:e.name,size:e.size,type:e.type}))}),i=t=>{d.l7.user("set-responsive-set-settings",()=>{o.glU?.setResponsiveSetSettings({socialImageID:t??void 0},[e])})},[r,s]=(0,a.useState)(null);return a.useEffect(()=>{s(null),(async()=>{s(await en(n.socialImageID,{type:"SCALE",value:2}))})()},[n.socialImageID]),a.createElement(z.BC,{label:(0,y.t)("sites.metadata.controls.social_image.label"),control:a.createElement(z.L0,{addImage:e=>{d.l7.user("create-social-image-frame",()=>{let e=o.glU?.createFrame("Social image",1200,630,o.btW.LEFT,!0);e&&(0,c.fn)((0,c.sH)(e))&&(i(e),ee(),t?.())}),e.preventDefault()},selectImage:i,removeImage:()=>i(""),imageCandidates:l,base64String:r,nodeId:n.socialImageID,dropdownType:"socialImage",removeString:(0,y.t)("sites.metadata.image_selector.remove_selection")}),description:(0,y.t)("sites.metadata.controls.social_image.infotext",{width:1200,height:630})})}function ee(){S.Y5.updateAppModel({currentSelectedProperty:{type:o.rrT.FILL,indices:[0]}}),o.glU.uploadPaintImage("NORMAL",1)}function et({page:e}){let t=j(e),[n,l]=(0,a.useState)(t.customCodeHeadStart),[i,r]=(0,a.useState)(t.customCodeHeadEnd),[s,c]=(0,a.useState)(t.customCodeBodyStart),[u,m]=(0,a.useState)(t.customCodeBodyEnd),p=t=>{d.l7.user("set-responsive-set-settings",()=>{o.glU?.setResponsiveSetSettings(t,[e])})};return a.createElement(a.Fragment,null,a.createElement(z.BC,{label:(0,y.t)("sites.metadata.controls.custom_code.start_head.label"),control:a.createElement(M,{placeholder:(0,y.t)("sites.metadata.controls.custom_code.placeholder"),code:n,onChange:e=>{l(e),p({customCodeHeadStart:e})}})}),a.createElement(z.BC,{label:(0,y.t)("sites.metadata.controls.custom_code.end_head.label"),control:a.createElement(M,{placeholder:(0,y.t)("sites.metadata.controls.custom_code.placeholder"),code:i,onChange:e=>{r(e),p({customCodeHeadEnd:e})}})}),a.createElement(z.BC,{label:(0,y.t)("sites.metadata.controls.custom_code.start_body.label"),control:a.createElement(M,{placeholder:(0,y.t)("sites.metadata.controls.custom_code.placeholder"),code:s,onChange:e=>{c(e),p({customCodeBodyStart:e})}})}),a.createElement(z.BC,{label:(0,y.t)("sites.metadata.controls.custom_code.end_body.label"),control:a.createElement(M,{placeholder:(0,y.t)("sites.metadata.controls.custom_code.placeholder"),code:u,onChange:e=>{m(e),p({customCodeBodyEnd:e})}})}))}async function en(e,t){let n=(0,I.F)().getNodeById(e);if(!n||!("exportAsync"in n))return null;let a=new Blob([await n?.exportAsync({format:"PNG",constraint:t})],{type:"image/png"});return await new Promise(e=>{let t=new FileReader;t.onloadend=()=>e(t.result),t.onerror=()=>e(null),t.readAsDataURL(a)})}function ea({closeModal:e,recordingKey:t}){let n=(0,w.q5)(),l=(0,B.JW)(n?.key||null),i=(0,m.Xr)(L.mu),o=(0,m.Xr)(L.NX),d=(0,f.oA)(n?.org?.sitesPublishingDisabled),c=(0,O.n)()||!!d||!!n?.team?.studentTeamAt,u=a.useCallback(()=>{i(),e?.()},[e,i]),p=a.useCallback(()=>{o(),e?.()},[e,o]),h=(0,D.Oc)();if(l.isLoading)return a.createElement(r.k,{size:"sm"});let g=null!==l.lastPublishedAt;return a.createElement("div",{className:v.s.wFull.flex.gap4.justifyBetween.itemsCenter.$},a.createElement(F.x,{isPublished:g}),a.createElement("div",{className:v.s.flex.gap4.$},g&&a.createElement(s.$n,{onClick:p,variant:"destructiveSecondary",recordingKey:E.Pt(t,"unpublishButton")},h?(0,y.tx)("figmake.metadata.controls.publish_status.unpublish_site"):(0,y.tx)("sites.metadata.controls.publish_status.unpublish_site")),!g&&a.createElement(s.$n,{disabled:c,htmlAttributes:{"data-tooltip":d?(0,y.t)("sites.toolbar.org_disabled_publishing"):n?.team?.studentTeamAt?(0,y.t)("sites.toolbar.publish_modal.publish_disabled_rollout"):c?(0,y.t)("sites.toolbar.publishing_is_disabled_for_your_account_please_contact_support"):void 0,"data-tooltip-type":k.Ib.TEXT,"data-tooltip-show-immediately":"true"},onClick:u,variant:"secondary",recordingKey:E.Pt(t,"publishButton")},(0,y.tx)("sites.metadata.controls.publish_status.publish"))))}function el({recordingKey:e,closeModal:t}){return a.createElement(z.BC,{useLabel:!1,label:(0,y.t)("sites.metadata.controls.publish_status.label"),control:a.createElement(ea,{recordingKey:e,closeModal:t})})}},406265:(e,t,n)=>{n.d(t,{AP:()=>o,OG:()=>c,wh:()=>d});var a=n(23459);if(443==n.j)var l=n(277930);var i=n(579020),r=n(653959),s=n(277069);let o=(0,a.eU)([]);function d(e){let t=(0,a.md)(o),[n]=(0,r.IT)((0,s.V)(e),{enabled:0===t.length});return t.length>0?{status:"loaded",dnsRecords:t}:"loading"===n.status?{status:"loading"}:{status:"loaded",dnsRecords:n.data??[]}}function c(e){return(0,l.A)(()=>{(0,i.sx)("sites_change_webpage_metadata",{fieldName:e})},5e3,{leading:!0,trailing:!1})}},277069:(e,t,n)=>{n.d(t,{V:()=>i,q:()=>r});var a=n(997894),l=n(146797);let i=a.M4.Query({fetch:async e=>(await l.z.getDomainDNSRecords({fileKey:e})).data.meta}),r=a.M4.Query({fetch:async e=>(await l.z.checkCustomDomainLimit({fileKey:e})).data,output:({data:{meta:{num_domains:e,num_domains_allowed:t,num_verified_domains:n}}})=>({atCreationLimit:e>=t,atActivationLimit:n>=t})})},31972:(e,t,n)=>{n.d(t,{f:()=>f,q:()=>g});var a=n(848318),l=n(66402),i=n(654104),r=n(500276),s=n(741419),o=n(673906),d=n(277930),c=n(970823),u=n(166917),m=n(406265),p=n(316153);function h(e){let t=(0,m.OG)("title"),n=(0,d.A)(t=>{o.l7.user("set-responsive-set-settings",()=>{s.glU?.setResponsiveSetSettings({title:t.trim()},[e])})},500);return a.useCallback(e=>(n(e),t(),n.flush),[t,n])}function g({size:e,recordingKey:t}){let{title:n,placeholder:l,updateTitle:i}=function(){let e=(0,c.Z)(),{guid:t,title:n}=(0,u.Fk)(e=>{let t=e.getCurrentPage(),n=t?.responsiveSetSettings;return{guid:t?.guid,title:n?.title}});return{title:n,placeholder:e,updateTitle:h(t??"0:1")}}();return a.createElement(E,{title:n??"",placeholder:l,updateTitle:i,size:e,recordingKey:t})}function f({guid:e,size:t,recordingKey:n}){let{title:l,placeholder:i,updateTitle:r}=function(e){let t=(0,c.Z)(),n=h(e),{siteTitle:a,pageTitle:l,defaultPageTitleSuffix:i}=(0,u.Fk)(t=>{let n;let a=t.getCurrentPage(),l=a?.responsiveSetSettings,i=(0,p.Vl)(a).find(t=>t.guid===e),r=((n=i?.name??"").startsWith("/")&&(n=n.substring(1)),(n=n.replace(/-/g," ")).length>0&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n);return{siteTitle:l?.title,pageTitle:i?.responsiveSetSettings?.title,defaultPageTitleSuffix:r?` - ${r}`:""}});return{title:l,placeholder:a?a+i:t+i,updateTitle:n}}(e);return a.createElement(E,{title:l??"",placeholder:i,updateTitle:r,size:t,recordingKey:n})}function E({title:e,placeholder:t,updateTitle:n,size:s,recordingKey:o}){let[d,c]=a.useState(e),u=a.useRef(null),m=a.useRef(!1);a.useEffect(()=>{m.current||d===e||(c(e),u.current=null)},[e,d]);let p=i.iQ(o,"blur",()=>{m.current=!1,u.current?.()});return a.useEffect(()=>()=>{u.current?.()},[]),a.createElement(l.p,{value:d,onChange:e=>{c(e),u.current=n(e)},placeholder:t,id:"site-title-input",size:s,onKeyDown:e=>{e.currentTarget===document.activeElement&&("Escape"===e.key||"Enter"===e.key)&&(e.stopPropagation(),e.currentTarget.blur())},htmlAttributes:{onBlur:p,onFocus:()=>{m.current=!0},autoComplete:"off"},style:"lg"===s?r.sx.px12.$:void 0,recordingKey:o})}},312417:(e,t,n)=>{n.d(t,{BX:()=>k,KI:()=>C,hL:()=>T});var a=n(848318),l=n(716544);if(443==n.j)var i=n(475020);if(443==n.j)var r=n(435254);if(443==n.j)var s=n(478940);var o=n(741419),d=n(179703),c=n(157907),u=n(23459),m=n(654104),p=n(116111),h=n(483370),g=n(442313),f=n(449737),E=n(449977),b=n(369600),v=n(503024),y=n(470199),_=n(733787),x=n(776332);if(443==n.j)var S=n(599378);var w=n(783856);function C({page:e,afterModalOpensCallback:t}){let n=(0,l.wA)(),a=(0,b.q5)(),i=(0,p.b)(),[r,s]=(0,u.fp)(y.s0),m=(0,l.d4)(e=>e.modalShown?.type===w.Sq.type),{closeOverlay:h}=(0,S.h)(),[g,v]=(0,u.fp)(_.jI);return{onClick:()=>{let a=e??x.p.WEBSITE;v(a),m&&g!==a||(i?(s(o.Nfd.SETTINGS),h()):n((0,f.YK)({type:w.Sq})));let l=(0,d.UN)().getCurrentPage();e?e!==l?.guid&&((0,d.UN)().setCurrentPageFromNodeAsync(e),E.tJ([e])):l&&l.setSelectionToSingleNode("-1:-1"),t&&t()},isVisible:a?.canEdit&&(0,c.k)().sts_document_settings,ariaExpanded:m&&g===(e??null)}}function k({recordingKey:e,isFigmake:t,...n}){let{onClick:l,isVisible:s,ariaExpanded:o}=C(n);return s?a.createElement(i.d,{"aria-label":(0,g.t)("sites.metadata.modal_button_site"),onClick:l,recordingKey:m.Pt(e,"websiteSettingsButton"),htmlAttributes:{"data-tooltip":t?(0,g.t)("figmake.metadata.modal_button_site"):(0,g.t)("sites.metadata.modal_button_site"),"data-tooltip-type":v.Ib.TEXT},"aria-expanded":o},a.createElement(r.I,null)):null}function T({recordingKey:e,...t}){let{onClick:n,isVisible:l,ariaExpanded:i}=C(t);return l?a.createElement(h.J,{"aria-label":(0,g.t)("figmake.metadata.modal_button_site"),onClick:n,recordingKey:m.Pt(e,"websiteSettingsButton"),htmlAttributes:{"data-tooltip":(0,g.t)("figmake.metadata.modal_button_site"),"data-tooltip-type":v.Ib.TEXT},"aria-expanded":i},a.createElement(s.n,null)):null}},783856:(e,t,n)=>{n.d(t,{Sq:()=>tM,QU:()=>tj});var a=n(848318),l=n(716544),i=n(157907),r=n(23459),s=n(889132),o=n(701780),d=n(17755),c=n(442313),u=n(500276),m=n(449737),p=n(326971),h=n(369600),g=n(464012),f=n(6760),E=n(330328),b=n(187536),v=n(733787),y=n(776332),_=n(36789),x=n(747052),S=n(356505),w=n(599952),C=n(629829),k=n(322035),T=n(166365),I=n(997894),N=n(150583),A=n(992277),R=n(726521),M=n(475020),D=n(792760),P=n(502255),j=n(727341),L=n(950738),O=n(503024),B=n(161922),F=n(580270),z=n(163288),$=n(776402),G=n(777611),U=n(731755),H=n(999556),K=n(864517);let V={textBodyMedium:{...w.g.textBodyMedium,$$css:!0}},W=(0,g.Ju)(function(e){let t=$.hS(e),n=e.connectedProject,l=(0,h.tS)(),[i,r]=a.useState(!1),s=(0,I.gY)(H.rY),[,o]=(0,I.IT)((0,H.eU)(l)),d=async()=>{if(!l){console.error("No open file key found");return}r(!0),await s({fileKey:l}),await o.refetch(),t.props.close({source:"button"})};return a.createElement(G.bL,{manager:t,width:386},a.createElement(U.vo,null,a.createElement(U.Y9,null,a.createElement(U.hE,null,(0,c.t)("figmake.settings.disconnect_project_modal.title"))),a.createElement(U.nB,null,a.createElement("div",null,a.createElement("p",{...C.Ay.props(V.textBodyMedium)},(0,c.t)("figmake.settings.disconnect_project_modal.subtitle",{project:n.name})))),a.createElement(U.wi,null,a.createElement(U.jk,{className:"x78zum5 x1q0g3np x13a6bvl x167g77z xhxeiv9 xh8yej3 x9f619"},a.createElement(S.$n,{variant:"secondary",onClick:()=>t.props.close({source:"button"})},(0,c.t)("figmake.settings.disconnect_project_modal.button.cancel")),i?a.createElement(K.lV,{variant:"destructive"},(0,c.t)("figmake.settings.disconnect_project_modal.button.submit.loading")):a.createElement(S.$n,{variant:"destructive",onClick:d},(0,c.t)("figmake.settings.disconnect_project_modal.button.submit",{project:n.name}))))))},"DisconnectProjectModal");var Y=n(114344);function q({connectedProject:e}){let t=(0,r.Xr)(F.p7);(0,a.useEffect)(()=>()=>{t(F.Ut.INIT)},[t]);let n=(0,K.Nh)();return n?a.createElement("div",{className:"x1tamke2"},a.createElement("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xh8yej3"},a.createElement("div",{className:"x78zum5 x1q0g3np x1nhvcw1 x6s0dn4 x1v2ro7d"},a.createElement("div",{className:"x78zum5 x100vrsf x1vqgdyp xl56j7k x6s0dn4 x1mxnbhz x1ci220x xgcem94"},a.createElement(T.B,{svg:Y.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"16px",svgHeight:"16px"})),a.createElement("div",{className:"x78zum5 xdt5ytf x1nhvcw1 x1cy8zhl"},a.createElement("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z"},a.createElement("p",{...C.Ay.props(Z.textBodyLargeStrong)},e.name),a.createElement(R.E,{variant:"successOutline"},(0,c.t)("figmake.settings.connected_project.badge"))),n&&a.createElement("p",{...C.Ay.props(Z.textBodyMediumSecondary)},n.name))),a.createElement("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z"},a.createElement(X,null),a.createElement(J,{connectedProject:e})))):a.createElement(K.Gu,null)}function X(){let{deployStatus:e,handlePublishEdgeFunction:t}=(0,z.A)({});switch(e){case F.Ut.INIT:return a.createElement(S.$n,{variant:"secondary",onClick:t},(0,c.t)("figmake.settings.connected_project.deploy_button"));case F.Ut.DEPLOYING:return a.createElement(K.lV,{variant:"secondary"},(0,c.t)("figmake.settings.connected_project.deploying_button"));case F.Ut.SUCCESS:return a.createElement(R.E,{variant:"successOutline"},(0,c.t)("figmake.settings.connected_project.deploy_success"))}}function J({connectedProject:e}){let t=(0,l.wA)(),n=(0,j.GS)(),i=(0,L.BK)("CONNECTED_PROJECT_MORE_MENU"),r=(0,a.useCallback)(()=>{t((0,m.to)({type:W,data:{connectedProject:e},showModalsBeneath:!0}))},[t,e]),s=a.useMemo(()=>[{displayText:(0,c.t)("figmake.settings.connected_project.dropdown.disconnect"),callback:r},{displayText:"",separator:!0},{displayText:(0,c.t)("figmake.settings.connected_project.dropdown.manage_project"),callback:()=>{(0,k.FJ)((0,K.kR)(e.id))}},{displayText:(0,c.t)("figmake.settings.connected_project.dropdown.manage_organization"),callback:()=>{(0,k.FJ)((0,K.n1)(e.organization_id))}}],[r,e]),o=a.useRef(null),d=o.current?.getBoundingClientRect();return d||(i.showing&&(0,P.$D)(A.e.AI_PRODUCTIVITY,Error("FigMake connected project view: dropdownBoundingRect is null")),d=new DOMRect(0,0,0,0)),a.createElement(a.Fragment,null,a.createElement(M.d,{"aria-expanded":i.showing,ref:o,"aria-label":(0,c.t)("figmake.settings.connected_project.dropdown.label"),onClick:()=>i.toggle(),htmlAttributes:{"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,c.t)("figmake.settings.connected_project.dropdown.label")}},a.createElement(D.J,null)),i.showing&&a.createElement(B.j,{dispatch:t,parentRect:d,onSelectItem:e=>{e.callback&&e.callback()},showPoint:!n,items:s,lean:"left"}))}let Z={textBodyLargeStrong:{...w.g.textBodyLargeStrong,$$css:!0},textBodyMediumSecondary:{...w.g.textBodyMedium,color:"x1n0bwc9",$$css:!0}};var Q=n(379338),ee=n(782623),et=n(483365);let en=(0,Q.ck)("ad65cb8c44787185d85584156588b5e2ac5c4a8a");function ea(){let e=(0,l.wA)(),t=(0,K.Nh)();return t?a.createElement(a.Fragment,null,a.createElement("div",{className:"x78zum5 xdt5ytf xl56j7k x6s0dn4 x2b8uid xh8yej3"},a.createElement(K.p_,{organization:t}),a.createElement("div",{className:"x78zum5 xdt5ytf xl56j7k x6s0dn4 x1v2ro7d xiqz8rq x1gan7if"},a.createElement(ee.oW,{src:en,alt:"Empty projects"}),a.createElement("div",{className:"x78zum5 xdt5ytf xl56j7k x6s0dn4 x2b8uid x1t9vceh"},a.createElement("p",{...C.Ay.props(el.textBodyLargeStrong)},(0,c.t)("figmake.settings.create_project.title")),a.createElement("p",{...C.Ay.props(el.textBodyMediumSecondary)},(0,c.t)("figmake.settings.create_project.subtitle"))),a.createElement(S.WW,{variant:"primary",onClick:()=>{e((0,m.to)({type:et.A,data:{},showModalsBeneath:!0}))}},(0,c.t)("figmake.settings.create_project.button"))))):a.createElement(K.Gu,null)}let el={textBodyLargeStrong:{...w.g.textBodyLargeStrong,$$css:!0},textBodyMediumSecondary:{...w.g.textBodyMedium,color:"x1n0bwc9",$$css:!0}};var ei=n(677772),er=n(596616),es=n(506047);let eo=(0,r.eU)(void 0);function ed(){let{activeProjects:e}=(0,K.YY)(),t=(0,K.Nh)();return t?a.createElement("div",null,a.createElement(K.p_,{organization:t}),a.createElement("div",{className:"x78zum5 xdt5ytf x1cy8zhl xou54vl xnm25rq xyfqnmn x1l90r2v"},a.createElement("p",{...C.Ay.props(ep.textBodyMediumSecondary)},(0,c.t)("figmake.settings.pause_project.info")),a.createElement(ec,{activeProjects:e})),a.createElement(em,{activeProjects:e})):a.createElement(K.Gu,null)}function ec({activeProjects:e}){let[t,n]=(0,r.fp)(eo),l=(0,r.md)(F.kz);return a.createElement(ei.b,{legend:a.createElement("p",{...C.Ay.props(ep.textBodyMediumStrong)},(0,c.t)("figmake.settings.pause_project.radio.label")),value:t,onChange:n,readonly:!!l},e.map(e=>a.createElement(ei.c,{key:e.id,value:e.id,label:a.createElement(er.J,null,a.createElement(eu,{project:e}))})))}function eu({project:e}){return a.createElement("div",{key:e.id},a.createElement("p",{...C.Ay.props(ep.textBodyMediumStrong)},e.name),a.createElement("p",{...C.Ay.props(ep.textBodyMediumSecondary)},(0,c.t)("figmake.settings.pause_project.radio.placeholder")))}function em({activeProjects:e}){let t=(0,h.tS)(),n=(0,r.md)(eo),l=e.find(e=>e.id===n)?.name??"",[i,s]=(0,r.fp)(F.kz),o=async()=>{if(!t){console.error("No open file key found");return}if(!n){console.error("No selected project found");return}s({id:n,name:l}),await es.R.pauseProject({fileKey:t,projectId:n})};return i?a.createElement("div",{className:"x78zum5 x1q0g3np x6s0dn4 x13a6bvl x883omv xh8yej3 x9f619 xc7ga6q xv42yna"},a.createElement("p",{...C.Ay.props(ep.textBodyMediumSecondary)},(0,c.t)("figmake.supabase.cta.pausing_project.subtitle")),a.createElement(K.lV,{variant:"destructive"},(0,c.t)("figmake.settings.pause_project.button.loading"))):a.createElement("div",{className:"x78zum5 x1q0g3np x6s0dn4 x13a6bvl x883omv xh8yej3 x9f619 xc7ga6q xv42yna"},a.createElement(S.$n,{variant:"destructive",onClick:o,disabled:!n},(0,c.t)("figmake.settings.pause_project.button")))}let ep={textBodyMediumSecondary:{...w.g.textBodyMedium,color:"x1n0bwc9",$$css:!0},textBodyMediumStrong:{...w.g.textBodyMediumStrong,$$css:!0}};function eh(){let e=(0,h.tS)(),[t]=(0,I.IT)((0,H.eU)(e)),n=!!t.data?.needsToPauseProject,[l]=(0,I.IT)((0,H.TT)(e)),i=l.data?.connectedProject,s=(0,r.Xr)(K.ND),o=(0,K.fd)(),d="loading"===t.status||"loading"===l.status;return(0,a.useEffect)(()=>{if(d){s({type:"loading"});return}i?s({type:"connected_project",connectedProject:i}):n||o?s({type:"pause_project"}):s({type:"create_project"})},[i,n,s,d,o]),a.createElement("div",null,a.createElement(ef,null),a.createElement(eg,null))}function eg(){let e=(0,r.md)(K.ND);switch(e.type){case"connected_project":let t=e.connectedProject;return a.createElement(q,{connectedProject:t});case"create_project":return a.createElement(ea,null);case"pause_project":return a.createElement(ed,null);case"loading":return a.createElement(K.Gu,null);default:return N.vF.error("SupabaseProjectsView: Unknown project management view"),null}}function ef(){return a.createElement("div",{className:"x78zum5 xdt5ytf x1qughib x1cy8zhl x1tny46i x1kgkb76 x1y8v6su x1tamke2 xh8yej3 x9f619"},a.createElement("p",{...C.Ay.props(eE.textBodyLargeStrong)},(0,c.t)("figmake.settings.project.header.title")),a.createElement("p",{...C.Ay.props(eE.textBodyMediumSecondary)},(0,c.t)("figmake.settings.project.header.subtitle")))}let eE={textBodyLargeStrong:{...w.g.textBodyLargeStrong,$$css:!0},textBodyMediumSecondary:{...w.g.textBodyMedium,color:"x1n0bwc9",$$css:!0}};var eb=(e=>(e.SUPABASE_AUTH_VIEW="supabase-auth-view",e.SUPABASE_PROJECTS_VIEW="supabase-project-view",e.LOADING_VIEW="loading-view",e))(eb||{});let ev=(0,r.eU)("loading-view");function ey(){let[e,t]=(0,r.fp)(ev),n=(0,h.tS)(),[l]=(0,I.IT)((0,H.y7)(n)),i="loading"===l.status,s=!!l.data?.authenticated;return(0,a.useEffect)(()=>{i||(s?t("supabase-project-view"):t("supabase-auth-view"))},[s,t,i,n]),a.createElement("div",{className:"x1tamke2"},a.createElement(eS,null,a.createElement(e_,{view:e})))}function e_({view:e}){switch(e){case"supabase-auth-view":return a.createElement(ex,null);case"supabase-project-view":return a.createElement(eh,null);case"loading-view":return a.createElement(K.Gu,null);default:return null}}function ex(){let e=(0,h.tS)(),t=(0,I.gY)(H.Kj);return a.createElement("div",{className:"x78zum5 xdt5ytf xl56j7k x6s0dn4 x1v2ro7d x5yr21d x1ej0lj6 x9f619"},a.createElement("div",{className:"x78zum5 x1fu8urw x1peatla xe8ttls xl56j7k x6s0dn4 x1mxnbhz x1ci220x"},a.createElement(T.B,{svg:Y.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"32px",svgHeight:"32px"})),a.createElement("div",{className:"x78zum5 xdt5ytf xl56j7k x6s0dn4 x2b8uid x1t9vceh"},a.createElement("p",{...C.Ay.props(ew.textBodyLargeStrong)},(0,c.t)("figmake.settings.auth.title")),a.createElement("p",{...C.Ay.props(ew.textBodyMediumSecondary)},(0,c.t)("figmake.settings.auth.subtitle")," ",a.createElement("a",{href:K.Sy},(0,c.t)("figmake.settings.auth.link")))),a.createElement(S.WW,{variant:"primary",onClick:()=>{let n=(0,k.FJ)(K.Yr,"_blank");window.addEventListener("message",a=>{a.data&&"child-redirect-complete"===a.data.type&&(n?.close(),e&&t({fileKey:e}))})}},(0,c.t)("figmake.settings.auth.button")))}function eS({children:e}){return a.createElement("div",{className:"x1mxnbhz x1ci220x x5yr21d"},e)}let ew={textBodyLargeStrong:{...w.g.textBodyLargeStrong,$$css:!0},textBodyMediumSecondary:{...w.g.textBodyMedium,color:"x1n0bwc9",$$css:!0}};var eC=n(53258),ek=n(116111),eT=n(753131),eI=n(614161),eN=n(824563);let eA={description:{...w.g.textBodyMedium,color:"x1n0bwc9",$$css:!0},row:{display:"x78zum5",flexDirection:"x1q0g3np",alignItems:"x6s0dn4",height:"xxk0z11",padding:"xztvwtv",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0},customDomain:{color:"x1quhyk7",...w.g.textBodyLargeStrong,$$css:!0},publishStatusRow:{gap:"x167g77z",rowGap:null,columnGap:null,...w.g.textBodyMedium,$$css:!0}};function eR({domainInfo:e}){let t=(0,ek.b)();if(!e)return null;let n=a.createElement(a.Fragment,null,a.createElement("div",{className:"x78zum5 xdt5ytf xg2d0mh xod5an3"},a.createElement("div",{...C.xk(w.g.textBodyLargeStrong)},(0,c.tx)("sites.metadata.domains.base_domain")),a.createElement("div",{...C.xk(eA.description)},(0,c.tx)("sites.metadata.domains.your_site_is_always_available_at_this_domain"))),a.createElement(eM,{domainInfo:e}));return t?a.createElement("div",null,n):a.createElement("div",{className:"x1chd833"},n)}function eM({domainInfo:e}){let t=(0,h.tS)(),n=(0,eI.JW)(t);if(n.isLoading)return null;let{isUnpublished:l,lastPublishedAt:i,publishedBy:r}=n;return a.createElement("div",{className:"x78zum5 xdt5ytf"},a.createElement("div",{className:"x1qughib x78zum5 x1q0g3np x6s0dn4 xxk0z11 xztvwtv"},a.createElement("a",{href:e.fullURL,...C.xk(eA.customDomain),target:"_blank",rel:"noreferrer"},e.domain)),a.createElement("div",{...C.xk(eA.publishStatusRow,eA.row)},a.createElement("div",{className:"xwrg52n xuxw1ft x1rea2x4 x1n0bwc9"},(0,c.tx)("sites.metadata.domains.site_status")),a.createElement(eN.x,{isPublished:!l,dataTestId:"sitesPublishStatusBadge"})),i&&a.createElement("div",{...C.xk(eA.publishStatusRow,eA.row)},a.createElement("div",{className:"xwrg52n xuxw1ft x1rea2x4 x1n0bwc9"},(0,c.tx)("sites.toolbar.publish_modal.last_published_header")),a.createElement("div",null,a.createElement(eT.h1,{date:i,capitalize:!0}),r&&a.createElement(a.Fragment,null,a.createElement("span",{className:"x1n0bwc9"},` \xb7 `),a.createElement("span",{className:"x1n0bwc9"},r.handle)))))}var eD=n(988910),eP=n(75692),ej=n(653959),eL=n(776785),eO=n(277069);function eB({activationStatus:e}){let t;return((0,eL.dH)(e,"domain_already_activated")?t={variant:"warn",title:(0,c.t)("sites.metadata.domains.this_domain_is_already_connected_to_another_site")}:(0,eL.hr)(e)?t={variant:"warn",title:(0,c.t)("sites.metadata.domain.dns_records_not_verified"),message:(0,c.tx)("sites.metadata.domain.check_your_dns_host_to_ensure_the_following_records_have_been_added")}:(0,eL.V7)(e)&&(t={variant:"default",title:(0,c.t)("sites.metadata.domain.awaiting_ssl_cert"),message:(0,c.tx)("sites.metadata.domain.awaiting_ssl_cert_message")}),t)?a.createElement("div",{className:"x1fzhlzt"},a.createElement(eD.$y,{variant:t.variant},a.createElement(eP.Q,{title:t.title},t.message))):a.createElement(a.Fragment,null)}var eF=n(468189),ez=n(882439),e$=n(593815),eG=n(536384),eU=n.n(eG),eH=n(149334),eK=n(654104),eV=n(757033),eW=n(145015),eY=n(280198),eq=n(604613),eX=n(146797),eJ=n(406265);let eZ={warning:{color:"x12fzf0q",paddingTop:"x1y1aw1k",$$css:!0}};function eQ({onCancel:e,fileKey:t,recordingKey:n}){let i=(0,l.wA)(),s=(0,r.Xr)(eJ.AP),[o,m]=(0,a.useState)(null),[p,h]=(0,a.useState)(!1),g=(0,eL._t)(t),f=g?.hasCustomDomain;(0,a.useEffect)(()=>{p&&f&&h(!1)},[p,f]);let E=(0,a.useCallback)(e=>(0,eH.FB)(e)?(0,eH.ZN)(e)?null:(0,c.t)("sites.metadata.domains.domain_must_include_a_subdomain_ex_www"):(0,c.t)("sites.metadata.domains.enter_a_valid_domain_name"),[]),b=(0,a.useCallback)(async e=>{e.preventDefault();let n=new FormData(e.currentTarget).get("domain");h(!0);let a=E(n);if(a){m(a),h(!1);return}try{let e=await eX.z.addCustomDomain({fileKey:t,domain:n});s(e.data.meta)}catch(e){e instanceof eV.Dr&&("Invalid domain"===e.data.message?m((0,c.t)("sites.metadata.domains.invalid_domain")):i(eY.s.error(e.data.message,4e3))),h(!1)}},[E,t,s,i]);return a.createElement("form",{onSubmit:b},a.createElement("div",{className:"xwib8y2"},a.createElement("div",{className:"x78zum5 x6s0dn4"},a.createElement(eW.ks,{className:eU()(eq.Dm,d.s.wFull.ellipsis.$),style:u.sx.py8.hAuto.$,name:"domain",placeholder:"www.mywebsite.com",recordingKey:eK.Pt(n,"title")}),!!o&&a.createElement(e$.Z,{style:{marginLeft:"-28px","--color-icon":"var(--color-icon-warning-pressed, --fallback-color-icon-warning-pressed)"}})),o?a.createElement("div",{...C.xk(w.g.textBodyMedium,eZ.warning)},o):null),a.createElement("div",{className:"x78zum5"},a.createElement("div",{className:"x1db2dqx"},a.createElement(ez.$z,{variant:"secondary",onClick:e,type:"button",disabled:p},(0,c.tx)("sites.metadata.domains.cancel"))),a.createElement(ez.$z,{type:"submit",disabled:p},p?a.createElement(eF.k,null):(0,c.tx)("sites.metadata.domains.save"))))}let e0={planLimitReachedText:{...w.g.textBodyMedium,color:"x172n1ly",marginTop:"x7hzu26",$$css:!0}};function e1({fileKey:e,recordingKey:t,customDomainPlanLimitReachedQueryResult:n}){let[l,i]=(0,a.useState)(!1),r="loading"===n.status,s="loaded"===n.status&&n.data.atCreationLimit;if(l&&!r&&!s)return a.createElement(eQ,{fileKey:e,onCancel:()=>i(!1),recordingKey:t});let o=l&&r,d=s||o;return a.createElement("div",null,a.createElement(ez.$z,{variant:"secondary",disabled:d,onClick:()=>{i(!0)},recordingKey:"add-domain","data-testid":"add-connected-domain-cta"},o?a.createElement(eF.k,{"data-testid":"loading-spinner"}):a.createElement("div",{className:"x8rdmch xctkrei x1gskr33 x1ihwiht"},(0,c.tx)("sites.metadata.domains.add_domain"))),s&&a.createElement("div",{...C.xk(e0.planLimitReachedText)},(0,c.tx)("sites.metadata.domain.this_plan_has_reached_the_maximum_number_of_allowed_domains")))}var e4=n(513886),e5=n(182059),e2=n(790355),e3=n(351766),e7=n(880677),e6=n(697714),e8=n(635547);let e9=(0,g.Ju)(function(e){let{fileKey:t}=e,n=$.hS(e),i=(0,l.wA)(),[r]=(0,ej.IT)(e8.Vny.Query({fileKey:e.fileKey})),s=(0,e3.oA)(r.data?.siteMount),o=s?.customDomain?.verifiedAt!=null,d=(0,I.gY)(te);return a.createElement(G.bL,{manager:n,width:"md"},a.createElement(U.vo,null,a.createElement(U.Y9,null,a.createElement(U.hE,null,(0,c.tx)("sites.metadata.domain.confirm_connected_domain_removal"))),a.createElement(U.nB,null,(0,c.tx)("sites.metadata.domain.you_are_about_to_remove_your_site_s_connected_domain_url_existing_external_links_to_your_site_may_break")),a.createElement(U.wi,null,a.createElement(U.jk,null,a.createElement(S.$n,{variant:"secondary",onClick:()=>i(m.AS())},(0,c.tx)("general.cancel")),a.createElement(S.$n,{onClick:()=>{let e=d({fileKey:t,domainVerified:o});e7.WB()?.optimisticallyDelete({SiteDomain:{[s?.customDomain?.id??""]:null}},e),e.then(e=>{200===e.status?i(e6.F.enqueue({type:"custom_domain_removed",message:(0,c.t)("sites.metadata.domain.domain_removed")})):i(eY.s.error((0,c.t)("general.an_error_occurred_while_performing_that_action"))),i(m.AS())})}},(0,c.tx)("general.confirm"))))))}),te=I.M4.Mutation((e,{query:t})=>{let{fileKey:n,domainVerified:a}=e;return t.mutate((0,eO.q)(n),e=>{e.meta.num_domains-=1,a&&(e.meta.num_verified_domains-=1)}),eX.z.removeCustomDomain({fileKey:e.fileKey})}),tt="custom-domain-more-options";function tn({fileKey:e}){let t=(0,l.wA)(),n=(0,L.Um)(),i=n?.type===tt,r=a.useCallback(()=>{i?t((0,e2.oB)()):t((0,e2.j7)({type:tt}))},[t,i]);return a.createElement(a.Fragment,null,a.createElement("div",{className:"x1n2onr6"},a.createElement(e4.o,{eventListeners:i?["onMouseDown"]:[]},a.createElement(M.d,{"aria-expanded":i,"aria-label":(0,c.t)("sites.metadata.domain.more_options"),onClick:r},a.createElement(D.J,null)),i&&a.createElement(ta,{fileKey:e}))))}function ta({fileKey:e}){let t=(0,l.wA)();return a.createElement(e5.gw,{closeDropdown:()=>t((0,e2.oB)()),positionAbsolute:!0,id:tt,style:{right:0,left:"auto"}},a.createElement(tl,{fileKey:e}))}function tl({fileKey:e}){let t=(0,l.wA)();return a.createElement(e5.c$,{onClick:()=>{t(m.to({type:e9,data:{fileKey:e}}))}},(0,c.t)("sites.metadata.domain.remove_connected_domain"))}var ti=n(893822),tr=n(85442),ts=n(417193),to=n(665488);function td(){return a.createElement(ts.x,{className:"x11vm0g5 x1j4m7mb x34y7k0"})}function tc(){return a.createElement(to.R,{className:"x1gviqkx xdxz5ap xw8er2b","data-tooltip":(0,c.t)("sites.metadata.domain.no_record_found"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip-show-above":!0})}let tu={recordTypeColumn:{width:"xni59qk",$$css:!0},cellBase:{height:"x1vqgdyp",verticalAlign:"xxymvpz",paddingLeft:"xnm25rq",paddingRight:"xy13l1i",paddingInlineStart:null,paddingInlineEnd:null,...w.g.textBodyMedium,$$css:!0},tableHeader:{color:"x1n0bwc9",textAlign:"xdpxx8g",backgroundColor:"x1yjdb4r",...w.g.textBodyMedium,$$css:!0},tableCell:{borderTop:"xdyg6lv",borderTopWidth:null,borderTopStyle:null,borderTopColor:null,position:"x1n2onr6",$$css:!0},copyableCell:{backgroundColor:"xgcd1z6 xv2f06h",cursor:"xt0e3qv x1277o0a","--x1ec80mi":"x18vt1ge xg68icu",$$css:!0}};function tm({fileKey:e,activationStatus:t}){let n=(0,eJ.wh)(e),{status:l}=n;if("loading"===l)return a.createElement("div",{className:"x78zum5 xl56j7k"},a.createElement(eF.k,null));let{dnsRecords:i}=n;if(0===i.length)return null;let r=function({activationStatus:e}){if(!e)return{CNAME:null,TXT:null};let t=e.dns_verification;if(!t)return{CNAME:null,TXT:null};let n={CNAME:a.createElement(td,null),TXT:a.createElement(td,null)};return t.includes("no_valid_cname")&&(n.CNAME=a.createElement(tc,null)),t.includes("no_valid_txt")&&(n.TXT=a.createElement(tc,null)),n}({activationStatus:t});return a.createElement("table",{className:"xh8yej3 x140o2bo x1vathgz x1gukg7c x1bamp8i x9h44rk xb3r6kr"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{...C.xk(tu.cellBase,tu.tableHeader,tu.recordTypeColumn)},(0,c.tx)("sites.metadata.domains.dns_record_type")),a.createElement("th",{...C.xk(tu.cellBase,tu.tableHeader)},(0,c.tx)("sites.metadata.domains.dns_record_host")),a.createElement("th",{...C.xk(tu.cellBase,tu.tableHeader)},(0,c.tx)("sites.metadata.domains.dns_record_value")))),a.createElement("tbody",null,i.map((e,t)=>a.createElement("tr",{key:t},a.createElement("td",{...C.xk(tu.cellBase,tu.tableCell,tu.recordTypeColumn)},a.createElement("div",{className:"x78zum5 x1q0g3np x1jnr06f x6s0dn4 x1rfj78v"},a.createElement("span",{className:"xb3r6kr xlyipyv xuxw1ft"},e.type),r[e.type])),a.createElement(tp,{text:e.host}),a.createElement(tp,{text:e.value})))))}function tp({text:e}){let t=(0,l.wA)();return a.createElement("td",{...C.xk(tu.cellBase,tu.tableCell,tu.copyableCell),onClick:()=>t((0,tr.lW)({stringToCopy:e}))},a.createElement("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 x1jnr06f xh8yej3"},a.createElement("span",{className:"xb3r6kr xlyipyv xuxw1ft"},e),a.createElement("div",{className:"xm7qwpk"},a.createElement(ti.a,null))))}var th=n(551316),tg=n(897378),tf=n(424292);function tE({domainInfo:e,fileKey:t}){let[n,l]=a.useState(!1),i=(0,a.useCallback)(()=>{l(!0),eX.z.activateCustomDomain({fileKey:t}).finally(()=>{l(!1)})},[t]),r=a.useMemo(()=>(0,th.s)(i,500),[i]);return a.createElement("div",{className:d.s.flex.flexRow.justifyBetween.itemsCenter.pt4.pb4.$},a.createElement("div",{className:d.s.flex.flexRow.gap8.h16.$},a.createElement("div",{className:"xwrg52n xuxw1ft x1rea2x4 x1n0bwc9"},(0,c.tx)("sites.metadata.domains.domain_status")),a.createElement("div",{className:"x78zum5 x1q0g3np x1jnr06f"},a.createElement(tb,{domainInfo:e}),n&&a.createElement(eF.k,{size:"sm"}))),a.createElement(tg.K,{onClick:r,"aria-label":(0,c.t)("sites.metadata.domain.refresh"),"data-tooltip":(0,c.t)("sites.metadata.domain.refresh"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip-show-above":!0},a.createElement(tf.T,null)))}function tb({domainInfo:e}){let t=!!e.verifiedAt,n=(0,eL.V7)(e.activationStatus),l="defaultFilled",i=(0,c.t)("sites.metadata.domains.pending");return t?(l="successOutline",i=(0,c.t)("sites.metadata.domains.connected")):n&&(l="warningOutline",i=(0,c.t)("sites.metadata.domains.awaiting_certificates")),a.createElement(R.E,{variant:l},i)}let tv={header:{...w.g.textBodyLargeStrong,paddingBottom:"xjkvuk6",$$css:!0},text:{...w.g.textBodyMedium,color:"x1n0bwc9",paddingBottom:"xsag5q8",$$css:!0},customDomain:{color:"x1quhyk7",...w.g.textBodyLargeStrong,$$css:!0},secondaryText:{color:"x1n0bwc9",...w.g.textBodyMedium,$$css:!0}};function ty({domainInfo:e,recordingKey:t}){let n=(0,h.tS)(),l=e&&e.hasCustomDomain,[i]=(0,ej.IT)((0,eO.q)(n??""));return n?a.createElement(a.Fragment,null,a.createElement("h2",{...C.xk(tv.header)},(0,c.tx)("sites.metadata.domains.connected_domains")),a.createElement("div",{...C.xk(tv.text)},(0,c.tx)("sites.metadata.domain.connect_a_domain")),l&&a.createElement(t_,{domainInfo:e,fileKey:n}),!l&&a.createElement(e1,{fileKey:n,recordingKey:t,customDomainPlanLimitReachedQueryResult:i})):null}function t_({domainInfo:e,fileKey:t}){if(!e.hasCustomDomain)return null;let{activationStatus:n}=e,l=null!=e.verifiedAt,i=!(0,eL.S5)(n);return a.createElement(a.Fragment,null,a.createElement("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1qughib xztvwtv"},a.createElement("a",{href:`https://${e.customDomain}`,...C.xk(tv.customDomain),target:"_blank",rel:"noreferrer"},e.customDomain),a.createElement(tn,{fileKey:t})),a.createElement("div",{className:"x78zum5 xdt5ytf x167g77z"},a.createElement(tE,{domainInfo:e,fileKey:t}),!l&&a.createElement(a.Fragment,null,n&&a.createElement(eB,{activationStatus:n}),i&&a.createElement("div",{...C.xk(tv.secondaryText)},(0,c.tx)("sites.metadata.domain.add_the_following_records_to_the_dns_host_for_your_domain")),a.createElement(tm,{fileKey:t,activationStatus:n}),0===Object.keys(n).length&&a.createElement(eD.$y,{variant:"default"},a.createElement(eP.Q,null,(0,c.tx)("sites.metadata.domain.it_can_take_up_to_24_hours_for_dns_settings_to_propagate"))))))}let tx={container:{display:"x78zum5",flexDirection:"xdt5ytf",padding:"x1ff1495",$$css:!0},fullPageViewContainer:{display:"x78zum5",flexDirection:"xdt5ytf",gap:"xou54vl",$$css:!0},section:e=>[{width:null==e?null:"x1bl4301",borderRadius:"x9h44rk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,padding:"x1b5akj9",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,border:"x1bamp8i",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,boxSizing:"x9f619",$$css:!0},{"--width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e)}]};function tS(e){return a.createElement("div",{...C.Ay.props(tx.section(x.AZ))},e)}function tw({recordingKey:e,domainInfo:t}){let n=(0,ek.b)();return a.createElement("div",{...C.Ay.props(n?tx.fullPageViewContainer:tx.container)},n?tS(a.createElement(eR,{domainInfo:t})):a.createElement(eR,{domainInfo:t}),n?tS(a.createElement(ty,{domainInfo:t,recordingKey:e})):a.createElement(ty,{domainInfo:t,recordingKey:e}))}var tC=n(897392),tk=n(801939),tT=n(354098);function tI(e){return a.createElement("div",{...C.Ay.props(tR.section(x.AZ))},e)}function tN({recordingKey:e,page:t,closeModal:n}){let{sts_settings_custom_code:l,sts_settings_google_analytics:r}=(0,i.k)(),s=(0,ek.b)(),o=a.createElement(a.Fragment,null,a.createElement(tk.Y9,null,(0,c.t)("sites.metadata.heading.general")),a.createElement(tT.OE,{recordingKey:e,closeModal:n}),a.createElement(tT.Ls,{isSite:!0,page:t,recordingKey:e}),a.createElement(tT.V1,{isSite:!0,page:t,recordingKey:e}),a.createElement(tT.Ld,{isSite:!0,page:t,recordingKey:e}),r&&a.createElement(tT.Qd,{isSite:!0,page:t,recordingKey:e}),a.createElement(tT.Xw,{isSite:!0,page:t,recordingKey:e})),u=a.createElement(a.Fragment,null,a.createElement(tk.Y9,null,(0,c.t)("sites.metadata.heading.images")),a.createElement(tT.RI,{isSite:!0,page:t,recordingKey:e,closeModal:n}),a.createElement(tT.Re,{isSite:!0,page:t,recordingKey:e,closeModal:n})),m=a.createElement(a.Fragment,null,a.createElement(tk.Y9,null,(0,c.t)("sites.metadata.heading.custom_code")),a.createElement(tT.TN,{isSite:!0,page:t,recordingKey:e}));return t&&(0,tC.fn)((0,tC.sH)(t))?a.createElement("div",{className:d.s.flex.flexColumn.gap24.$},s?tI(o):a.createElement("div",null,o),s?tI(u):a.createElement("div",null,u),l&&a.createElement(a.Fragment,null,s?tI(m):a.createElement("div",null,m))):null}function tA({recordingKey:e,page:t,closeModal:n}){let l=(0,ek.b)(),i=a.createElement(a.Fragment,null,a.createElement(tk.Y9,null,(0,c.t)("sites.metadata.heading.general")),a.createElement(tT.Ls,{page:t,recordingKey:e,key:`title-${t}`}),a.createElement(tT.V1,{page:t,recordingKey:e,key:`description-${t}`}),a.createElement(tT.Ld,{page:t,recordingKey:e,key:`language-${t}`}),a.createElement(tT.Xw,{page:t,recordingKey:e,key:`search-indexing-${t}`})),r=a.createElement(a.Fragment,null,a.createElement(tk.Y9,null,(0,c.t)("sites.metadata.heading.images")),a.createElement(tT.Re,{page:t,recordingKey:e,closeModal:n,key:`social-image-${t}`}));return t&&(0,tC.fn)((0,tC.sH)(t))?a.createElement("div",{className:d.s.flex.flexColumn.gap24.$},l?tI(i):a.createElement("div",null,i),l?tI(r):a.createElement("div",null,r)):null}let tR={section:e=>[{width:null==e?null:"x1bl4301",borderRadius:"x9h44rk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,padding:"x1ib1h6n",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,border:"x1bamp8i",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,boxSizing:"x9f619",$$css:!0},{"--width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e)}]},tM=(0,g.Ju)(function(){let e=(0,l.wA)(),t=(0,l.d4)(e=>e.modalShown?.type===tM.type),n=(0,a.useRef)(null),i=(0,b.Oc)()?800:x.Aq,r=a.useCallback(()=>{e((0,m.AS)())},[e]);(0,a.useEffect)(()=>{let e=e=>{n.current&&!n.current.contains(e.target)&&r()};return t?document.addEventListener("click",e):document.removeEventListener("click",e),()=>{document.removeEventListener("click",e)}},[r,t]);let u=new o.Mi((window.innerWidth-i)/2,s.J9+12);return a.createElement(f.vx,{ref:e=>n.current=e?.getEl()||null,autoflowHeight:!0,closeButtonClassName:d.s.mr6.$,dragHeaderOnly:!0,headerSize:"large",initialPosition:u,initialWidth:i,onClose:r,recordingKey:tD,title:(0,c.t)("sites.metadata.modal_header")},a.createElement(tP,{closeModal:r,recordingKey:tD}))}),tD="site-settings-modal";function tP({recordingKey:e,closeModal:t}){return a.createElement("div",{className:d.s.flex.$,style:u.sx.add({maxHeight:"70vh"}).$},a.createElement("div",{className:d.s.flex.flexColumn.flexShrink0.colorBorder.$,style:u.sx.add({borderRightWidth:"1px",borderRightStyle:"solid",width:`${x.zg}px`}).$},a.createElement(eC.Sv,null)),a.createElement("div",{className:d.s.flex.flexColumn.wFull.pt4.pb36.overflowAuto.cursorDefault.$},a.createElement(tj,{recordingKey:e,closeModal:t})))}function tj({recordingKey:e,closeModal:t}){let n=(0,r.md)(v.jI),l=(0,p.dh)(),s=(0,h.tS)(),o=(0,E._t)(s??"");return null===n||n===l||n===y.p.WEBSITE?a.createElement(tN,{page:l,recordingKey:e,closeModal:t}):n===y.p.DOMAINS?a.createElement(tw,{domainInfo:o,recordingKey:e}):(0,_.aI)()&&(0,i.k)().bake_sb&&n===y.p.SUPABASE?a.createElement(ey,null):a.createElement(tA,{page:n,recordingKey:e,closeModal:t})}},690137:(e,t,n)=>{n.d(t,{X:()=>a,v:()=>l});let a=320,l=380},532091:(e,t,n)=>{n.d(t,{n:()=>l});var a=n(661780);function l(){let e=(0,a.iZ)();return!e||null!=e.community_blocked_at||e.sharing_restricted}},614161:(e,t,n)=>{n.d(t,{JW:()=>r});var a=n(195507),l=n(653959),i=n(635547);function r(e){let[t]=(0,l.IT)(i.DuV.Query(e?{fileKey:e}:null)),[n]=(0,l.IT)(i.lPt.Query(e?{fileKey:e}:null));if("loaded"!==t.status||"loaded"!==n.status)return{isLoading:!0};let r=(0,a.oA)(t.data?.siteBundles),s=(0,a.oA)(n.data?.siteMount),o=r?.find(e=>"succeeded"===e.status)||null,d=r?.find(e=>null==e.completedAt)||null,c=!s||!!s?.unpublishedAt,u=s?.publishEvents??[];return{isLoading:!1,isPublishing:null!==d,lastPublishedAt:function(e,t){if(!e||e?.unpublishedAt)return null;let n=e?.publishEvents??[];if(n.length>0){let e=n.find(e=>["publish_new_bundle","publish_preexisting_bundle"].includes(e.action));if(e)return e.createdAt}return t?t.completedAt:null}(s||null,o),publishedBy:function(e,t){if(!e||e?.unpublishedAt)return null;let n=e?.publishEvents??[];if(n.length>0){let e=n.find(e=>["publish_new_bundle","publish_preexisting_bundle"].includes(e.action));if(e)return e.actor}return t?.publishedByUser||null}(s||null,o),lastAttemptedPublish:function(e,t){let n=null;t.length>0&&(n=t.find(e=>["publish_new_bundle","publish_preexisting_bundle"].includes(e.action)));let a=e?.find(e=>null!=e.completedAt)||null;return n?a&&a.completedAt?n.createdAt>=a.completedAt?n.siteBundle:n.createdAt<a.completedAt?a:null:n.siteBundle:a}(r||[],u),lastSuccessfulPublishedResponsiveSetGuids:function(e,t,n){if(e)return null;if(t.length>0){let e=t.find(e=>["publish_new_bundle","publish_preexisting_bundle"].includes(e.action));if(e)return e.siteBundle?.responsiveSetGuids??null}return n?.responsiveSetGuids??null}(c,u,o),isUnpublished:c,hasPublishEvents:u.length>0}}},269846:(e,t,n)=>{n.d(t,{g:()=>tb});var a=n(848318),l=n(157907),i=n(23459),r=n(579020),s=n(195507),o=n(882439),d=n(442313),c=n(936231),u=n(180423),m=n(376780),p=n(183651),h=n(503024),g=n(177570),f=n(146797),E=n(990807),b=n(187536),v=n(733787),y=n(274451),_=n(731755),x=n(356505),S=n(17755),w=n(776785),C=n(194948),k=n(690137);function T({fileKey:e,onClose:t,onUnpublish:n}){let[l]=(0,C._)(),i=(0,w._t)(e);return a.createElement(y.bL,{width:k.X,onClose:t,defaultPosition:l},a.createElement(_.vo,null,a.createElement(_.Y9,null,a.createElement(_.hE,null,(0,d.tx)("sites.toolbar.publish_modal.unpublish_site"))),a.createElement(_.nB,null,a.createElement("div",{className:S.s.py8.$},(0,d.tx)("sites.toolbar.publish_modal.unpublish_confirmation",{domain:a.createElement("span",{className:S.s.overflowHidden.ellipsis.colorTextBrand.$},i?.domain??"")}))),a.createElement(_.wi,null,a.createElement(_.jk,null,a.createElement(x.$n,{variant:"secondary",onClick:t},(0,d.tx)("general.cancel")),a.createElement(x.$n,{variant:"destructive",onClick:n,disabled:!1},(0,d.tx)("sites.toolbar.publish_modal.unpublish"))))))}var I=n(843898),N=n(430285),A=n(351766),R=n(493554),M=n(635547),D=n(63341),P=n(532091),j=n(716544),L=n(445777),O=n(645221),B=n(697714),F=n(661780),z=n(792478),$=n(809431),G=n(880677),U=n(158349);async function H(e,{fileKey:t,publishedByUserId:n,responsiveSetGuids:a}){let l=V(e,t,a);(0,G.WB)().optimisticallyCreate({SiteBundle:{[`optimistic-id-${t}`]:{fileKey:t,canRead:!0,canReadV2:!0,completedAt:null,createdAt:new Date,publishedByUserId:n,publishedByUser:null,status:"pending",updatedAt:new Date,responsiveSetGuids:a}}},l);let{site_bundle_id:i}=(await l).data.meta;return i}async function K(e,t){let n=null;try{n=await (0,U.m)(t,void 0,void 0,e,!0)}catch(e){throw Error(`error creating savepoint: ${e}`)}if(!n)throw Error("error creating savepoint: savepoint is nullish");return n}async function V(e,t,n){let a;let i=await K(e,t),r=(0,$.Dg)({shouldUse250317Index:!!(0,l.k)().font_index_250317});try{a=await f.z.postSitesBundleAsync({fileKey:t,checkpointKey:i.checkpoint_key,responsiveSetGuids:n,fontIndexHash:r})}catch(e){throw Error(`error posting sites bundle: ${e}`)}return a}var W=n(6819),Y=n(536915),q=n(164963),X=n(85442),J=(e=>(e.PublishingInProgress="sites.PublishingInProgress",e.PublishingSuccess="sites.PublishingSuccess",e.PublishingFailed="sites.PublishingFailed",e))(J||{}),Z=n(36789),Q=n(614161);let ee=(0,z.Wh)(()=>(0,i.eU)({inProgress:!1,bundleId:null,error:!1}));function et({fileKey:e}){let t=(0,i.Xr)(ee),n=(0,j.wA)(),l=F.iZ()?.id,s=(0,Z.Oc)();return{onPublishChanges:(0,a.useCallback)(async a=>{let i;(0,r.sx)("sites_publish_started",{fileKey:e,productType:s?"figmake":"sites"}),t({inProgress:!0,bundleId:null,error:!1});try{i=await H(n,{fileKey:e,publishedByUserId:l||"",responsiveSetGuids:a})}catch(e){t({inProgress:!1,bundleId:null,error:!0});return}t({inProgress:!0,bundleId:i,error:!1})},[n,e,s,t,l]),onUpdateBundle:(0,a.useCallback)(async n=>{if(n.siteBundle?.id&&e){try{t({inProgress:!0,bundleId:null,error:!1}),await f.z.updateBundle({fileKey:e,bundleId:n.siteBundle.id})}catch(e){console.error(e),t({inProgress:!1,bundleId:null,error:!0});return}t({inProgress:!0,bundleId:n.siteBundle.id,error:!1})}},[e,t])}}var en=(e=>(e.None="None",e.Publishing="Publishing",e.Published="Published",e.Failed="Failed",e))(en||{});function ea({fileKey:e,actionToRetry:t}){let{Sprig:n}=(0,O.A)(),l=(0,w._t)(e),r=(0,Q.JW)(e),s=(0,i.md)(ee),o=(0,i.Xr)(ee),d=(0,j.wA)(),c=(0,a.useCallback)(()=>{o({inProgress:!1,bundleId:null,error:!1})},[o]),u=(0,a.useCallback)(()=>{Object.values(J).forEach(e=>{d(B.F.dequeue({matchType:e}))})},[d]),m=(0,Z.Oc)();(0,a.useEffect)(()=>{let e=el({publishProgress:s,publishStatus:r,domainInfo:l});("Published"===e||"Failed"===e)&&c(),ei({visualBellManagerState:e,domainInfo:l,dequeuePublishVisualBells:u,actionToRetry:t,Sprig:n,isFigmakeFile:m})},[n,u,d,l,s,r,c,t,m]),(0,a.useEffect)(()=>()=>{u()},[u])}let el=({publishProgress:e,publishStatus:t,domainInfo:n})=>t.isLoading?"None":e.error?"Failed":e.inProgress&&!e.bundleId?"Publishing":e.inProgress&&e.bundleId&&t.lastAttemptedPublish?.id===e.bundleId?t.lastAttemptedPublish?.status==="succeeded"&&n?.fullURL?"Published":t.lastAttemptedPublish?.status==="failed"?"Failed":"Publishing":"None",ei=({visualBellManagerState:e,domainInfo:t,dequeuePublishVisualBells:n,actionToRetry:a,Sprig:i,isFigmakeFile:r})=>{switch(e){case"Publishing":n(),W.D.dispatch(B.F.enqueue({message:r?(0,d.t)("figmake.publish.publishing_your_site"):(0,d.t)("sites.toolbar.publishing_your_site"),icon:q.zX.SPINNER,type:"sites.PublishingInProgress",timeoutOverride:1/0}));break;case"Published":t?.fullURL&&((0,l.k)().sts_sprig_targeted_feedback&&i("track","sites_publish"),function({domainInfo:e,onDismiss:t,isFigmake:n}){let a=(0,w.RT)(e),l=(0,w.uw)(e);W.D.dispatch(B.F.dequeue({matchType:"sites.PublishingInProgress"})),(0,Y.j)("sites.PublishingSuccess",!1,{i18n:{id:n?q.XU.FIGMAKE_PUBLISH_SUCCESS_BELL_ID:q.XU.SITES_PUBLISH_SUCCESS_BELL_ID,params:{text:a}}},1/0,q.zX.CHECK,{text:(0,d.t)("sites.toolbar.publish_modal.copy_to_clipboard"),action:()=>{W.D.dispatch(X.lW({stringToCopy:l,ignoreLineBreaks:!1}))}},t)}({domainInfo:t,onDismiss:()=>{n()},isFigmake:r}));break;case"Failed":!function({onRetry:e,onDismiss:t,isFigmake:n}){W.D.dispatch(B.F.dequeue({matchType:"sites.PublishingInProgress"})),(0,Y.j)("sites.PublishingFailed",!0,{message:n?(0,d.t)("figmake.publish.unsuccessful_publish_bell"):(0,d.t)("sites.toolbar.publish_modal.unsuccessful_publish_bell")},1/0,q.zX.EXCLAMATION,{text:(0,d.t)("sites.toolbar.publish_modal.retry"),action:e},t)}({onRetry:()=>{n(),a()},onDismiss:()=>{n()},isFigmake:r});break;case"None":break;default:(0,L.xb)(e)}};var er=n(463862),es=n(952423),eo=n(51910),ed=n(166917);let ec=(0,z.Wh)(()=>(0,i.eU)(new Map));var eu=n(792978),em=n(897378),ep=n(376025),eh=n(47316),eg=n(859989),ef=n(680579),eE=n(972486),eb=n(501184),ev=n(536384),ey=n.n(ev),e_=n(753131),ex=n(576220),eS=n(700072),ew=n(31972),eC=n(219205),ek=n(599952),eT=n(629829),eI=n(145015);function eN(){return a.createElement("div",{...eT.Ay.props(eA.acceptablePublicationPolicy),"data-testid":"ownership-warning"},(0,l.k)().sts_onboarding_v2?(0,d.tx)("sites.toolbar.publish_modal.acceptable_publication_policy_agreement",{acceptable_publication_policy:a.createElement(eI.CY,{href:"",target:"_blank",trusted:!0},(0,d.tx)("sites.toolbar.publish_modal.acceptable_publication_policy"))}):(0,d.tx)("sites.toolbar.publish_modal.by_publishing_this_site_you_are_confirming_that_you_own_the_rights_to_all_the_images_and_personal_fonts_included_in_it"))}let eA={acceptablePublicationPolicy:{...ek.g.textBodyMedium,marginBottom:"xod5an3",color:"x1n0bwc9",$$css:!0}},eR="styles-module--selectWebpagesButton--jz-y6";var eM=(e=>(e.SECONDARY="secondary",e.DANGER="danger",e.WARNING="warning",e))(eM||{});function eD({icon:e,bannerType:t,title:n,children:l,legacyMargin:i,inLine:r}){return a.createElement("div",{className:ey()(S.s.case([["secondary"===t,S.s.colorBgSecondary],["danger"===t,S.s.colorBgDangerTertiary],["warning"===t,S.s.colorBgWarningTertiary]]).if(i,S.s.mx16.mt16.mb20,S.s.mb12).if(r,S.s.flex.flexRow.itemsCenter.p8,S.s.pt4.pb8.px8).bRadius5.$)},e&&a.createElement("div",{className:ey()("styles-module--warningIconWrapper--1toyP",S.s.if(r,S.s.mbAuto,S.s.mb4).$)},e),n&&a.createElement("h4",{className:S.s.textBodyMediumStrong.$},n),l)}var eP=n(593815),ej=n(379338),eL=n(838488);function eO({legacyMargin:e}){let t="prod"===(0,ej.tl)().cluster_name?a.createElement(eu.N,{href:eL.sZ,newTab:!0},(0,d.tx)("sites.toolbar.publish_modal.confidentiality_warning_learn_more_link")):a.createElement(eu.N,{href:"https://go/sites-public-hosting",newTab:!0},"go/sites-public-hosting");return a.createElement(eD,{bannerType:eM.SECONDARY,icon:a.createElement(eP.Z,null),title:(0,d.t)("sites.toolbar.publish_modal.a_reminder_about_confidentiality"),legacyMargin:e},a.createElement("p",null,(0,d.tx)("sites.toolbar.publish_modal.confidentiality_warning_body",{learn_more_link:t})))}function eB(){return a.createElement("div",{...eT.Ay.props(eF.acceptablePublicationPolicy),"data-testid":"ownership-warning"},(0,d.tx)("figmake.publish_modal.acceptable_publication_policy_agreement",{acceptable_publication_policy:a.createElement(eI.CY,{href:"/legal/acceptable-publication-policy/",target:"_blank",trusted:!0},(0,d.tx)("figmake.publish_modal.acceptable_publication_policy"))}))}let eF={acceptablePublicationPolicy:{...ek.g.textBodyMedium,marginBottom:"xod5an3",color:"x1n0bwc9",$$css:!0}};var ez=n(352485),e$=n(596616),eG=n(446463),eU=n(635080),eH=n(601451),eK=n(896966),eV=n(824563);function eW({isSitePublished:e,allResponsiveSetGuids:t,selectedResponsiveSetGuids:n,lastSuccessfulPublishedResponsiveSetGuids:l,updateGuidSelectionState:i}){let r=(0,er.e)();return a.createElement("div",{className:S.s.maxH400.$},a.createElement("div",{className:S.s.h32.flex.itemsCenter.colorTextSecondary.$},(0,d.t)("sites.toolbar.publish_modal.ready_to_publish")),r&&a.createElement(eq,{guid:r,isHomepage:!0,isSelected:n.has(r),onChange:i,isSitePublished:e,isPagePublished:l?.includes(r)??!1}),Array.from(n).filter(e=>e!==r).map(t=>a.createElement(eq,{key:t,guid:t,isSelected:!0,onChange:i,isSitePublished:e,isPagePublished:l?.includes(t)??!1})),t.some(e=>!n.has(e))&&a.createElement("div",{className:S.s.h32.flex.itemsCenter.colorTextSecondary.$},(0,d.t)("sites.toolbar.publish_modal.hide_from_publish")),t.filter(e=>!n.has(e)).map(t=>a.createElement(eq,{key:t,guid:t,isSelected:!1,onChange:i,isSitePublished:e,isPagePublished:l?.includes(t)??!1})))}function eY({isSitePublished:e,isPagePublished:t}){return e?a.createElement("div",{className:S.s.ml8.$},a.createElement(eV.x,{isPublished:t,dataTestId:"sitesPagePublishStatusBadge"})):null}function eq({guid:e,isSelected:t,onChange:n,isHomepage:l=!1,isSitePublished:r,isPagePublished:s}){let o=(0,ed.Fk)(t=>t.get(e)?.name,e),c=(0,ed.Fk)(t=>t.get(e)?.responsiveSetSettings?.title??"",e),u=(0,i.md)(ee).inProgress,m=`checkbox-${(0,a.useId)()}`,p=`label-${(0,a.useId)()}`;return o?a.createElement("div",{key:e,className:S.s.h48.flex.flexRow.itemsCenter.$},a.createElement(ez.W,{htmlAttributes:{"data-testid":`${o}-checkbox`},id:m,disabled:u||l,checked:t,onChange:t=>n(e,t),"aria-describedby":p}),a.createElement("div",{className:S.s.ml4.$},l?a.createElement(eG.I,null):a.createElement(eU.g,null)),a.createElement(e$.J,{htmlAttributes:{id:p},className:S.s.maxW250.ml4.$},c?a.createElement(a.Fragment,null,a.createElement(eX,{labelText:c,isSitePublished:r,isPagePublished:s}),a.createElement("div",{className:S.s.colorTextSecondary.maxW250.truncate.$},o)):a.createElement(eX,{labelText:o,isSitePublished:r,isPagePublished:s})),!t&&r&&s&&a.createElement(eH.b,{className:S.s.mlAuto.colorIconWarningPressed.$,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,d.t)("sites.toolbar.publish_modal.page_will_unpublish_at_next_update"),"data-tooltip-show-above":!0,"data-tooltip-max-width":300,"data-testid":"page-unpublish-warning"})):((0,eK.x1)("sites_publish_modal","node_not_found",{guid:e}),null)}function eX({labelText:e,isSitePublished:t,isPagePublished:n}){return a.createElement("div",{className:S.s.flex.flexRow.itemsCenter.$},a.createElement("div",{className:S.s.truncate.maxW150.$},e),a.createElement("div",null,a.createElement(eY,{isSitePublished:t,isPagePublished:n})))}var eJ=n(792760),eZ=n(653959),eQ=n(228238),e0=n(182059),e1=n(473889),e4=n(790355),e5=n(950738),e2=n(369600),e3=n(312321),e7=n(205397);function e6({fileKey:e}){let[t]=(0,eZ.IT)(M.lPt.Query({fileKey:e}));if(t.status===eQ.H.LOADING)return a.createElement(e1.kt,null);if(t.status===eQ.H.ERRORS)return a.createElement("div",null,(0,d.t)("sites.toolbar.publish_modal.error_loading_publish_history"));let n=(0,s.oA)(t.data?.siteMount),l=n?.publishEvents??[];return 0===l.length?a.createElement("div",null,(0,d.t)("sites.toolbar.publish_modal.no_publish_history")):a.createElement("div",null,l.map(e=>a.createElement(e8,{key:e.id,publishEvent:e,isLatest:e.id===l[0]?.id,isOldest:e.id===l[l.length-1]?.id})))}function e8({publishEvent:e,isLatest:t,isOldest:n}){let l=()=>{switch(e.action){case"publish_new_bundle":return n?(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.published_site"):(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.published_changes");case"publish_preexisting_bundle":return(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.republished_previous_version");case"unpublish":return(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.unpublished_site");default:return console.error(`Unknown publish event action: ${e.action}`),null}},i=(0,j.wA)(),r=(0,e5.Um)(),s=a.useRef(null),o=`site-publish-history-dropdown-${e.id}`,c=r?.type===o,u=(0,e2.tS)(),{onUpdateBundle:m}=et({fileKey:u??""}),p=(0,Q.JW)(u);if(ea({fileKey:u??"",actionToRetry:()=>{m(e)}}),!l()||!u)return null;let h=!t&&"unpublish"!==e.action&&!!e.siteBundle?.id;return a.createElement("div",{className:"x78zum5 x1nhvcw1 x1qjc9v5 x1jnr06f x1n2onr6","data-testid":"publish-event-row"},a.createElement("div",{className:"x78zum5 xdt5ytf x1nhvcw1 x5yr21d xkh2ocl x1iorvi4"},a.createElement("div",{className:"x78zum5 x6s0dn4 xl56j7k xezl2tj xlrawln x167g77z x2lah0s x1d36bvo x1v8gsql x1gslohp"},a.createElement(e3.D,null))),a.createElement("div",{className:"x78zum5 x1qughib x19y5rnk xt0e3qv x163pfp xmzs88n x1iorvi4 xjkvuk6 xh8yej3 xv2f06h"},a.createElement("div",{className:"x78zum5 xdt5ytf x1jnr06f"},a.createElement("div",{className:"x78zum5 x1nhvcw1 x6s0dn4 xbcm6b9"},a.createElement("div",{className:"x1j6dyjg x6xwguf x1akne3o"},l()),"\xb7",a.createElement("div",{className:"x1j6dyjg x1n0bwc9"},t?(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.latest"):(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.published_date",{publishedDate:e.createdAt}))),a.createElement("div",{className:"x1j6dyjg x1n0bwc9"},t?(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.from_date",{publishedDate:e.createdAt}):null),a.createElement("div",{className:"x78zum5 x6s0dn4 x1jnr06f"},a.createElement(ex.H8,{size:ex.Pf.SMALL,user:e.actor||{handle:" "}}),a.createElement("span",null,e.actor?.handle))),c&&s.current&&a.createElement(e7.Jz,{options:[a.createElement(e0.c$,{key:0,onClick:()=>{m(e)},"data-testid":"republish-button"},(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.republish"))],hideDropdown:()=>{i(e4.oB())},targetRect:s.current.getBoundingClientRect(),lean:"left"}),h&&a.createElement(ep.E,{ref:s,className:"x1717udv xvy4d1p xxk0z11 x1epfdc xwbv1nw",onClick:e=>{i(e4.j7({type:o,data:{targetRect:e.currentTarget.getBoundingClientRect()}}))},"data-testid":"more-button",disabled:p.isLoading||p.isPublishing},a.createElement(eJ.J,null))))}var e9=n(726521),te=n(468189),tt=n(34417);function tn({label:e,content:t,action:n,forceShortContentStyle:l}){return a.createElement("div",{className:S.s.flex.justifyBetween.itemsCenter.minH24.$},a.createElement("div",{className:S.s.flex.itemsCenter.$},a.createElement("div",{className:"styles-module--publishModalRowLabel--WRR8e"},a.createElement("span",{className:S.s.colorTextSecondary.$},e)),a.createElement("div",{className:n||l?"styles-module--publishModalRowContent--YPJb5":"styles-module--publishModalRowContentLong--huC-L"},t)),n&&a.createElement("div",{className:S.s.maxW32.$},n))}function ta(e){let{selectedResponsiveSetGuids:t,onViewErrors:n}=e,l=(0,i.md)(tt.o),r=Array.from(t).reduce((e,t)=>e+(l[t]?.length??0),0);return a.createElement("div",{"data-testid":"site-review-issues-row",className:S.s.py4.$},a.createElement(tn,{label:(0,d.t)("sites.toolbar.publish_modal.issues_label"),content:r>0?a.createElement("div",{className:S.s.flex.justifyBetween.itemsCenter.overflowHidden.$},a.createElement(ep.E,{className:ey()(S.s.wFull.flex.justifyBetween.py4.bRadius5.$),onClick:n},a.createElement(e9.E,{variant:"warningFilled"},(0,d.tx)("sites.toolbar.publish_modal.num_issues_to_review",{numIssues:r})))):a.createElement(e9.E,{variant:"successOutline"},(0,d.tx)("sites.lint.no-issues")),action:r>0?a.createElement(ep.E,{"aria-label":(0,d.t)("sites.toolbar.publish_modal.review_issues_aria"),className:ey()(S.s.wFull.flex.justifyBetween.bRadius5.$,eR),onClick:n},a.createElement(ef.a,{style:{minWidth:"fit-content"}})):null}))}function tl(){return a.createElement("div",{className:S.s.py4.$},a.createElement(tn,{label:(0,d.t)("sites.toolbar.publish_modal.issues_label"),content:a.createElement("div",{className:"x78zum5 x1q0g3np"},a.createElement(te.k,{size:"sm"}),a.createElement("span",{className:"x1iog12x x1n0bwc9"},(0,d.tx)("sites.lint.looking-for-issues")))}))}function ti(e){return a.createElement(a.Suspense,{fallback:a.createElement(tl,null)},a.createElement(ta,{selectedResponsiveSetGuids:e.selectedResponsiveSetGuids,onViewErrors:e.onViewErrors}))}var tr=n(734624);function ts(e){let{selectedResponsiveSetGuids:t}=e,n=(0,i.md)(tt.o);return 0===Array.from(t).reduce((e,t)=>e+(n[t]?.length??0),0)?a.createElement(tr.tE,{title:(0,d.t)("sites.toolbar.publish_modal.no_issues.title"),description:(0,d.t)("sites.toolbar.publish_modal.no_issues.description")}):a.createElement(tr.F8,{lintingResults:n,onlyShowResponsiveSetGuids:Array.from(t),recordingKey:"sites-publish-modal"})}function to(e){return a.createElement(_.nB,{padding:0},a.createElement(a.Suspense,{fallback:a.createElement(tr.j$,null)},a.createElement(ts,{selectedResponsiveSetGuids:e.selectedResponsiveSetGuids})))}var td=n(579463),tc=n(597817);function tu({isSitePublished:e}){let t=function(){let e=(0,b.Oc)(),t=(0,tc.cJ)(),n=(0,td.Fj)("bake_pub_disabled_message_type"),a=(0,td.Fj)("pung_publishing_disabled_message_type");return e?"rollout"===n.getDynamicConfig().get("messageType","rollout"):!!t&&"rollout"===a.getDynamicConfig().get("messageType","rollout")}();return a.createElement(eD,{bannerType:e?eM.DANGER:eM.SECONDARY},a.createElement("p",{className:S.s.pt4.flex.itemsCenter.gap8.fontMedium.$},a.createElement(eH.b,{style:{minWidth:"24px"}}),t?(0,d.tx)("sites.toolbar.publish_modal.publish_disabled_rollout"):(0,d.tx)("sites.toolbar.publish_modal.publish_disabled_incident")))}function tm({numUnpublishingPages:e}){return a.createElement(eD,{bannerType:eM.WARNING,icon:a.createElement(eH.b,null),inLine:!0},a.createElement("p",null,(0,d.t)("sites.toolbar.publish_modal.pages_will_unpublish_with_the_next_update",{numPages:e})))}var tp=(e=>(e.Main="main",e.PageSelection="page-selection",e.ReviewIssues="review-issues",e.PublishHistory="publish-history",e))(tp||{});function th({isFigmake:e}){let t=e?(0,d.t)("figmake.publish_modal.site_title_label"):(0,d.t)("sites.metadata.controls.title_site.label");return a.createElement("div",{"data-testid":"site-title-row",className:S.s.py4.$},a.createElement(tn,{label:t,content:a.createElement(ew.q,null),forceShortContentStyle:!0}))}function tg({fileKey:e,onClose:t,onPublishChanges:n,isPublishing:i,lastSuccessfulPublishAt:s,allResponsiveSetGuids:o,selectedResponsiveSetGuids:c,publishedBy:u,lastPublishAttemptStatus:m,lastPublishAttemptAt:p,isSitePublished:g,lastSuccessfulPublishedResponsiveSetGuids:f,updateGuidSelectionState:E,hasPublishEvents:v}){let[T]=(0,C._)(),[I,N]=(0,a.useState)("main"),A=(0,w._t)(e),R=(0,b.Oc)(),M=(0,j.wA)(),D={top:eS.f+8,right:14},P=R?D:T,O=(0,l.k)().sts_ppp&&!R,B=null;switch(I){case"main":B=a.createElement(_.nB,null,a.createElement("div",{className:S.s.py4.$},a.createElement(th,{isFigmake:R}),A&&a.createElement("div",{"data-testid":"site-domain-row",className:S.s.py4.$},a.createElement(tn,{label:(0,d.t)("sites.toolbar.publish_modal.domain_header"),content:a.createElement(eu.N,{href:(0,w.uw)(A),newTab:!0},a.createElement("span",{className:S.s.overflowHidden.ellipsis.colorTextBrand.$},(0,w.RT)(A))),action:a.createElement(em.K,{onClick:()=>{M(X.lW({stringToCopy:(0,w.uw)(A),ignoreLineBreaks:!1}))},"aria-label":(0,d.t)("sites.toolbar.publish_modal.copy_label_to_clipboard",{label:(0,d.t)("sites.toolbar.publish_modal.domain_header")}),htmlAttributes:{"data-tooltip":(0,d.t)("sites.toolbar.publish_modal.copy_to_clipboard"),"data-tooltip-type":h.Ib.TEXT,"data-tooltip-show-immediately":"true"}},a.createElement(eg.X,null))})),a.createElement("div",{"data-testid":"site-status-row",className:S.s.py4.$},a.createElement(tn,{label:(0,d.t)("sites.toolbar.publish_modal.status_header"),content:a.createElement("div",{className:S.s.flex.itemsCenter.h24.$},a.createElement(eV.x,{isPublished:g,dataTestId:"sitesPublishStatusBadge"}))})),O&&a.createElement("div",{"data-testid":"site-pages-row",className:S.s.py4.$},a.createElement(tn,{label:(0,d.t)("sites.toolbar.publish_modal.pages_label"),content:a.createElement("div",{className:S.s.flex.justifyBetween.itemsCenter.overflowHidden.$},a.createElement(ep.E,{className:ey()(S.s.wFull.flex.justifyBetween.py4.bRadius5.$),onClick:()=>N("page-selection")},(0,d.tx)("sites.toolbar.publish_modal.num_pages",{numPages:c.size}))),action:a.createElement(ep.E,{"aria-label":(0,d.t)("sites.toolbar.publish_modal.select_pages_to_publish"),className:ey()(S.s.wFull.flex.justifyBetween.bRadius5.$,eR),onClick:()=>N("page-selection")},a.createElement(ef.a,{style:{minWidth:"fit-content"}}))})),!R&&a.createElement(ti,{selectedResponsiveSetGuids:c,onViewErrors:()=>{N("review-issues"),(0,r.sx)("sites_open_lint_modal",{source:"publish_modal"})}}),s&&a.createElement("div",{"data-testid":"site-last-published-row",className:S.s.py4.$},a.createElement(tn,{label:(0,d.t)("sites.toolbar.publish_modal.last_published_header"),content:a.createElement("div",{className:S.s.flex.itemsCenter.$},a.createElement(e_.h1,{date:s,capitalize:!0}),u&&a.createElement("span",{className:S.s.flex.justifyCenter.itemsCenter.ml4.$},` \xb7 `,a.createElement("div",{className:S.s.flex.justifyCenter.itemsCenter.$},a.createElement("div",{className:S.s.flex.itemsCenter.justifyCenter.h24.w24.$},a.createElement(ex.H8,{size:ex.Pf.SMALL,user:u||{handle:" "}})),a.createElement("span",{className:"styles-module--publishedByHandle--d-S6y"},u.handle)))),action:(0,l.k)().sts_revert_publish&&v?a.createElement(ep.E,{"aria-label":(0,d.t)("sites.toolbar.publish_modal.publish_history"),className:ey()(S.s.wFull.flex.justifyBetween.bRadius5.$,eR),onClick:()=>{N("publish-history"),(0,r.sx)("sites_publish_history_opened",{productType:R?"figmake":"sites"})}},a.createElement(ef.a,{style:{minWidth:"fit-content"}})):null}))));break;case"page-selection":B=a.createElement(_.nB,null,a.createElement("div",{className:S.s.py4.$},a.createElement(eW,{isSitePublished:g,allResponsiveSetGuids:o,selectedResponsiveSetGuids:c,lastSuccessfulPublishedResponsiveSetGuids:f,updateGuidSelectionState:E})));break;case"review-issues":B=a.createElement(to,{selectedResponsiveSetGuids:c});break;case"publish-history":B=a.createElement(_.nB,null,a.createElement(e6,{fileKey:e}));break;default:(0,L.xb)(I)}let F=f?.filter(e=>!c.has(e))||[],z=function(){let e=(0,b.Oc)(),t=(0,eC.cJ)();return e?!(0,l.k)().bake_pub:!!t&&!(0,l.k)().sts_pub_enabled}(),$=(0,a.useCallback)(()=>{n(),t()},[n,t]);return a.createElement(y.bL,{width:k.v,onClose:t,defaultPosition:P},a.createElement(_.vo,null,a.createElement(_.Y9,null,a.createElement(tf,{view:I,setPublishModalView:N})),B,"main"===I&&a.createElement(_.wi,null,a.createElement("div",{className:S.s.py12.pr8.wFull.$},z&&a.createElement(tu,{isSitePublished:g}),"failed"===m&&p&&!i&&a.createElement(eD,{bannerType:eM.DANGER},a.createElement("p",{className:S.s.pt4.flex.itemsCenter.gap8.fontMedium.$},a.createElement(eE.z,{style:{minWidth:"16px"}}),s?(0,d.tx)("sites.toolbar.publish_modal.last_update_failed"):(0,d.tx)("sites.toolbar.publish_modal.last_publish_failed"))),(0,l.k)().sts_ppp&&g&&F.length>0&&a.createElement(tm,{numUnpublishingPages:F.length}),R?a.createElement(eB,null):a.createElement(eN,null),!R&&(0,l.k)().sts_confidentiality_warning&&a.createElement(eO,null),a.createElement(x.IK,{variant:"primary",onClick:$,disabled:i||z,"data-testid":"sitesModalPublishButton"},i?(0,d.tx)("sites.toolbar.publish_modal.publishing_label"):g?(0,d.tx)("sites.toolbar.publish_modal.update"):(0,d.tx)("sites.toolbar.publish_modal.publish"))))))}function tf({view:e,setPublishModalView:t}){let n=(0,b.Oc)()?(0,d.tx)("figmake.publish_modal.modal_title"):(0,d.tx)("sites.toolbar.publish_modal.publish_site");switch(e){case"main":return a.createElement(_.hE,null,n);case"page-selection":return a.createElement(eh.J,{className:S.s.flex.itemsCenter.gap4.textBodyMediumStrong.$},a.createElement(ep.E,{onClick:()=>t("main"),"aria-label":(0,d.t)("general.back")},a.createElement(eb.t,null)),a.createElement("span",{className:S.s.colorTextSecondary.$},n," /"),a.createElement("span",null,(0,d.tx)("sites.toolbar.publish_modal.pages_label")));case"review-issues":return a.createElement(eh.J,{className:S.s.flex.itemsCenter.gap4.textBodyMediumStrong.$},a.createElement(ep.E,{onClick:()=>t("main"),"aria-label":(0,d.t)("general.back")},a.createElement(eb.t,null)),a.createElement("span",{className:S.s.colorTextSecondary.$},n," /"),a.createElement("span",null,(0,d.tx)("sites.toolbar.publish_modal.review_issues_label")));case"publish-history":return a.createElement(eh.J,{className:S.s.flex.itemsCenter.gap4.textBodyMediumStrong.$},a.createElement(ep.E,{onClick:()=>t("main"),"aria-label":(0,d.t)("general.back")},a.createElement(eb.t,null)),a.createElement("span",{className:S.s.colorTextSecondary.$},n," /"),a.createElement("span",null,(0,d.tx)("sites.toolbar.publish_modal.publish_history_label")));default:(0,L.xb)(e)}}function tE({fileKey:e,lastSuccessfulPublishAt:t,publishedBy:n,isPublishing:l,onPublishChanges:i,onClose:r,lastPublishAttemptStatus:s,lastPublishAttemptAt:o,allResponsiveSetGuids:d,selectedResponsiveSetGuids:c,isSitePublished:u,lastSuccessfulPublishedResponsiveSetGuids:m,updateGuidSelectionState:p,hasPublishEvents:h}){return a.createElement(tg,{allResponsiveSetGuids:d,fileKey:e,hasPublishEvents:h,isPublishing:l,isSitePublished:u,lastPublishAttemptAt:o,lastPublishAttemptStatus:s,lastSuccessfulPublishAt:t,lastSuccessfulPublishedResponsiveSetGuids:m,onClose:r,onPublishChanges:i,publishedBy:n,selectedResponsiveSetGuids:c,updateGuidSelectionState:p})}function tb({file:e}){let t=e.key,n=(0,i.md)(v.Sg),y=(0,i.md)(v.ds),_=(0,i.Xr)(v.mu),x=(0,i.Xr)(v.NX),S=(0,s.oA)(e.org?.sitesPublishingDisabled),w=(0,P.n)()||!!S||!!e.team?.studentTeamAt,C=(0,Q.JW)(t),{allResponsiveSetGuids:k,selectedResponsiveSetGuids:j,updateGuidSelectionState:L}=function(e){let[t,n]=(0,a.useState)(null),r=function(){let e=(0,eo.p8)("currentPage");return(0,ed.Fk)((e,t)=>(0,es.O5)(e,t).map(e=>e.guid),e)}(),s=(0,a.useMemo)(()=>new Set(r),[r]),o=(0,i.Xr)(ec),d=(0,i.md)(ec),c=!e.isLoading,u=c&&!!e.lastSuccessfulPublishedResponsiveSetGuids,m=(0,er.e)(),p=null;e.isLoading||(p=e.lastSuccessfulPublishedResponsiveSetGuids);let h=null;e.isLoading||(h=e.lastPublishedAt);let g=(0,a.useCallback)((e,t)=>{o(n=>(n.set(e,t),new Map(n)))},[o]);return(0,a.useEffect)(()=>{e.isLoading||h===t||(o(new Map),n(h))},[e,t,h,o]),(0,a.useMemo)(()=>{let e=new Set;return(0,l.k)().sts_ppp?c?(u?(p?.forEach(t=>{s.has(t)&&e.add(t)}),d.forEach((t,n)=>{!0===t?e.add(n):e.delete(n)})):r.forEach(t=>{!1!==d.get(t)&&e.add(t)}),m&&(e.add(m),d.set(m,!0)),{allResponsiveSetGuids:r,selectedResponsiveSetGuids:e,updateGuidSelectionState:g}):{allResponsiveSetGuids:r,selectedResponsiveSetGuids:new Set,updateGuidSelectionState:g}:{allResponsiveSetGuids:r,selectedResponsiveSetGuids:s,updateGuidSelectionState:g}},[c,m,u,r,g,s,d,p])}(C),O=(0,l.k)().sts_ppp?Array.from(j||[]):k,F={fileKey:t,responsiveSetsToPublish:O},{onPublishChanges:z}=et(F);ea({...F,actionToRetry:()=>z(O)});let $=(0,b.Oc)(),G=$?o.c:o.Ih,U=function(e,t){let n=(0,R.Rs)(M.x9E,{fileKey:e.key}),a=(0,D.e)();return N.Qw.useTransform(n,n=>{let i=n.file?.canPublishSiteWithReasons;if(!i||i.status!==A.tT.Loaded)return{result:e.canEdit,canRequestUpgrade:!1};if(t&&!(0,l.k)().bake_monetization&&!a)return{result:!1,canRequestUpgrade:!1};let r=i.data;return r.result?{result:!0,canRequestUpgrade:!1}:r.publicDenyReasons?.includes(m.QK.FILE_DENY_EDIT_NIL_PLAN_USER)?{result:!1,canRequestUpgrade:!1}:!t&&(0,l.k)().sites_publish_upgrade_entry_point&&r.publicDenyReasons?.includes(m.QK.FILE_DENY_PUBLISH_SITES_FILE_LACKS_LICENSE)||t&&(0,l.k)().bake_publish_upgrade_entry_point&&r.publicDenyReasons?.includes(m.QK.FILE_DENY_PUBLISH_FIGMAKE_FILE_LACKS_LICENSE)?{result:!1,canRequestUpgrade:!0}:{result:!1,canRequestUpgrade:!1}})}(e,$),{handleUpgrade:H,getUpgradeEligibility:K,hasPendingRequest:V}=(0,p.wH)(),Y=(0,a.useMemo)(()=>$?m.G_.FIGMAKE:m.G_.SITES,[$]),q=K(Y),X=V(Y),J=(0,d.tx)("sites.toolbar.publish"),Z=(0,d.tx)("figmake.header.publish"),ee=$?Z:J;if(!t||C.isLoading||!j||"loading"===U.status)return a.createElement(G,{variant:"secondary",disabled:!0,htmlAttributes:{"data-onboarding-key":E.ZH}},ee);if(U.data&&!U.data.result)return U.data.canRequestUpgrade?a.createElement(G,{disabled:q===g.q.CANNOT_UPGRADE,variant:"secondary",htmlAttributes:{"data-onboarding-key":E.ZH,"data-tooltip":X?(0,d.t)("fullscreen.toolbar.we_ve_sent_your_request_to_your_team_s_admins_we_ll_let_you_know_when_they_respond"):null,"data-tooltip-type":h.Ib.TEXT,"data-tooltip-max-width":200,"data-tooltip-show-below":!0},onClick:H({licenseType:Y,upgradeReason:I.i.PUBLISH_SITES,entryPoint:c.tc.PUBLISH_SITES})},ee):a.createElement(G,{variant:"secondary",disabled:!0,htmlAttributes:{"data-onboarding-key":E.ZH}},ee);let{isPublishing:en,lastPublishedAt:el,publishedBy:ei,lastAttemptedPublish:eu,isUnpublished:em,lastSuccessfulPublishedResponsiveSetGuids:ep}=C,eh=async()=>{(0,r.sx)("sites_unpublish_started",{fileKey:t,productType:"sites"});try{await f.z.unpublishSite({fileKey:t}),x()}catch(e){W.D.dispatch(B.F.enqueue({message:$?(0,d.t)("figmake.publish.failed_to_unpublish_site"):(0,d.t)("sites.toolbar.publish_modal.failed_to_unpublish_site"),error:!0}))}};return a.createElement(a.Fragment,null,a.createElement(G,{variant:"secondary",disabled:w,onClick:_,htmlAttributes:{"data-tooltip":S?(0,d.t)("sites.toolbar.org_disabled_publishing"):e.team?.studentTeamAt?(0,d.t)("sites.toolbar.publish_modal.publish_disabled_rollout"):w?(0,d.t)("sites.toolbar.publishing_is_disabled_for_your_account_please_contact_support"):void 0,"data-tooltip-type":h.Ib.TEXT,"data-tooltip-show-immediately":"true","data-onboarding-key":E.ZH},recordingKey:"publish-site",trackingProperties:{fileKey:t,productType:"sites",trackingDescriptor:u.c.PUBLISH}},ee),n&&a.createElement(tE,{allResponsiveSetGuids:k,fileKey:t,hasPublishEvents:C.hasPublishEvents,isPublishing:en,isSitePublished:!em,lastPublishAttemptAt:eu?.completedAt||null,lastPublishAttemptPublishedBy:eu?.publishedByUser?.handle||null,lastPublishAttemptStatus:eu?.status,lastSuccessfulPublishAt:el,lastSuccessfulPublishedResponsiveSetGuids:ep,onClose:_,onPublishChanges:()=>z(O),publishedBy:ei,selectedResponsiveSetGuids:j,updateGuidSelectionState:L}),y&&a.createElement(T,{fileKey:t,onClose:x,onUnpublish:eh}))}},824563:(e,t,n)=>{n.d(t,{x:()=>r});var a=n(848318),l=n(17755),i=n(442313);function r({isPublished:e,dataTestId:t}){return a.createElement("span",{className:l.s.inlineBlock.px4.bRadius5.textBodyMedium.if(e,l.s.colorBgSelected.colorTextBrand,l.s.colorBgSecondary.colorText).$,"data-testid":t},e?(0,i.tx)("sites.metadata.controls.publish_status.published"):(0,i.tx)("sites.metadata.controls.publish_status.not_published"))}},435146:(e,t,n)=>{if(n.d(t,{l:()=>m}),443==n.j)var a=n(303035);var l=n(442313);if(443==n.j)var i=n(42776);var r=n(351453),s=n(802780),o=n(376780),d=n(241917),c=n(503024),u=n(62429);function m({newFileFrom:e,disabled:t,isTeamLocked:n}){let m=(0,r.$)({editorType:o._Y.FIGMAKE,newFileFrom:e,contextClicked:`toolbar_${d.GJ}_created`}),p=(0,s.Yz)()(!!n),h=t?(0,l.t)("locked_team.label.tooltip"):void 0,g=t?c.Ib.TEXT:void 0,f=t?a.lQ:m;return{newFileFrom:e,disabled:!!t||p,onClick:f,dataTooltip:h,dataTooltipType:g,displayText:(0,l.t)("file_browser.creation_buttons.figmake"),dataTestId:`new-${d.GJ}-file-button`,editorThemeMode:"bake-filebrowser",key:u.D.NEW_FIGMAKE_FILE,listOptionType:i.R.FIGMAKE}}},507642:(e,t,n)=>{if(n.d(t,{l:()=>m}),443==n.j)var a=n(303035);var l=n(442313);if(443==n.j)var i=n(42776);var r=n(351453),s=n(802780),o=n(376780),d=n(241917),c=n(503024),u=n(62429);function m({newFileFrom:e,disabled:t,isTeamLocked:n,showRequestLabel:m,showRequestSentLabel:p}){let h=(0,r.$)({editorType:o._Y.SITES,newFileFrom:e,contextClicked:`toolbar_${d.oQ}_created`}),g=(0,s.Yz)()(!!n),f=t?(0,l.t)("locked_team.label.tooltip"):void 0,E=t?c.Ib.TEXT:void 0,b=t?a.lQ:h;return{newFileFrom:e,disabled:!!t||g||!!p,onClick:b,dataTooltip:f,dataTooltipType:E,displayText:(0,l.t)("file_browser.creation_buttons.sites"),dataTestId:`new-${d.oQ}-file-button`,editorThemeMode:"seascape",key:u.D.NEW_SITE_FILE,listOptionType:i.R.SITES,showRequestLabel:m,showRequestSentLabel:p}}},599378:(e,t,n)=>{n.d(t,{h:()=>a});let a=n(543090).h},669966:(e,t,n)=>{n.d(t,{k:()=>a});let a=n(63341).k},972486:(e,t,n)=>{n.d(t,{z:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",d:"M8 2a6 6 0 1 1 0 12A6 6 0 0 1 8 2m0 1a5 5 0 1 0 0 10A5 5 0 0 0 8 3m.044 6.594a.66.66 0 0 1 .475.198.65.65 0 0 1 .107.821.74.74 0 0 1-.247.247.65.65 0 0 1-.335.091.66.66 0 0 1-.483-.198.65.65 0 0 1-.199-.483.64.64 0 0 1 .199-.478.66.66 0 0 1 .483-.198M8.043 5.06c.346 0 .624.285.614.631l-.079 2.921a.536.536 0 0 1-1.07.001l-.08-2.922a.615.615 0 0 1 .615-.631"})})})},396080:(e,t,n)=>{n.d(t,{q:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 3.5a.5.5 0 0 1 .5-.5h2a.5.5 0 1 1 0 1H10v8h.5a.5.5 0 1 1 0 1h-2a.5.5 0 0 1 0-1H9V4h-.5a.5.5 0 0 1-.5-.5m3 2a.5.5 0 0 1 .5-.5h1A1.5 1.5 0 0 1 14 6.5v3a1.5 1.5 0 0 1-1.5 1.5h-1a.5.5 0 0 1 0-1h1a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 1-.5-.5M2.5 7a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 .5.5h4a.5.5 0 1 1 0 1h-4A1.5 1.5 0 0 1 2 9.5v-2a.5.5 0 0 1 .5-.5m2.515-3.56L4.7 4.7l-1.26.315c-.505.126-.505.844 0 .97L4.7 6.3l.315 1.26c.126.505.844.505.97 0L6.3 6.3l1.26-.315c.505-.126.505-.844 0-.97L6.3 4.7l-.315-1.26c-.126-.505-.844-.505-.97 0",clipRule:"evenodd"})})})},231976:(e,t,n)=>{n.d(t,{e:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.207 5.793a1 1 0 0 0-1.414 0l-2 2a1 1 0 0 0 0 1.414l2 2a1 1 0 0 0 1.414 0l2-2a1 1 0 0 0 0-1.414zM6.5 8.5l.707.707.586.586.707.707.707-.707.586-.586.707-.707-.707-.707-.586-.586L8.5 6.5l-.707.707-.586.586zm9 2.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5M17 8.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M15.5 13a.5.5 0 0 1 .5.5V15h1.5a.5.5 0 1 1 0 1H16v1.5a.5.5 0 1 1-1 0V16h-1.5a.5.5 0 0 1 0-1H15v-1.5a.5.5 0 0 1 .5-.5m-6 0h-2A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13M7 14.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5z",clipRule:"evenodd"})})})},55726:(e,t,n)=>{n.d(t,{W:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",d:"M8.963 7.681a1.5 1.5 0 0 1 2.175-.366l.142.126 5.278 5.279.125.142c.536.689.366 1.7-.366 2.175l-.166.093-7.67 3.72a1.5 1.5 0 0 1-1.628-.209l-.087-.08-1.327-1.327a1.5 1.5 0 0 1-.289-1.715l3.72-7.672zM6.05 15.956a.5.5 0 0 0 .096.571l1.326 1.326a.5.5 0 0 0 .499.125l.073-.028 2.153-1.045-3.104-3.104zm1.505-3.108 3.594 3.595 2.079-1.008-4.666-4.665zm3.017-4.7a.5.5 0 0 0-.804.136l-.744 1.534 5.156 5.155 1.534-.743a.5.5 0 0 0 .178-.756l-.043-.047zm8.816 2.246a.477.477 0 0 1 .52.399l.008.06a.48.48 0 0 1-.44.537l-1.724.15a.5.5 0 0 1-.087-.995zm-1.226-2.743a.48.48 0 0 1 .648.154l.033.053a.48.48 0 0 1-.18.66l-2.322 1.34a.5.5 0 0 1-.5-.866zM15.48 5.335a.477.477 0 0 1 .66-.18l.051.032a.48.48 0 0 1 .154.649l-1.34 2.32a.5.5 0 0 1-.864-.5zm-2.335-1.252.061.009c.25.037.42.268.398.52l-.15 1.719a.5.5 0 0 1-.996-.087l.15-1.722a.48.48 0 0 1 .537-.44"})})})},550325:(e,t,n)=>{n.d(t,{g:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10.409 6.874a3 3 0 1 1 4.243 4.242l-3.536 3.536a.5.5 0 0 0 .707.707l3.536-3.536a4 4 0 1 0-5.657-5.657L6.166 9.702a.5.5 0 1 0 .707.707zm-1.06 6.01a3 3 0 0 0 4.242 4.243l3.536-3.536a.5.5 0 0 1 .707.707l-3.536 3.536a4 4 0 1 1-5.657-5.657l3.536-3.536a.5.5 0 1 1 .707.707z",clipRule:"evenodd"})})})},288973:(e,t,n)=>{n.d(t,{n:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",d:"M6.386 5.212a1 1 0 0 1 .81-.191l5.98 1.196.261.057A6 6 0 0 1 18 12.1v.487l.707.707a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.414 0l-.707-.707h-.487a6 6 0 0 1-5.826-4.563l-.057-.26-1.196-5.98a1 1 0 0 1 .273-.904l1-1zm.468.935 3.767 3.768a2.5 2.5 0 1 1-.707.707L6.146 6.854 6 7.001l1.196 5.98a5 5 0 0 0 4.681 4.015l.222.005H13l1 1 4-4-1-1V12.1a5 5 0 0 0-3.803-4.855l-.216-.048L7 6.001zM12 10.501a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 12 10.501"})})})},389567:(e,t,n)=>{n.d(t,{m:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16m0 1a9 9 0 1 0 0-18 9 9 0 0 0 0 18",clipRule:"evenodd"})})})},998241:(e,t,n)=>{n.d(t,{D:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",d:"M16.5 6A1.5 1.5 0 0 1 18 7.5v5.379l-.008.148a1.5 1.5 0 0 1-.431.913l-3.621 3.62-.11.1a1.5 1.5 0 0 1-.951.34H7.5l-.153-.008A1.5 1.5 0 0 1 6 16.5v-9A1.5 1.5 0 0 1 7.5 6zm-9 1a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5H12v-3.5a1.5 1.5 0 0 1 1.5-1.5H17V7.5a.5.5 0 0 0-.5-.5zm6 6a.5.5 0 0 0-.5.5v3.482a.5.5 0 0 0 .232-.128l3.622-3.622a.5.5 0 0 0 .13-.232z"})})})},606467:(e,t,n)=>{n.d(t,{t:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",d:"M14.688 13.532c.25-.287.723-.237.875.112a.47.47 0 0 1-.088.507q-.302.35-.638.686c-1.418 1.418-3.03 2.399-4.476 2.86-1.401.448-2.832.456-3.673-.385-.842-.842-.834-2.272-.386-3.674.073-.229.376-.258.513-.06q.114.165.236.332a.54.54 0 0 1 .086.446c-.27 1.098-.119 1.872.258 2.249.422.422 1.344.561 2.662.14 1.274-.407 2.751-1.295 4.072-2.616q.294-.295.559-.597m-1.044-5.096a.47.47 0 0 1 .506.088q.35.302.687.638c1.418 1.417 2.4 3.03 2.861 4.476.448 1.402.456 2.832-.385 3.674-.842.841-2.272.833-3.674.386-.23-.074-.26-.378-.062-.515q.167-.114.332-.235a.54.54 0 0 1 .446-.086c1.099.27 1.874.12 2.25-.257.422-.422.562-1.344.141-2.662-.407-1.274-1.295-2.753-2.616-4.073a12 12 0 0 0-.599-.56c-.286-.25-.236-.723.113-.874m-6.956-1.75c.841-.84 2.272-.833 3.673-.385.229.073.26.378.062.514q-.167.114-.333.236a.54.54 0 0 1-.446.086c-1.098-.27-1.873-.12-2.25.257-.421.422-.561 1.344-.14 2.662.407 1.274 1.295 2.753 2.616 4.073q.296.296.599.562c.286.25.236.723-.114.874a.47.47 0 0 1-.506-.09 13 13 0 0 1-.686-.639c-1.417-1.417-2.4-3.03-2.861-4.475-.448-1.402-.456-2.832.386-3.674m6.95-.385c1.403-.448 2.833-.455 3.675.386.841.842.833 2.272.385 3.674-.073.228-.377.258-.513.06a13 13 0 0 0-.237-.332.54.54 0 0 1-.086-.446c.271-1.098.12-1.872-.256-2.25-.423-.421-1.345-.56-2.663-.14C12.67 7.66 11.191 8.55 9.87 9.87q-.294.295-.56.6c-.251.285-.724.236-.875-.113a.48.48 0 0 1 .088-.508q.303-.35.64-.687c1.418-1.417 3.03-2.399 4.476-2.86"})})})},882981:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 6.5a.5.5 0 0 0-1 0v12a.5.5 0 0 0 1 0V16h10a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H7zM17 15H7V8h10z",clipRule:"evenodd"})})})},257256:(e,t,n)=>{n.d(t,{v:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 4a.5.5 0 0 0-.5.5V7H4.5a.5.5 0 0 0 0 1H7v8H4.5a.5.5 0 0 0 0 1H7v2.5a.5.5 0 0 0 1 0V17h8v2.5a.5.5 0 0 0 1 0V17h2.5a.5.5 0 0 0 0-1H17V8h2.5a.5.5 0 0 0 0-1H17V4.5a.5.5 0 0 0-1 0V7H8V4.5a.5.5 0 0 0-.5-.5M16 8H8v8h8z",clipRule:"evenodd"})})})},446463:(e,t,n)=>{n.d(t,{I:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",d:"M11.404 5.196a1 1 0 0 1 1.265.06l5 4.5A1 1 0 0 1 18 10.5V17a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-4h-2v4a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-6.5a1 1 0 0 1 .331-.743l5-4.5zM7 10.5V17h3v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4h3v-6.5L12 6z"})})})},944250:(e,t,n)=>{n.d(t,{f:()=>i});var a=n(749214),l=n(848318);let i=(0,l.memo)(function(e){let t=(0,l.useId)();return(0,a.jsxs)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,a.jsx)("mask",{id:t,fill:"#fff",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 6h14a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm2.805.104a.5.5 0 0 0-.61.792l6.5 5a.5.5 0 0 0 .61 0l6.5-5a.5.5 0 0 0-.61-.792L12 11.869z",clipRule:"evenodd"})}),(0,a.jsx)("path",{fill:"var(--color-icon)",d:"m5.805 7.104.61-.793zm-.61.792.61-.792zm6.5 5 .61-.792zm.61 0-.61-.792zm6.5-5-.61-.792zm-.61-.792-.61-.793zM12 11.869l-.61.793.61.469.61-.47zM19 5H5v2h14zm2 2a2 2 0 0 0-2-2v2zm0 10V7h-2v10zm-2 2a2 2 0 0 0 2-2h-2zM5 19h14v-2H5zm-2-2a2 2 0 0 0 2 2v-2zM3 7v10h2V7zm2-2a2 2 0 0 0-2 2h2zm0-1a3 3 0 0 0-3 3h2a1 1 0 0 1 1-1zm14 0H5v2h14zm3 3a3 3 0 0 0-3-3v2a1 1 0 0 1 1 1zm0 10V7h-2v10zm-3 3a3 3 0 0 0 3-3h-2a1 1 0 0 1-1 1zM5 20h14v-2H5zm-3-3a3 3 0 0 0 3 3v-2a1 1 0 0 1-1-1zM2 7v10h2V7zm3.896.805a.5.5 0 0 1-.7.091l1.219-1.585a1.5 1.5 0 0 0-2.104.274zm-.091-.701a.5.5 0 0 1 .091.7L4.311 6.586a1.5 1.5 0 0 0 .274 2.104zm6.5 5-6.5-5-1.22 1.585 6.5 5zm-.61 0a.5.5 0 0 1 .61 0l-1.22 1.585a1.5 1.5 0 0 0 1.83 0zm6.5-5-6.5 5 1.22 1.585 6.5-5zm-.091.7a.5.5 0 0 1 .091-.7l1.22 1.585a1.5 1.5 0 0 0 .274-2.104zm.7.092a.5.5 0 0 1-.7-.091l1.585-1.22a1.5 1.5 0 0 0-2.104-.274zm-6.194 4.766 6.195-4.766-1.22-1.585-6.195 4.766zM5.195 7.896l6.195 4.766 1.22-1.585L6.415 6.31z",mask:`url(#${t})`})]})})},350325:(e,t,n)=>{n.d(t,{I:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.88 4.98a1.315 1.315 0 0 0-1.86 0c-1.947 1.947-2.312 4.973-.584 7.116.817 1.013 1.8 2.14 2.928 3.268a41 41 0 0 0 3.268 2.928c2.143 1.728 5.169 1.363 7.115-.584a1.315 1.315 0 0 0 0-1.86l-2.006-2.007a1.59 1.59 0 0 0-2.049-.169 2 2 0 0 1-2.576-.213l-1.847-1.847a2 2 0 0 1-.213-2.576 1.59 1.59 0 0 0-.17-2.049zm-1.79 6.328c-1.223-1.683-.95-4.035.637-5.62a.316.316 0 0 1 .446 0l2.006 2.006a.59.59 0 0 1 .116.669l-.053.091a3 3 0 0 0 .32 3.865l1.847 1.847a3 3 0 0 0 3.864.32l.092-.054a.59.59 0 0 1 .669.116l2.006 2.007a.316.316 0 0 1 0 .446c-1.586 1.586-3.937 1.86-5.62.636l-.16-.123a40 40 0 0 1-3.189-2.857 40 40 0 0 1-2.857-3.188z",clipRule:"evenodd"})})})},424292:(e,t,n)=>{n.d(t,{T:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10.003 7.375A5.5 5.5 0 0 1 16.61 9.5H14a.5.5 0 0 0 0 1h3.5a.5.5 0 0 0 .5-.5V6.5a.5.5 0 0 0-1 0v1.847a6.5 6.5 0 1 0-.128 8.456.5.5 0 1 0-.75-.662 5.5 5.5 0 1 1-6.119-8.766",clipRule:"evenodd"})})})},478940:(e,t,n)=>{n.d(t,{n:()=>r});var a=n(749214),l=n(848318),i=n(527828);let r=(0,l.memo)(function(e){return(0,i.O)()?(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.287 6.044c-.561.24-1.22.22-1.787-.106a2 2 0 0 1-.986-1.495c-.07-.576-.495-1.253-1.297-1.361a9 9 0 0 0-2.434 0c-.802.108-1.228.785-1.297 1.36A2 2 0 0 1 8.5 5.939a2 2 0 0 1-1.787.106c-.533-.227-1.33-.197-1.826.44a9 9 0 0 0-1.22 2.111c-.307.749.067 1.456.53 1.803.49.367.803.948.803 1.602s-.313 1.235-.802 1.602c-.464.347-.838 1.054-.531 1.803.311.761.724 1.47 1.22 2.11.495.638 1.293.668 1.826.44a2 2 0 0 1 1.787.107c.566.327.913.889.986 1.495.07.576.495 1.253 1.297 1.361a9 9 0 0 0 2.434 0c.802-.108 1.227-.785 1.297-1.36.073-.607.42-1.169.986-1.496a2 2 0 0 1 1.787-.106c.533.227 1.33.197 1.826-.44.496-.64.909-1.35 1.22-2.111.307-.749-.067-1.456-.53-1.803A2 2 0 0 1 19 12c0-.654.313-1.235.802-1.602.464-.347.838-1.054.531-1.803a9 9 0 0 0-1.22-2.11c-.495-.638-1.293-.668-1.826-.44M15 6.804c.85.49 1.841.518 2.68.16.224-.096.493-.058.643.134.442.57.808 1.2 1.085 1.876.092.226-.01.478-.206.624A3 3 0 0 0 18 12c0 .983.472 1.855 1.203 2.402.195.146.297.398.205.624a8 8 0 0 1-1.085 1.876c-.15.192-.419.23-.643.134a3 3 0 0 0-2.68.16 3 3 0 0 0-1.479 2.241c-.03.243-.196.458-.438.49a8 8 0 0 1-2.166 0c-.242-.032-.409-.247-.438-.49A3 3 0 0 0 9 17.197a3 3 0 0 0-2.68-.161c-.224.096-.493.058-.643-.134a8 8 0 0 1-1.085-1.876c-.092-.226.01-.478.205-.624A3 3 0 0 0 6 12c0-.983-.472-1.855-1.203-2.402-.195-.146-.297-.398-.205-.624a8 8 0 0 1 1.085-1.876c.15-.192.419-.23.643-.134.839.358 1.83.33 2.68-.16a3 3 0 0 0 1.479-2.241c.03-.243.196-.458.438-.49a8 8 0 0 1 2.166 0c.242.032.409.247.438.49.11.905.628 1.75 1.479 2.24M9.5 12a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0M12 8.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.287 6.044c-.561.24-1.22.22-1.787-.106a2 2 0 0 1-.986-1.495c-.07-.576-.495-1.253-1.297-1.361a9 9 0 0 0-2.434 0c-.802.108-1.228.785-1.297 1.36A2 2 0 0 1 8.5 5.939a2 2 0 0 1-1.787.106c-.533-.227-1.33-.197-1.826.44a9 9 0 0 0-1.22 2.111c-.307.749.067 1.456.53 1.803.49.367.803.948.803 1.602s-.313 1.235-.802 1.602c-.464.347-.838 1.054-.531 1.803.311.761.724 1.47 1.22 2.11.495.638 1.293.668 1.826.44a2 2 0 0 1 1.787.107c.566.327.913.889.986 1.495.07.576.495 1.253 1.297 1.361a9 9 0 0 0 2.434 0c.802-.108 1.227-.785 1.297-1.36.073-.607.42-1.169.986-1.496a2 2 0 0 1 1.787-.106c.533.227 1.33.197 1.826-.44.496-.64.909-1.35 1.22-2.111.307-.749-.067-1.456-.53-1.803A2 2 0 0 1 19 12c0-.654.313-1.235.802-1.602.464-.347.838-1.054.531-1.803a9 9 0 0 0-1.22-2.11c-.495-.638-1.293-.668-1.826-.44m-3.766-1.481c.11.905.628 1.75 1.479 2.24a2.99 2.99 0 0 0 2.68.161c.224-.096.493-.058.643.134.442.57.808 1.2 1.085 1.876.092.226-.01.478-.206.624A3 3 0 0 0 18 12c0 .983.472 1.855 1.203 2.402.195.146.297.398.205.624a8 8 0 0 1-1.085 1.876c-.15.192-.419.23-.643.134a3 3 0 0 0-2.68.16 3 3 0 0 0-1.479 2.241c-.03.243-.196.458-.438.49a8 8 0 0 1-2.166 0c-.242-.032-.409-.247-.438-.49A3 3 0 0 0 9 17.197a3 3 0 0 0-2.68-.161c-.224.096-.493.058-.643-.134a8 8 0 0 1-1.085-1.876c-.092-.226.01-.478.205-.624A3 3 0 0 0 6 12c0-.983-.472-1.855-1.203-2.402-.195-.146-.297-.398-.205-.624a8 8 0 0 1 1.085-1.876c.15-.192.419-.23.643-.134.839.358 1.83.33 2.68-.16a3 3 0 0 0 1.479-2.241c.03-.243.196-.458.438-.49a8 8 0 0 1 2.166 0c.242.032.409.247.438.49M14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0m1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0",clipRule:"evenodd"})})})},643727:(e,t,n)=>{n.d(t,{J:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M12.465 17.738c-.233.23-.389.262-.465.262s-.232-.032-.465-.262c-.238-.234-.498-.623-.737-1.182-.434-1.013-.738-2.433-.79-4.056h3.984c-.052 1.623-.356 3.044-.79 4.056-.24.56-.5.948-.737 1.182m1.527-6.238h-3.984c.052-1.623.356-3.044.79-4.056.24-.56.5-.948.737-1.182.233-.23.389-.262.465-.262s.232.032.465.262c.238.234.498.623.737 1.182.434 1.012.738 2.433.79 4.056m1 1c-.065 2.176-.558 4.078-1.282 5.253a6.005 6.005 0 0 0 4.27-5.253zm2.988-1h-2.988c-.065-2.176-.558-4.078-1.282-5.253a6.005 6.005 0 0 1 4.27 5.253m-8.972 0c.065-2.176.558-4.078 1.282-5.253A6.005 6.005 0 0 0 6.02 11.5zm-2.987 1a6.005 6.005 0 0 0 4.27 5.253c-.725-1.175-1.218-3.077-1.283-5.253zM19 12a7 7 0 1 0-14 0 7 7 0 0 0 14 0",clipRule:"evenodd"})})})},104885:(e,t,n)=>{n.d(t,{e:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m14.28 10-.229-.684L12 3.162 9.949 9.316 9.72 10H3.16l4.832 3.397.608.427-.235.706-1.928 5.81 4.972-3.647.59-.433.592.433 4.972 3.646-1.928-5.81-.235-.705.608-.427L20.84 10zM9 9H3.16c-.976 0-1.373 1.256-.574 1.818l4.83 3.397-1.928 5.81c-.307.924.755 1.697 1.54 1.12L12 17.5l4.972 3.646c.785.576 1.847-.197 1.54-1.122l-1.928-5.81 4.83-3.396c.8-.562.402-1.818-.575-1.818H15l-2.05-6.154c-.304-.912-1.594-.912-1.898 0z",clipRule:"evenodd"})})})},857242:(e,t,n)=>{n.d(t,{B:()=>r});var a=n(749214),l=n(848318),i=n(527828);let r=(0,l.memo)(function(e){return(0,i.O)()?(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M4 5.5a.5.5 0 0 1 .5-.5h15a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V6h-6.5v13H15a.5.5 0 0 1 0 1H9a.5.5 0 0 1 0-1h2.5V6H5v2.5a.5.5 0 0 1-1 0z",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M4 5.5a.5.5 0 0 1 .5-.5h14a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V6h-6v12h2.5a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1H11V6H5v2.5a.5.5 0 0 1-1 0z",clipRule:"evenodd"})})})},111116:(e,t,n)=>{n.d(t,{w:()=>l});var a=n(749214);let l=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18.5 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m0 1a2.5 2.5 0 1 0-2.45-3H16C9.925 5 5 9.925 5 16v.05a2.5 2.5 0 1 0 1 0V16c0-5.523 4.477-10 10-10h.05a2.5 2.5 0 0 0 2.45 2m-13 12a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3",clipRule:"evenodd"})})})}}]);

//# debugId=2861c107-350b-544c-ba48-68b56796032c

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/a9dca0e484ea3e53616819b393010fad445b90ae/1591-c40236c24bbab345.min.js.map